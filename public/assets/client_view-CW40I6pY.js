import{c as Y,S as xe,j as e,g as D,l as I}from"./StringFormater-Cap468ij.js";import{H as R,r as u,R as fe}from"./index-B46Wt8w4.js";import{f as ge}from"./DataBase-u9YpBFfJ.js";const $=Y(o=>({user:void 0,store:void 0,userStore:void 0,manager:void 0,openAuth:!1,async updateUser({name:s,photos:t,id:n}){const a=new FormData;if(s&&a.append("name",s),t!=null&&t[0])a.append("photos_0",t[0]);else return;a.append("id",n),a.append("photos",'["photos_0"]');const i=$.getState().getHeaders();if(!i)return;const l=await(await fetch(`${R}/edit_me`,{method:"PUT",body:a,headers:i.headers})).json();console.log({user:l}),l.id&&(o(()=>({user:{...l,photos:l.photos.map(d=>`${R}${d}`)}})),localStorage.setItem("user",JSON.stringify(l)))},async disconnection(){const s=$.getState().getHeaders();if(!s)return;const t={method:"GET",headers:s.headers};await fetch(`${R}/disconnection`,t),localStorage.removeItem("user"),localStorage.removeItem("store_name"),o(()=>({user:void 0,store:void 0,userStore:void 0,openAuth:!0}))},async getAccess(){window.open(`${R}/google_connexion`,void 0,"popup");const s=setInterval(()=>{const t=localStorage.getItem("user"),n=t&&JSON.parse(t);n&&(console.log("getAccess",{token:n.token}),o(()=>({user:n})),clearInterval(s),$.getState().authenticateUser())},100)},async authenticateUser(){let s=localStorage.getItem("user");const t=localStorage.getItem("store_name")||window.location.pathname.split("/")[2];if(s){const n=JSON.parse(s),a=new Headers;a.append("Authorization",`Bearer ${n.token}`);const i={method:"GET",headers:a},c=await fetch(`${R}/can_use_store/${t}`,i);let l;try{if(l=await c.json(),!l.user)return}catch{return}const d={...n,...l.user};o(()=>({user:d,manager:l.manager,userStore:l.userStore,store:l.store,openAuth:!1})),localStorage.setItem("user",JSON.stringify(d))}else await $.getState().getStore()},async getStore(){const s=localStorage.getItem("store_name")||window.location.pathname.split("/")[1];if(s){const t=await fetch(`${R}/get_store_by_name/${s}`);try{let n=await t.json();o(()=>({store:n}))}catch{}}},getHeaders(){const s=$.getState().store;if(!s)return;let t=$.getState().user;if(!t)return;const n=new Headers;return n.append("Authorization",`Bearer ${t.token}`),{store:s,headers:n,user:t}}})),je={"/":{loading:{},products:{detail:{comments:{},images:{}}},categories:{},favorites:{},cart:{},payment:{},command:{},profile:{}}},te=Y(o=>({T:localStorage.getItem("theme"),storeVar:void 0,usersVar:void 0,back_color:"",blur:!1,openNav:"max",setOpenNav(s){o(()=>({openNav:s}))},setT(s){s&&localStorage.setItem("theme",s),o(()=>({T:s}))},currentChild:void 0,openChild(s,t,n){o(()=>({currentChild:s,blur:t,back_color:s&&n||""}))}})),z=new xe(je,["/","products"]).getStore(),Ne=(o,s)=>{const t=setInterval(()=>{let n=!1,a=o,i=0;for(;!n;){if(a==document.body){clearInterval(t),s(),n=!0;return}else a==null||i>100?n=!0:a=a.parentElement;i++}},100)},me=(o,s)=>t=>{if(!t)return;if(t.dataset.init)return o==null?void 0:o(t.setIndex);t.dataset.init="init:"+Math.trunc(Math.random()*1e3)/1e3;const n=()=>{let a=0;const i=d=>{const m=t.querySelectorAll(".card-h-c");if(a=d,m.length<=0)return;a=a>=m.length?m.length-1:a<0?0:a;const r=t.getBoundingClientRect(),N=r.width,b=m[a].getBoundingClientRect(),x=b.x-r.x+b.width/2;t.scrollTo({behavior:"smooth",left:t.scrollLeft-(N/2-x)})};t.setIndex=i;const c=()=>{const d=t.getBoundingClientRect().width;i(a);const m=t.querySelectorAll(".gap");for(const r of m)r.style.width=`${d/2}px`,r.style.minWidth=`${d/2}px`,r.style.maxWidth=`${d/2}px`};window.addEventListener("resize",c),c();const l=.1;t.addEventListener("scrollend",()=>{const d=t.getBoundingClientRect(),m=d.width,r=m*l,f=t.querySelectorAll(".card-h-c")[a].getBoundingClientRect(),b=f.x-d.x+f.width/2;let x=a;b<m/2-r?(x=a+1,i(x)):b>m/2+r?(x=a-1,i(x)):i(a),s==null||s(x)}),o==null||o(i)};Ne(t,()=>{n()})};function se({product:o,active:s,onClick:t}){var i,c,l,d;const[n,a]=u.useState(0);return e.jsxs("div",{className:"product-card "+(s?"active":""),onClick:t,children:[e.jsxs("div",{className:"images",ref:me(void 0,a),children:[e.jsx("div",{className:"gap"}),o.images.map(m=>e.jsx("div",{className:"image card-h-c ",style:{background:D(m)}},m)),e.jsx("div",{className:"gap"})]}),e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"counters",children:o.images.map((m,r)=>e.jsx("div",{className:"counter "+(n==r?"active":"")},m))}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"value",children:"12450.93 $"})}),e.jsxs("h3",{className:"name limit-text",children:[e.jsx("span",{className:"product-title",children:o.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:o.description})]}),e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"star "+((i=o.note)!=null&&i.star?"":"vide")}),e.jsx("div",{className:"note",children:(c=o.note)==null?void 0:c.star}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"vote",children:(l=o.note)==null?void 0:l.votes}),e.jsx("div",{className:"users"}),!((d=o.note)!=null&&d.star)&&e.jsx("div",{className:"new",children:"New"})]}),e.jsx("div",{className:"add-btn",onClick:m=>{m.preventDefault(),m.stopPropagation()},children:e.jsxs("div",{className:"btn",children:["Add ",e.jsx("span",{children:" to cart"})]})})]})]})}const he=Y((o,s)=>({visites:void 0,product:void 0,products:{limit:25,list:[],page:1,total:0},async setClientVisite(t){const n=$.getState().getHeaders();if(!n)return;const a=new FormData;a.append("product_id",t),await fetch(`${R}/set_client_visited`,{headers:n.headers,body:a,method:"PUT"})},async fetchVisites({after_date:t,before_date:n,client_id:a,product_id:i,limit:c,page:l}){const d=$.getState().getHeaders();if(!d)return;const m={};m.store_id=d.store.id,m.product_id=i||"",m.client_id=a||"",m.limit=c||25,m.page=l||1,m.after_date=t||"",m.before_date=n||"";const r=new URLSearchParams({});for(const b in m){const x=m[b];x!=null&&r.set(b,x)}const f=await(await fetch(`${R}/get_client_visited/?${r.toString()}`,{headers:d.headers})).json();!f||!f.list||o(()=>({visites:f}))},featuresCollector:void 0,async setProductById(t){if(!t.product_id)return;const n=s().products,a=n==null?void 0:n.list.find(i=>i.id==t.product_id);if(a)s().selectProduct(a),o(()=>({featuresCollector:a==null?void 0:a.featuresCollector})),console.log(t);else{const i=$.getState().store;if(!i)return;const c={};c.product_id=t.product_id,c.is_features_required=!0,c.store_id=i.id,c.by_product_category=!(n!=null&&n.list[0]);const l=new URLSearchParams({});for(const N in c){const f=c[N];f!=null&&l.set(N,f)}const m=await(await fetch(`${R}/get_products/?${l.toString()}`)).json();if(!m.list)return;const r=m.list.find(N=>N.id==t.product_id)||m.list[0];o(()=>({products:n?{...n,list:[...m.list.filter(N=>!n.list.find(f=>f.id==N.id)),...n.list]}:m,product:r,featuresCollector:r==null?void 0:r.featuresCollector})),s().selectProduct(r)}},fetchProducts:async t=>{const n=$.getState().store;if(!n)return;const a={...t};a.is_features_required=!0,a.store_id=n.id;const i=new URLSearchParams({});for(const d in a){const m=a[d];m!=null&&i.set(d,m)}const l=await(await fetch(`${R}/get_products/?${i.toString()}`)).json();if(l!=null&&l.list)return t!=null&&t.no_save||o(()=>({products:l})),{...l}},async selectProduct(t){if(!t)return o(()=>({product:void 0}));t.features=ge;const n={};t.features.list.forEach(a=>{var i;a.default_value?n[a.id]=a.default_value:(console.log("nnnnnnnnnn"),n[a.id]=(i=a.components)==null?void 0:i.find(c=>!!c.is_default),a.default_value=n[a.id])}),t.featuresCollector={collectFeature(a,i){i!=null?n[a.id]=i:a.default_value&&(n[a.id]=a.default_value),o(()=>({featuresCollector:t.featuresCollector&&{...t.featuresCollector}}))},getCollectedFeatures(a){return n[a]},allCollectedFeatures(){return n}},o(()=>({product:t})),s().setClientVisite(t.id)}}));class ue{constructor(s,t,n){this.set(s,t,n)}toString(){return`rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`}set(s,t,n){this.r=this.clamp(s),this.g=this.clamp(t),this.b=this.clamp(n)}hueRotate(s=0){s=s/180*Math.PI;const t=Math.sin(s),n=Math.cos(s);this.multiply([.213+n*.787-t*.213,.715-n*.715-t*.715,.072-n*.072+t*.928,.213-n*.213+t*.143,.715+n*.285+t*.14,.072-n*.072-t*.283,.213-n*.213-t*.787,.715-n*.715+t*.715,.072+n*.928+t*.072])}grayscale(s=1){this.multiply([.2126+.7874*(1-s),.7152-.7152*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152+.2848*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152-.7152*(1-s),.0722+.9278*(1-s)])}sepia(s=1){this.multiply([.393+.607*(1-s),.769-.769*(1-s),.189-.189*(1-s),.349-.349*(1-s),.686+.314*(1-s),.168-.168*(1-s),.272-.272*(1-s),.534-.534*(1-s),.131+.869*(1-s)])}saturate(s=1){this.multiply([.213+.787*s,.715-.715*s,.072-.072*s,.213-.213*s,.715+.285*s,.072-.072*s,.213-.213*s,.715-.715*s,.072+.928*s])}multiply(s){const t=this.clamp(this.r*s[0]+this.g*s[1]+this.b*s[2]),n=this.clamp(this.r*s[3]+this.g*s[4]+this.b*s[5]),a=this.clamp(this.r*s[6]+this.g*s[7]+this.b*s[8]);this.r=t,this.g=n,this.b=a}brightness(s=1){this.linear(s)}contrast(s=1){this.linear(s,-(.5*s)+.5)}linear(s=1,t=0){this.r=this.clamp(this.r*s+t*255),this.g=this.clamp(this.g*s+t*255),this.b=this.clamp(this.b*s+t*255)}invert(s=1){this.r=this.clamp((s+this.r/255*(1-2*s))*255),this.g=this.clamp((s+this.g/255*(1-2*s))*255),this.b=this.clamp((s+this.b/255*(1-2*s))*255)}hsl(){const s=this.r/255,t=this.g/255,n=this.b/255,a=Math.max(s,t,n),i=Math.min(s,t,n);let c,l,d=(a+i)/2;if(a===i)c=l=0;else{const m=a-i;switch(l=d>.5?m/(2-a-i):m/(a+i),a){case s:c=(t-n)/m+(t<n?6:0);break;case t:c=(n-s)/m+2;break;case n:c=(s-t)/m+4;break}c/=6}return{h:c*100,s:l*100,l:d*100}}clamp(s){return s>255?s=255:s<0&&(s=0),s}}class _e{constructor(s,t){this.target=s,this.targetHSL=s.hsl(),this.reusedColor=new ue(0,0,0)}solve(){const s=this.solveNarrow(this.solveWide());return{values:s.values,loss:s.loss,filter:this.css(s.values)}}solveWide(){const n=[60,180,18e3,600,1.2,1.2];let a={loss:1/0};for(let i=0;a.loss>25&&i<3;i++){const c=[50,20,3750,50,100,100],l=this.spsa(5,n,15,c,1e3);l.loss<a.loss&&(a=l)}return a}solveNarrow(s){const t=s.loss,n=2,a=t+1,i=[.25*a,.25*a,a,.25*a,.2*a,.2*a];return this.spsa(t,i,n,s.values,500)}spsa(s,t,n,a,i){const l=.16666666666666666;let d=null,m=1/0;const r=new Array(6),N=new Array(6),f=new Array(6);for(let x=0;x<i;x++){const g=n/Math.pow(x+1,l);for(let h=0;h<6;h++)r[h]=Math.random()>.5?1:-1,N[h]=a[h]+g*r[h],f[h]=a[h]-g*r[h];const j=this.loss(N)-this.loss(f);for(let h=0;h<6;h++){const y=j/(2*g)*r[h],P=t[h]/Math.pow(s+x+1,1);a[h]=b(a[h]-P*y,h)}const L=this.loss(a);L<m&&(d=a.slice(0),m=L)}return{values:d,loss:m};function b(x,g){let j=100;return g===2?j=7500:(g===4||g===5)&&(j=200),g===3?x>j?x%=j:x<0&&(x=j+x%j):x<0?x=0:x>j&&(x=j),x}}loss(s){const t=this.reusedColor;t.set(0,0,0),t.invert(s[0]/100),t.sepia(s[1]/100),t.saturate(s[2]/100),t.hueRotate(s[3]*3.6),t.brightness(s[4]/100),t.contrast(s[5]/100);const n=t.hsl();return Math.abs(t.r-this.target.r)+Math.abs(t.g-this.target.g)+Math.abs(t.b-this.target.b)+Math.abs(n.h-this.targetHSL.h)+Math.abs(n.s-this.targetHSL.s)+Math.abs(n.l-this.targetHSL.l)}css(s){function t(n,a=1){return Math.round(s[n]*a)}return`invert(${t(0)}%) sepia(${t(1)}%) saturate(${t(2)}%) hue-rotate(${t(3,3.6)}deg) brightness(${t(4)}%) contrast(${t(5)}%)`}}function we(o){const s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(s,(n,a,i,c)=>a+a+i+i+c+c);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}const Z={},J=o=>{if(Z[o])return Z[o];const s=we(o);if(s.length!==3){alert("Invalid format!");return}const t=new ue(s[0],s[1],s[2]),a=new _e(t).solve(),i={color:t,result:a};return Z[o]=i,i};function ie({note:o}){return e.jsxs("div",{className:"note-stars",children:[e.jsx("div",{className:"icon first "+(o>=1?"full":o<=0?"vide":"half")}),e.jsx("div",{className:"icon "+(o>=2?"full":o<=1?"vide":"half")}),e.jsx("div",{className:"icon "+(o>=3?"full":o<=2?"vide":"half")}),e.jsx("div",{className:"icon "+(o>=4?"full":o<=3?"vide":"half")}),e.jsx("div",{className:"icon "+(o>=5?"full":o<=4?"vide":"half")})]})}const Q=Y(o=>({comments:void 0,index:void 0,lastPage:void 0,setLastPage(s){o(()=>({lastPage:s}))},setIndex(s){o(()=>({index:s}))},userComment:void 0,async getCommentIndex(s){const t=new URLSearchParams({});for(const i in s){const c=s[i];c!=null&&t.set(i,c)}return await(await fetch(`${R}/get_comment_index/?${t}`)).json()},async sendCommentResponse(s){const t=$.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_comment_id",s.comment_id.toString()),n.append("response",s.response);const i=await(await fetch(`${R}/set_product_comment_response`,{method:"PUT",body:n,headers:t.headers})).json();if(i!=null&&i.id)return o(({comments:c})=>({comments:c&&{...c,list:c.list.map(l=>l.id==s.comment_id?i:l)}})),i},async fetcheditCommentText(s){const t=$.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_comment_id",s.comment_id.toString()),n.append("text",s.text);const i=await(await fetch(`${R}/edit_product_comment_text`,{method:"PUT",body:n,headers:t.headers})).json();if(i!=null&&i.id)return o(({comments:c})=>({comments:c&&{...c,list:c.list.map(l=>l.id==s.comment_id?i:l)}})),i},async deleteComment(s,t){const n=$.getState().getHeaders();if(!n)return;const i=await(await fetch(`${R}/delete_product_comment/${s.id}`,{method:"DELETE",headers:n.headers})).json();if(i!=null&&i.deleted)return t&&setTimeout(()=>{o(({comments:c})=>({comments:c&&{...c,list:c.list.filter(l=>l.id!=s.id)}}))},t),i},async fetchProductComments(s){if(!$.getState().store)return;const n=new URLSearchParams({});for(const c in s){const l=s[c];n.set(c,l)}const i=await(await fetch(`${R}/get_product_comments/?${n.toString()}`)).json();return s!=null&&s.no_save||o(()=>({comments:i})),i},async fetchUserComment(){},async create_product_comment(s){const t=$.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_id",s.product_id),n.append("note",s.note+""),n.append("text",s.text);for(let c=0;c<s.photos.length;c++)n.append("photos_"+c,s.photos[c]);for(let c=0;c<s.videos.length;c++)n.append("videos_"+c,s.videos[c]);console.log(s);const i=await(await fetch(`${R}/create_product_comment`,{method:"POST",body:n,headers:t.headers})).json();if(i!=null&&i.id)return i}}));function K({comment:o,canOpen:s,onClick:t}){var B,v;const[n,a]=u.useState(!1),[i,c]=u.useState(!1),{userStore:l,manager:d}=$(),{deleteComment:m,sendCommentResponse:r,fetcheditCommentText:N}=Q(),f=(d==null?void 0:d.type.toLocaleLowerCase())=="collaborator"||(d==null?void 0:d.type.toLocaleLowerCase())=="owner",[b,x]=u.useState(!1),[g,j]=u.useState(!1),[L,h]=u.useState(o.text||""),[y,P]=u.useState(o.response||""),A=(l==null?void 0:l.user_id)==o.user_id,[F,W]=u.useState(null);return e.jsxs("div",{ref:W,className:"product-comment",onClick:()=>{t==null||t(),c(!1)},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"photo",style:{background:o.user?D(o.user.photos[0]):""},children:e.jsx("span",{style:{background:(B=o.user)!=null&&B.country_icon?D(o.user.country_icon):""}})}),e.jsxs("div",{className:"coment-right",children:[e.jsxs("div",{className:"flex",style:{flexWrap:"nowrap"},children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"name",children:(v=o.user)==null?void 0:v.name}),e.jsx(ie,{note:o.note})]}),(A||f)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"option",onClick:w=>{w.preventDefault(),w.stopPropagation(),c(!i)}}),e.jsxs("div",{className:"ctn-option "+(i?"open":""),onClick:()=>{c(!1)},children:[e.jsx("div",{className:"close",onClick:()=>{c(!1)}}),A&&e.jsx("div",{className:"edit-comment",onClick:()=>{x(!0),j(!1)},children:"Edit Comment"}),f&&e.jsx("div",{className:"edit-response",onClick:()=>{j(!0),x(!1)},children:o.response?"Edit Response":"Add Response"}),e.jsx("div",{className:"delete",onClick:()=>{m(o,300).then(w=>{w!=null&&w.deleted&&(F==null||F.classList.add("deleted"),setTimeout(()=>{F&&(F.style.display="none")},300))})},children:"Delete"})]})]})]}),e.jsx("div",{className:"date",children:new Date(o.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),e.jsx("div",{className:"message",children:b?e.jsxs("label",{htmlFor:"edit-comment-"+o.id,children:[e.jsx("input",{id:"edit-comment-"+o.id,type:"text",value:L,placeholder:"Edit Comment",onChange:w=>{h(w.currentTarget.value)}}),e.jsx("span",{onClick:()=>{j(!1),x(!1),N({comment_id:o.id,text:L})}})]}):o.text})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),s&&(o.photos_count>0||o.videos_count>0)&&e.jsxs("div",{className:"files-ctn",children:[o.photos.map((w,E)=>e.jsx("div",{style:{background:D(w)+",#4544"},onClick:_=>{_.preventDefault(),_.stopPropagation(),t==null||t({comment:o,relative:E})}},w)),o.videos.map((w,E)=>e.jsx("div",{onClick:_=>{_.preventDefault(),_.stopPropagation(),t==null||t({comment:o,relative:o.photos.length+E})},children:e.jsx("video",{width:60,height:60,src:`${R}${w}`})},w))]})]}),(s&&o.response||g)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"open-response "+(n||g?"open":""),onClick:()=>{a(!n),j(!1),x(!1)},children:[o.response?"Open response":"Add Response",e.jsx("span",{})]}),e.jsx("div",{className:"response "+(n||g?"open":""),children:g?e.jsxs("label",{htmlFor:"edit-response-"+o.id,children:[e.jsx("input",{id:"edit-response-"+o.id,type:"text",value:y,placeholder:"Edit Response",onChange:w=>{P(w.currentTarget.value)}}),e.jsx("span",{onClick:()=>{j(!1),a(!0),r({comment_id:o.id,response:y})}})]}):o.response})]})]})}function ee({posistion:o,size:s,top:t,step:n}){return a=>{if(!a||a.dataset.init)return;a.dataset.init="init",a.style.scrollBehavior="smooth";const i=a.parentElement,c=document.createElement("div");c.style.width=a.style.width,c.style.position="relative",c.append(a),i.append(c);const l=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div"),r=document.createElement("div");d.className="h-scroll-icon-ctn right",l.className="h-scroll-icon-ctn",s&&(d.style.width=`${s}px`,d.style.height=`${s}px`,l.style.width=`${s}px`,l.style.height=`${s}px`),o&&(d.style.right=`${-o}px`,l.style.left=`${-o}px`),t&&(d.style.top=`${t}px`,l.style.top=`${t}px`),r.className="h-scroll-icon right",m.className="h-scroll-icon",d.append(r),l.append(m),r.style.filter=J("#123").result.filter,m.style.filter=J("#123").result.filter,c.append(d,l);const N=()=>{a.scrollLeft<=0?l.style.display="none":l.style.display="block",a.scrollLeft>=a.scrollWidth-a.getBoundingClientRect().width-30?d.style.display="none":d.style.display="block"};l.addEventListener("click",()=>{n?a.scrollLeft-=n:a.scrollLeft-=a.getBoundingClientRect().width/2}),d.addEventListener("click",()=>{n?a.scrollLeft+=n:a.scrollLeft+=a.getBoundingClientRect().width/2}),a.addEventListener("scroll",N),setTimeout(()=>{N()},500)}}function pe(){const{getAccess:o}=$();return e.jsx("div",{className:"page-auth",children:e.jsxs("div",{className:"auth-ctn",onClick:s=>{s.stopPropagation(),s.preventDefault()},children:[e.jsx("div",{className:"image"}),e.jsxs("div",{className:"form",children:[e.jsx("h1",{className:"auth-title",children:"JOIN US NOW"}),e.jsxs("h5",{className:"auth-prompt",children:["Read more ?"," ",e.jsx("span",{onClick:()=>{},children:"Click here"})]}),e.jsxs("div",{className:"google",onClick:()=>{o()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Connexion"})]}),e.jsx("p",{children:"Google connexion is required to get access to sublymus service."})]})]})})}function ye({product:o,setRef:s,userCommand:t}){const{userComment:n,comments:a,create_product_comment:i,fetchProductComments:c,setIndex:l}=Q(),{openChild:d}=te(),{user:m}=$(),{navBack:r,qs:N,current:f,json:b}=z(),[x,g]=u.useState([]),[j,L]=u.useState([]),[h,y]=u.useState(""),[P,A]=u.useState(0),[F,W]=u.useState(!1),[B,v]=u.useState(),[w,E]=u.useState(!1),[_,O]=u.useState({order_by:"created_at_desc",order_text:"Date",with_photo:!1,with_video:!1,limit:20,page:1}),[q,H]=u.useState(!1);return u.useEffect(()=>{c({product_id:o.id,..._})},[B,o,_,b]),f("comments")&&e.jsxs("section",{className:"page-comments "+(f("comments")?"open":"close"),ref:s,children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"return",onClick:()=>{r()}}),e.jsx("h1",{children:"Comments"}),e.jsx("div",{className:"option"})]}),e.jsx(ve,{product:o,onClick:()=>N().keepJson().setAbsPath(["products","detail","images"])}),e.jsxs("div",{className:"write-comment",children:[e.jsxs("div",{className:"top-prompt",children:[" Leave a comment ",e.jsx("span",{})]}),B?e.jsx("div",{children:"Thank you for the comment."}):n?e.jsxs("div",{children:["You have already commented on this product ",e.jsx("span",{onClick:()=>W(!0),children:" see my comment"})]}):t!=null&&t.payment_id?e.jsxs("div",{className:"zone-inputs",children:[e.jsxs("div",{className:"user-rating",children:[e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"icon "+(P>=1?"star":""),onClick:()=>A(1)}),e.jsx("div",{className:"icon "+(P>=2?"star":""),onClick:()=>A(2)}),e.jsx("div",{className:"icon "+(P>=3?"star":""),onClick:()=>A(3)}),e.jsx("div",{className:"icon "+(P>=4?"star":""),onClick:()=>A(4)}),e.jsx("div",{className:"icon "+(P==5?"star":""),onClick:()=>A(5)})]}),e.jsx("div",{className:"value",children:P})]}),!!P&&e.jsxs("label",{htmlFor:"comment-input-text",className:"input-text",children:[e.jsx("input",{id:"comment-input-text",autoFocus:!0,type:"text",value:h,placeholder:"Write Comment",onChange:C=>{y(C.target.value.substring(0,200))}}),e.jsxs("div",{className:"div",children:[h.length,"/200"]})]}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-photo",id:"comment-photo",accept:"image/*",onChange:C=>{if(C.target.files){for(const S of C.target.files)x.unshift(S);g([...x].slice(0,5))}}}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-video",id:"comment-video",accept:"video/*",onChange:C=>{if(C.target.files){for(const S of C.target.files)j.unshift(S);L([...j].slice(0,2))}}}),e.jsxs("div",{className:"files-ctn",style:{display:P&&h?"flex":"none"},children:[e.jsxs("div",{className:"photo-ctn",children:[e.jsxs("label",{htmlFor:"comment-photo",className:"photo",children:[e.jsx("span",{}),"Photo ",x.length,"/5"]}),e.jsx("div",{className:"files-photo",children:x.map(C=>e.jsx("div",{style:{background:D(URL.createObjectURL(C))},children:e.jsx("span",{onClick:()=>{g(x.filter(S=>S!=C))}})},C.name))})]}),e.jsxs("div",{className:"video-ctn",children:[e.jsxs("label",{htmlFor:"comment-video",className:"photo",children:[e.jsx("span",{}),"Video ",j.length,"/2"]}),e.jsx("div",{className:"files-video",children:j.map(C=>e.jsxs("div",{children:[e.jsx("video",{width:80,height:80,src:URL.createObjectURL(C)}),e.jsx("span",{onClick:()=>{L(j.filter(S=>S!=C))}})]},C.name))})]})]}),e.jsxs("div",{className:"send-comment "+(w?"loading":""),children:[e.jsx("span",{className:"text "+(h.trim()?"":"no"),onClick:()=>{if(!m)return d(e.jsx(pe,{}),!0,"#fffc");P&&h&&(E(!0),i({note:P,photos:x,product_id:o.id,text:h,videos:j}).then(C=>{E(!1),C!=null&&C.id&&v(C)}))},children:"Send"})," ",e.jsx("span",{className:"loading"})]})]}):e.jsx("div",{children:"Comments are allowed after purchasing the product"})]}),e.jsx("div",{className:"my-comment",children:n&&e.jsx(K,{comment:n,canOpen:!0})}),e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"date active",onClick:()=>{H(!q)},children:[_.order_text,e.jsx("span",{className:_.order_by.includes("desc")?"desc":""}),e.jsxs("div",{className:q?"open":"",children:[e.jsxs("div",{onClick:()=>O({..._,order_by:"created_at_desc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>O({..._,order_by:"created_at_asc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:""})]}),e.jsxs("div",{onClick:()=>O({..._,order_by:"note_desc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>O({..._,order_by:"note_asc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:""})]})]})]}),e.jsx("div",{className:"photo "+(_.with_photo?"active":""),onClick:()=>O({..._,with_photo:!_.with_photo}),children:"With Photo"}),e.jsx("div",{className:"video "+(_.with_video?"active":""),onClick:()=>O({..._,with_video:!_.with_video}),children:"With Video"})]}),e.jsx("div",{className:"comments",children:a==null?void 0:a.list.map(C=>e.jsx(K,{comment:C,canOpen:!0,onClick:S=>{const G=S==null?void 0:S.comment;G&&(N().keepJson().setAbsPath(["products","detail","images"]),l({comment:G,relative:S.relative}))}},C.id))})]})}function Ce({product:o}){var P,A,F,W,B;const{current:s,navBack:t,pathList:n}=z(),{getCommentIndex:a,index:i}=Q(),[c,l]=u.useState(null),[d,m]=u.useState((i==null?void 0:i.relative)||0),[r,N]=u.useState(),[f]=u.useState({}),[b,x]=u.useState(!1),[g,j]=u.useState({move:"",comment_id:i==null?void 0:i.comment.id});u.useEffect(()=>{s("images")&&o&&a({product_id:o.id,comment_id:g.comment_id||(i==null?void 0:i.comment.id),move:g.move||void 0}).then(v=>{var w;if(console.log({res:v}),(w=v==null?void 0:v.comment)!=null&&w.id){if(g.move=="back")m(v.comment.photos_count+v.comment.videos_count-1);else if(g.move=="next")m(0);else{let E=((i==null?void 0:i.relative)??d)||0;const _=v.comment.photos_count+v.comment.videos_count;E=E<=0?0:E>=_-1?_-1:E,m(E)}g.move="",g.comment_id=void 0,N(v)}})},[g,i,n]),u.useEffect(()=>{s("images")&&(j({comment_id:void 0,move:""}),N(void 0),console.log({commentIndex:r}))},[o,n]),u.useEffect(()=>{f.init||(f.init=!0,window.addEventListener("keyup",v=>{v.code=="ArrowRight"?f.moveNext():v.code=="ArrowLeft"&&f.moveBack()}))},[]);const L=()=>{d<=0?(console.log("back comment "),r&&j({...g,comment_id:r.comment.id,move:"back"})):(console.log("back image "),m(d-1))},h=()=>{d>=y.length-1?(console.log("next comment "),r&&j({...g,comment_id:r.comment.id,move:"next"})):(console.log("next image "),m(d+1))};f.moveNext=h,f.moveBack=L;const y=[...((P=r==null?void 0:r.comment)==null?void 0:P.photos)||[],...((A=r==null?void 0:r.comment)==null?void 0:A.videos)||[]];return s("images")&&!(r!=null&&r.comment)?e.jsxs("div",{className:"image-not-found",children:[e.jsx("p",{className:"text",children:"no images or videos found for this product."}),e.jsxs("div",{onClick:()=>t(),children:[e.jsx("span",{}),"go back"]})]}):s("images")&&(r==null?void 0:r.comment)&&e.jsxs("section",{className:"page-comment-image "+(s("images")?"open":"close"),children:[e.jsxs("div",{className:"page-top",children:[e.jsx("div",{className:"return",style:{filter:J("#fff").result.filter},onClick:()=>t()}),e.jsxs("div",{className:"count",children:[((r==null?void 0:r.befor)||0)+d," / ",(r==null?void 0:r.total)||0]})]}),e.jsxs("div",{className:"file-view _flex _center",children:[d>(((F=r==null?void 0:r.comment)==null?void 0:F.photos_count)||0)-1?e.jsx("div",{className:"video _flex",ref:v=>{if(!v||v.dataset.init)return;v.dataset.init="init",l(v);const w=()=>{const E=v.querySelector("video"),_=v.getBoundingClientRect();E.width=_.width};window.addEventListener("resize",w)},children:e.jsx("video",{loop:!0,autoPlay:!0,controls:!0,width:c==null?void 0:c.getBoundingClientRect().width,src:`${R}${y[d]}`})}):e.jsx("div",{className:"photo",children:e.jsx("div",{className:"img",style:{background:D(y[d],"100%")}})}),e.jsx("div",{className:"move-next",onClick:h,children:e.jsx("div",{className:"next",children:e.jsx("span",{})})}),e.jsx("div",{className:"move-back",onClick:L,children:e.jsx("div",{className:"back",children:e.jsx("span",{})})})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"top _flex _wrap",children:[e.jsx("div",{className:"name",children:I(((W=r==null?void 0:r.comment.user)==null?void 0:W.name)||"",50)}),e.jsxs("div",{className:"_flex  _l-auto",children:[e.jsx(ie,{note:((B=r==null?void 0:r.comment)==null?void 0:B.note)||0}),e.jsx("div",{className:"open",onClick:()=>x(!0),children:"Open"})]})]}),e.jsx("div",{className:"message",children:I((r==null?void 0:r.comment.text)||"",100)}),e.jsxs("div",{className:"preview-comment "+(b?"open":"close"),children:[e.jsx("div",{className:"close",onClick:()=>{x(!1)}}),e.jsx(K,{canOpen:!0,comment:r.comment})]})]})]})}const de={more:!0,list:["/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1mieub_19ahe0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg"]};let M;function Se(){var oe,ae,ce,re;const{json:o,qs:s,check:t,current:n}=z(),{setProductById:a,product:i,fetchProducts:c,fetchVisites:l,visites:d,selectProduct:m}=he(),{fetchProductComments:r,setLastPage:N}=Q(),{user:f}=$(),{openChild:b}=te(),x=u.useRef(null),g=u.useRef(null),j=u.useRef(null),[L,h]=u.useState(),[y,P]=u.useState(!0),[A,F]=u.useState(0),[W,B]=u.useState(!1),[v,w]=u.useState(),[E,_]=u.useState(!1),[O]=u.useState(),[q]=u.useState({payment_id:"lol"}),[H,C]=u.useState(null),[S,G]=u.useState(),[ne]=u.useState({});return u.useEffect(()=>{t("detail")&&(o!=null&&o.product_id)&&o.product_id!=ne.product_id&&(ne.product_id=o.product_id,a(o))},[o]),u.useEffect(()=>{i&&t("detail")&&(c({no_save:!0,category_id:i.category_id}).then(p=>{p!=null&&p.list&&h(p)}),r({product_id:i.id,no_save:!0}).then(p=>G(p)),j.current&&(j.current.scrollTop=0),B(!1),F(0),M==null||M(0),s().keepJson().setAbsPath(["products","detail"]))},[i]),u.useEffect(()=>{!d&&f&&l({limit:10})},[f,i]),console.log(i),u.useEffect(()=>{if(H){if(H.dataset.init)return;H.dataset.init="init",H.addEventListener("scroll",()=>{H.scrollTop>200?_(!0):_(!1)})}},[H]),i&&e.jsxs("div",{className:"detail-product "+(i?"open":""),children:[i&&e.jsx(ye,{userComment:O,userCommand:q,setRef:C,product:i}),i&&e.jsx(Ce,{product:i}),e.jsxs("section",{className:"detail "+(n("products")||n("detail")?"open":"close"),ref:j,children:[e.jsxs("div",{className:"top-top _flex",children:[e.jsx("div",{className:"return",ref:p=>{if(!p||p.dataset.init)return;p.dataset.init="init";const k=()=>{window.innerWidth>940?p.style.display=" none":p.style.display="flex"};window.addEventListener("resize",k),k()},onClick:()=>{m(void 0)}}),e.jsx("div",{className:"label _lr-auto",children:"Detail Product"})]}),e.jsxs("div",{className:"top-infos",ref:p=>{if(!p||p.dataset.init)return;p.dataset.init="init";const k=p.querySelector(".images"),T=p.querySelector(".infos"),U=()=>{p.getBoundingClientRect().width<700?(p.style.flexWrap="wrap",k.style.width="",k.style.minWidth="",k.style.maxWidth="",T.style.width="",T.style.minWidth="",T.style.maxWidth=""):(p.style.flexWrap="",k.style.width="50%",k.style.minWidth="50%",k.style.maxWidth="50%",T.style.width="50%",T.style.minWidth="50%",T.style.maxWidth="50%")};window.addEventListener("resize",U),setTimeout(()=>{U(),M==null||M(0)},200)},children:[e.jsxs("div",{className:"images",children:[e.jsxs("div",{className:"list",ref:me(p=>{M=p},F),children:[e.jsx("div",{className:"gap"}),i==null?void 0:i.images.map((p,k)=>e.jsx("div",{className:"img card-h-c "+(A==k?"active":""),style:{background:D(p)},onClick:()=>{M==null||M(k),F(k)}},p+(i==null?void 0:i.id))),e.jsx("div",{className:"gap"})]}),e.jsx("div",{className:"min-list",children:i==null?void 0:i.images.map((p,k)=>e.jsx("div",{className:"min-img "+(A==k?"active":""),style:{background:D(p)},onClick:()=>{F(k),M==null||M(k)}},p+(i==null?void 0:i.id)))})]}),e.jsx("div",{className:"infos",ref:x,children:e.jsxs("div",{className:"diff",ref:g,children:[e.jsxs("div",{className:"text "+(v&&y?"min":""),children:[e.jsxs("div",{className:"title",children:[i==null?void 0:i.title,e.jsx("span",{})]}),e.jsx("p",{className:"description",children:((i==null?void 0:i.description.length)||0)>100&&!W?e.jsxs(e.Fragment,{children:[I((i==null?void 0:i.description)||"",100)," ",e.jsx("span",{onClick:()=>B(!0),children:"Read more"})]}):(i==null?void 0:i.description)||""})]}),(i==null?void 0:i.features)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"label-features",children:["Features",e.jsxs("span",{children:[" ",(v==null?void 0:v.name)&&" : "+(v==null?void 0:v.name)]})," ",v&&e.jsx("span",{className:"close",style:{filter:((oe=J("#112233"))==null?void 0:oe.result.filter)||""},onClick:()=>{w(void 0)}})]}),e.jsx("div",{className:"features",children:i==null?void 0:i.features.list.map(p=>{var k;return e.jsxs("div",{className:"feature "+((v==null?void 0:v.id)==p.id?"active":""),style:{filter:((k=J("#358f27"))==null?void 0:k.result.filter)||""},onClick:()=>{var T,U;if(!v){const V=((T=x.current)==null?void 0:T.getBoundingClientRect().height)||0,X=((U=g.current)==null?void 0:U.getBoundingClientRect().height)||0;V-X<150?P(!0):P(!1)}(v==null?void 0:v.id)==p.id?w(void 0):w(p)},children:[e.jsx("div",{className:"icon",style:{background:D(p.icon)}}),e.jsx("div",{className:"label",children:I(p.name,10)})]},p.id)})})]}),v&&e.jsxs("div",{className:"label-components",children:["Components: ",e.jsx("span",{children:(ce=(ae=i==null?void 0:i.featuresCollector)==null?void 0:ae.allCollectedFeatures()[v.id])==null?void 0:ce.name})]}),e.jsx("div",{className:"components "+(v?"open":""),children:(re=v==null?void 0:v.components)==null?void 0:re.map(p=>{var k,T;return e.jsxs("div",{className:"component "+(((T=(k=i==null?void 0:i.featuresCollector)==null?void 0:k.allCollectedFeatures()[v.id])==null?void 0:T.id)==p.id?"active":""),onClick:()=>{var U,V,X,le;((V=(U=i==null?void 0:i.featuresCollector)==null?void 0:U.allCollectedFeatures()[v.id])==null?void 0:V.id)==p.id?(X=i==null?void 0:i.featuresCollector)==null||X.collectFeature(v,void 0):(le=i==null?void 0:i.featuresCollector)==null||le.collectFeature(v,p)},children:[e.jsx("div",{className:"icon",style:{background:D(p.icon[0],"contain")}}),e.jsx("div",{className:"label",children:I(p.name,10)})]})})})]})})]}),e.jsxs("div",{className:"detail-box",children:[e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"title",children:["product reviews",e.jsx("span",{})]}),i&&e.jsx(ve,{onClick:()=>{N(""),s().keepJson().setAbsPath(["products","detail","images"])},product:i}),e.jsxs("div",{className:"title",children:["Comments",e.jsx("span",{})]}),e.jsxs("div",{className:"min-comments",ref:ee({posistion:20}),children:[S==null?void 0:S.list.map(p=>e.jsx(K,{comment:p,onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])}},p.id)),e.jsxs("div",{className:"more-comment "+(S!=null&&S.list.length||0>0?"":"horizontal"),onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])},children:[e.jsx("div",{className:"icon "+(S!=null&&S.list.length||0>0?"":"add"),children:e.jsx("span",{style:{filter:J("#ffffff").result.filter}})}),e.jsx("div",{className:"label",children:S!=null&&S.list.length||0>0?"More":"Add First Comment"})]})]})]}),e.jsxs("div",{className:"visites",children:[e.jsxs("div",{className:"title",children:["Products Visited",e.jsx("span",{})]}),e.jsxs("div",{className:"list",ref:ee({posistion:20}),children:[!f&&e.jsx("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>b(e.jsx(pe,{}),!0,"#fffc"),children:"Connexion required"}),d==null?void 0:d.list.map(p=>e.jsx(se,{product:p,active:(i==null?void 0:i.id)==p.id,onClick:()=>{m(p)}},p.id))]})]}),e.jsxs("div",{className:"more-products",children:[e.jsxs("div",{className:"title more",children:["More Products",e.jsx("span",{})]}),e.jsx("div",{className:"list",ref:ee({posistion:20}),children:L==null?void 0:L.list.map(p=>e.jsx(se,{product:p,active:(i==null?void 0:i.id)==p.id,onClick:()=>{m(p)}},p.id))})]})]}),e.jsx("footer",{})]}),n("detail")&&e.jsx("div",{className:"price-zone",children:e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"price",children:[e.jsx("div",{children:"Price"}),e.jsxs("div",{className:"value",children:[(i==null?void 0:i.price)||0," $"]})]}),e.jsx("div",{className:"add-to-cart",children:"Add to cart"})]})}),n("comments")&&(E||(q==null?void 0:q.payment_id)&&!O)&&e.jsxs("div",{className:"write-zone",children:[E&&e.jsx("div",{className:"up-icon",onClick:()=>{H&&(H.scrollTop=0)},children:e.jsx("span",{})}),e.jsx("div",{className:"write-icon",children:e.jsx("span",{})})]})]})}function ve({product:o,onClick:s}){const{qs:t}=z();return e.jsxs("div",{className:"group-file-rating",children:[e.jsx("div",{className:"after-order",children:e.jsxs("div",{className:"ctn-mini-files",onClick:s,children:[de.list.map((n,a)=>e.jsx("div",{className:"w",children:e.jsx("div",{className:"mini-file",style:{background:D(n)}})},a)),e.jsx("div",{className:"back",style:{background:D(de.list[0])},children:e.jsx("div",{className:"more-files",children:"+ More"})})]})}),(o==null?void 0:o.note)&&e.jsxs("div",{className:"rating",onClick:()=>t().keepJson().setAbsPath(["products","detail","comments"]),children:[e.jsx("div",{className:"note",children:o.note.star}),e.jsx(ie,{note:o.note.star}),e.jsxs("div",{className:"vote",children:[o.note.votes," ",e.jsx("span",{})]})]})]})}const be=Y(o=>({categories:void 0,async fetchCategoies(s){console.log({filter:s});const t=$.getState().store;if(!t)return;const n={...s};n.store_id=t.id;const a=new URLSearchParams({});for(const l in n){const d=n[l];a.set(l,d)}const c=await(await fetch(`${R}/get_categories/?${a.toString()}`)).json();if(c!=null&&c.list)return s!=null&&s.no_save||o(()=>({categories:c})),console.log(c),{...c}}})),ke=(o,s)=>{let t=!1;for(const n in s)o[n]!=s[n]&&(t=!0,o[n]=s[n]);return t};function $e(){const{json:o,qs:s,check:t}=z(),{products:n,fetchProducts:a,selectProduct:i,product:c}=he(),{store:l}=$(),[d,m]=u.useState(""),[r,N]=u.useState({order_by:"date_desc",category_id:"",price_min:void 0,price_max:void 0,text:"",product_id:""}),{fetchCategoies:f}=be(),[b,x]=u.useState(),[g]=u.useState({}),[j,L]=u.useState(!1);return u.useEffect(()=>{t("products")&&a({...r}).then(y=>{y!=null&&y.list[0]&&!c&&window.innerWidth>940&&(i(y==null?void 0:y.list[0]),s({...o,product_id:y.list[0].id}).setAbsPath(["products","detail"]))});const h=document.body.getBoundingClientRect();m(`bY:${h.y}/ wY${window.screenY} / ${window.screenTop}`)},[r,l]),u.useEffect(()=>{!b&&f({limit:25,no_save:!0}).then(h=>{console.log(h),h!=null&&h.list&&x(h)})},[l]),u.useEffect(()=>{t("products")&&ke(r,o||{})&&N({...r})},[o]),u.useEffect(()=>{window.addEventListener("resize",()=>{var h;window.innerWidth>940&&!g.product&&i((h=g.products)==null?void 0:h.list[0])})},[]),g.product=c,g.products=n,t("products")&&e.jsxs("div",{className:"page-products",ref:h=>{document.body.innerHTML=`
<pre>
window.screenLeft = ${window.screenLeft};
window.screenTop = ${window.screenTop};
window.screenX = ${window.screenX};
window.screenY = ${window.screenY};
window.screen.height = ${window.screen.height};
window.screen.width = ${window.screen.width};
window.screen.availHeight = ${window.screen.availHeight};
window.screen.availWidth = ${window.screen.availWidth};
window.innerHeight = ${window.innerHeight};
window.innerWidth = ${window.innerWidth};
</pre>
                `},children:[e.jsx("div",{className:"left "+(j?"open":"")+" "+(t("detail")&&c?"product-detail":""),onClick:()=>{L(!1)},children:e.jsxs("div",{className:"filter-fram",children:[e.jsx("div",{className:"top",children:"Filter"}),e.jsx("div",{className:"categories",children:b==null?void 0:b.list.map(h=>e.jsx("div",{className:"category",onClick:()=>N({...r,category_id:h.id}),children:h.label},h.id))}),e.jsxs("div",{className:"prices",children:[e.jsxs("div",{className:"ctn",children:[e.jsx("label",{htmlFor:"product-price-min",children:e.jsx("input",{type:"text",id:"product-price-min",placeholder:"Min",value:r.price_min})}),e.jsx("label",{htmlFor:"product-price-max",children:e.jsx("input",{type:"text",id:"product-price-max",placeholder:"Max",value:r.price_max})})]}),e.jsx("div",{className:"set-price",children:e.jsx("div",{className:"btn",children:"Set Price"})})]})]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"search-zone",children:[e.jsxs("label",{htmlFor:"product-search",className:"search",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{id:"product-search",type:"text",placeholder:"Search Product",value:r.text,onChange:h=>{const y=h.currentTarget.getBoundingClientRect();N({...r,text:JSON.stringify(y)})}}),e.jsx("div",{className:"clear",onClick:()=>{N({...r,text:""})}})]}),e.jsx("div",{className:"search-text",children:r.text&&e.jsxs(e.Fragment,{children:['Search result for "',e.jsx("span",{children:r.text}),'"']})}),e.jsxs("div",{className:"sort",children:[e.jsx("div",{className:"label",onClick:()=>{L(!0)},children:"Sort"}),e.jsx("div",{className:"list",children:["date","name","price","popular"].map(h=>{var y;return e.jsx("div",{className:((y=(o==null?void 0:o.order_by)||r.order_by)==null?void 0:y.split("_")[0])==h?"active":"",onClick:()=>{s({...o,order_by:h+"_desc"}).apply()},children:h},h)})})]})]}),e.jsx("div",{className:"list",children:n==null?void 0:n.list.map(h=>e.jsx(se,{product:h,active:(c==null?void 0:c.id)==h.id,onClick:()=>{i(h),s({...o,product_id:h.id}).setAbsPath(["products","detail"])}},h.id))})]}),e.jsxs("div",{className:"right "+(c?"product":"")+" "+(t("detail")?"detail":""),children:[d,e.jsx(Se,{})]})]})}function Pe(){const{authenticateUser:o}=$(),{openChild:s,currentChild:t,back_color:n,blur:a}=te(),i=u.useRef(null),{pathList:c}=z();return u.useEffect(()=>{s(void 0)},[c]),u.useEffect(()=>{o(),window.addEventListener("blur",()=>{s(void 0)})},[]),e.jsxs("div",{className:"app",style:{width:"100%",height:"100%"},ref:l=>{},children:[t&&e.jsx("div",{className:"child-viewer",onContextMenu:l=>{l.preventDefault(),s(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:n},onClick:()=>{s(void 0)},onContextMenu:l=>{l.preventDefault(),s(void 0)},children:t})}),e.jsx("div",{ref:i,className:"app-ctn",style:{filter:a?"blur(10px)":""},children:e.jsx($e,{})})]})}const Re=o=>o,Fe=Re(e.jsx(fe.StrictMode,{children:e.jsx(Pe,{})}));export{Fe as ClientView};

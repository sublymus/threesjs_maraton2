import{c as V,S as ue,j as e,g as A,l as J}from"./StringFormater-BuJIKqZa.js";import{H as P,r as p,R as pe}from"./index-Bb52XQt_.js";import{f as ve}from"./DataBase-u9YpBFfJ.js";const k=V(a=>({user:void 0,store:void 0,userStore:void 0,manager:void 0,openAuth:!1,async updateUser({name:s,photos:t,id:n}){const o=new FormData;if(s&&o.append("name",s),t!=null&&t[0])o.append("photos_0",t[0]);else return;o.append("id",n),o.append("photos",'["photos_0"]');const i=k.getState().getHeaders();if(!i)return;const m=await(await fetch(`${P}/edit_me`,{method:"PUT",body:o,headers:i.headers})).json();console.log({user:m}),m.id&&(a(()=>({user:{...m,photos:m.photos.map(l=>`${P}${l}`)}})),localStorage.setItem("user",JSON.stringify(m)))},async disconnection(){const s=k.getState().getHeaders();if(!s)return;const t={method:"GET",headers:s.headers};await fetch(`${P}/disconnection`,t),localStorage.removeItem("user"),localStorage.removeItem("store_name"),a(()=>({user:void 0,store:void 0,userStore:void 0,openAuth:!0}))},async getAccess(){window.open(`${P}/google_connexion`,void 0,"popup");const s=setInterval(()=>{const t=localStorage.getItem("user"),n=t&&JSON.parse(t);n&&(console.log("getAccess",{token:n.token}),a(()=>({user:n})),clearInterval(s),k.getState().authenticateUser())},100)},async authenticateUser(){let s=localStorage.getItem("user");const t=localStorage.getItem("store_name")||window.location.pathname.split("/")[2];if(s){const n=JSON.parse(s),o=new Headers;o.append("Authorization",`Bearer ${n.token}`);const i={method:"GET",headers:o},c=await fetch(`${P}/can_use_store/${t}`,i);let m;try{if(m=await c.json(),!m.user)return}catch{return}const l={...n,...m.user};a(()=>({user:l,manager:m.manager,userStore:m.userStore,store:m.store,openAuth:!1})),localStorage.setItem("user",JSON.stringify(l))}else await k.getState().getStore()},async getStore(){const s=localStorage.getItem("store_name")||window.location.pathname.split("/")[1];if(s){const t=await fetch(`${P}/get_store_by_name/${s}`);try{let n=await t.json();a(()=>({store:n}))}catch{}}},getHeaders(){const s=k.getState().store;if(!s)return;let t=k.getState().user;if(!t)return;const n=new Headers;return n.append("Authorization",`Bearer ${t.token}`),{store:s,headers:n,user:t}}})),xe={"/":{loading:{},products:{detail:{comments:{},images:{}}},categories:{},favorites:{},cart:{},payment:{},command:{},profile:{}}},fe=V(a=>({T:localStorage.getItem("theme"),storeVar:void 0,usersVar:void 0,back_color:"",blur:!1,openNav:"max",setOpenNav(s){a(()=>({openNav:s}))},setT(s){s&&localStorage.setItem("theme",s),a(()=>({T:s}))},currentChild:void 0,openChild(s,t,n){a(()=>({currentChild:s,blur:t,back_color:s&&n||""}))}})),I=new ue(xe,["/","products"]).getStore(),je=(a,s)=>{const t=setInterval(()=>{let n=!1,o=a,i=0;for(;!n;){if(o==document.body){clearInterval(t),s(),n=!0;return}else o==null||i>100?n=!0:o=o.parentElement;i++}},100)},le=(a,s)=>t=>{if(!t)return;if(t.dataset.init)return a==null?void 0:a(t.setIndex);t.dataset.init="init:"+Math.trunc(Math.random()*1e3)/1e3;const n=()=>{let o=0;const i=l=>{const h=t.querySelectorAll(".card-h-c");if(o=l,h.length<=0)return;o=o>=h.length?h.length-1:o<0?0:o;const r=t.getBoundingClientRect(),j=r.width,C=h[o].getBoundingClientRect(),d=C.x-r.x+C.width/2;t.scrollTo({behavior:"smooth",left:t.scrollLeft-(j/2-d)})};t.setIndex=i;const c=()=>{const l=t.getBoundingClientRect().width;i(o);const h=t.querySelectorAll(".gap");for(const r of h)r.style.width=`${l/2}px`,r.style.minWidth=`${l/2}px`,r.style.maxWidth=`${l/2}px`};window.addEventListener("resize",c),c();const m=.1;t.addEventListener("scrollend",()=>{const l=t.getBoundingClientRect(),h=l.width,r=h*m,x=t.querySelectorAll(".card-h-c")[o].getBoundingClientRect(),C=x.x-l.x+x.width/2;let d=o;C<h/2-r?(d=o+1,i(d)):C>h/2+r?(d=o-1,i(d)):i(o),s==null||s(d)}),a==null||a(i)};je(t,()=>{n()})};function ee({product:a,active:s,onClick:t}){var i,c,m,l;const[n,o]=p.useState(0);return e.jsxs("div",{className:"product-card "+(s?"active":""),onClick:t,children:[e.jsxs("div",{className:"images",ref:le(void 0,o),children:[e.jsx("div",{className:"gap"}),a.images.map(h=>e.jsx("div",{className:"image card-h-c ",style:{background:A(h)}},h)),e.jsx("div",{className:"gap"})]}),e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"counters",children:a.images.map((h,r)=>e.jsx("div",{className:"counter "+(n==r?"active":"")},h))}),e.jsxs("h3",{className:"name limit-text",children:[e.jsx("span",{className:"product-title",children:a.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:a.description})]}),e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"star "+((i=a.note)!=null&&i.star?"":"vide")}),e.jsx("div",{className:"note",children:(c=a.note)==null?void 0:c.star}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"vote",children:(m=a.note)==null?void 0:m.votes}),e.jsx("div",{className:"users"}),!((l=a.note)!=null&&l.star)&&e.jsx("div",{className:"new",children:"New"})]}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"value",children:"12450.93 $"})}),e.jsx("div",{className:"add-btn",children:e.jsxs("div",{className:"btn",children:["Add ",e.jsx("span",{children:" to cart"})]})})]})]})}const re=V((a,s)=>({visites:void 0,product:void 0,products:{limit:25,list:[],page:1,total:0},async setClientVisite(t){const n=k.getState().getHeaders();if(!n)return;const o=new FormData;o.append("product_id",t),await fetch(`${P}/set_client_visited`,{headers:n.headers,body:o,method:"PUT"})},async fetchVisites({after_date:t,before_date:n,client_id:o,product_id:i,limit:c,page:m}){const l=k.getState().getHeaders();if(!l)return;const h={};h.store_id=l.store.id,h.product_id=i||"",h.client_id=o||"",h.limit=c||25,h.page=m||1,h.after_date=t||"",h.before_date=n||"";const r=new URLSearchParams({});for(const C in h){const d=h[C];d!=null&&r.set(C,d)}const x=await(await fetch(`${P}/get_client_visited/?${r.toString()}`,{headers:l.headers})).json();!x||!x.list||a(()=>({visites:x}))},featuresCollector:void 0,async setProductById(t){if(!t.product_id)return;const n=s().products,o=n==null?void 0:n.list.find(i=>i.id==t.product_id);if(o)s().selectProduct(o),a(()=>({featuresCollector:o==null?void 0:o.featuresCollector})),console.log(t);else{const i=k.getState().store;if(!i)return;const c={};c.product_id=t.product_id,c.is_features_required=!0,c.store_id=i.id,c.by_product_category=!(n!=null&&n.list[0]);const m=new URLSearchParams({});for(const j in c){const x=c[j];x!=null&&m.set(j,x)}const h=await(await fetch(`${P}/get_products/?${m.toString()}`)).json();if(!h.list)return;const r=h.list.find(j=>j.id==t.product_id)||h.list[0];a(()=>({products:n?{...n,list:[...h.list.filter(j=>!n.list.find(x=>x.id==j.id)),...n.list]}:h,product:r,featuresCollector:r==null?void 0:r.featuresCollector})),s().selectProduct(r)}},fetchProducts:async t=>{const n=k.getState().store;if(!n)return;const o={...t};o.is_features_required=!0,o.store_id=n.id;const i=new URLSearchParams({});for(const l in o){const h=o[l];h!=null&&i.set(l,h)}const m=await(await fetch(`${P}/get_products/?${i.toString()}`)).json();if(m!=null&&m.list)return t!=null&&t.no_save||a(()=>({products:m})),{...m}},async selectProduct(t){if(!t)return a(()=>({product:void 0}));t.features=ve;const n={};t.features.list.forEach(o=>{var i;o.default_value?n[o.id]=o.default_value:(console.log("nnnnnnnnnn"),n[o.id]=(i=o.components)==null?void 0:i.find(c=>!!c.is_default),o.default_value=n[o.id])}),t.featuresCollector={collectFeature(o,i){i!=null?n[o.id]=i:o.default_value&&(n[o.id]=o.default_value),a(()=>({featuresCollector:t.featuresCollector&&{...t.featuresCollector}}))},getCollectedFeatures(o){return n[o]},allCollectedFeatures(){return n}},a(()=>({product:t})),s().setClientVisite(t.id)}}));class de{constructor(s,t,n){this.set(s,t,n)}toString(){return`rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`}set(s,t,n){this.r=this.clamp(s),this.g=this.clamp(t),this.b=this.clamp(n)}hueRotate(s=0){s=s/180*Math.PI;const t=Math.sin(s),n=Math.cos(s);this.multiply([.213+n*.787-t*.213,.715-n*.715-t*.715,.072-n*.072+t*.928,.213-n*.213+t*.143,.715+n*.285+t*.14,.072-n*.072-t*.283,.213-n*.213-t*.787,.715-n*.715+t*.715,.072+n*.928+t*.072])}grayscale(s=1){this.multiply([.2126+.7874*(1-s),.7152-.7152*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152+.2848*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152-.7152*(1-s),.0722+.9278*(1-s)])}sepia(s=1){this.multiply([.393+.607*(1-s),.769-.769*(1-s),.189-.189*(1-s),.349-.349*(1-s),.686+.314*(1-s),.168-.168*(1-s),.272-.272*(1-s),.534-.534*(1-s),.131+.869*(1-s)])}saturate(s=1){this.multiply([.213+.787*s,.715-.715*s,.072-.072*s,.213-.213*s,.715+.285*s,.072-.072*s,.213-.213*s,.715-.715*s,.072+.928*s])}multiply(s){const t=this.clamp(this.r*s[0]+this.g*s[1]+this.b*s[2]),n=this.clamp(this.r*s[3]+this.g*s[4]+this.b*s[5]),o=this.clamp(this.r*s[6]+this.g*s[7]+this.b*s[8]);this.r=t,this.g=n,this.b=o}brightness(s=1){this.linear(s)}contrast(s=1){this.linear(s,-(.5*s)+.5)}linear(s=1,t=0){this.r=this.clamp(this.r*s+t*255),this.g=this.clamp(this.g*s+t*255),this.b=this.clamp(this.b*s+t*255)}invert(s=1){this.r=this.clamp((s+this.r/255*(1-2*s))*255),this.g=this.clamp((s+this.g/255*(1-2*s))*255),this.b=this.clamp((s+this.b/255*(1-2*s))*255)}hsl(){const s=this.r/255,t=this.g/255,n=this.b/255,o=Math.max(s,t,n),i=Math.min(s,t,n);let c,m,l=(o+i)/2;if(o===i)c=m=0;else{const h=o-i;switch(m=l>.5?h/(2-o-i):h/(o+i),o){case s:c=(t-n)/h+(t<n?6:0);break;case t:c=(n-s)/h+2;break;case n:c=(s-t)/h+4;break}c/=6}return{h:c*100,s:m*100,l:l*100}}clamp(s){return s>255?s=255:s<0&&(s=0),s}}class ge{constructor(s,t){this.target=s,this.targetHSL=s.hsl(),this.reusedColor=new de(0,0,0)}solve(){const s=this.solveNarrow(this.solveWide());return{values:s.values,loss:s.loss,filter:this.css(s.values)}}solveWide(){const n=[60,180,18e3,600,1.2,1.2];let o={loss:1/0};for(let i=0;o.loss>25&&i<3;i++){const c=[50,20,3750,50,100,100],m=this.spsa(5,n,15,c,1e3);m.loss<o.loss&&(o=m)}return o}solveNarrow(s){const t=s.loss,n=2,o=t+1,i=[.25*o,.25*o,o,.25*o,.2*o,.2*o];return this.spsa(t,i,n,s.values,500)}spsa(s,t,n,o,i){const m=.16666666666666666;let l=null,h=1/0;const r=new Array(6),j=new Array(6),x=new Array(6);for(let d=0;d<i;d++){const g=n/Math.pow(d+1,m);for(let N=0;N<6;N++)r[N]=Math.random()>.5?1:-1,j[N]=o[N]+g*r[N],x[N]=o[N]-g*r[N];const w=this.loss(j)-this.loss(x);for(let N=0;N<6;N++){const F=w/(2*g)*r[N],T=t[N]/Math.pow(s+d+1,1);o[N]=C(o[N]-T*F,N)}const L=this.loss(o);L<h&&(l=o.slice(0),h=L)}return{values:l,loss:h};function C(d,g){let w=100;return g===2?w=7500:(g===4||g===5)&&(w=200),g===3?d>w?d%=w:d<0&&(d=w+d%w):d<0?d=0:d>w&&(d=w),d}}loss(s){const t=this.reusedColor;t.set(0,0,0),t.invert(s[0]/100),t.sepia(s[1]/100),t.saturate(s[2]/100),t.hueRotate(s[3]*3.6),t.brightness(s[4]/100),t.contrast(s[5]/100);const n=t.hsl();return Math.abs(t.r-this.target.r)+Math.abs(t.g-this.target.g)+Math.abs(t.b-this.target.b)+Math.abs(n.h-this.targetHSL.h)+Math.abs(n.s-this.targetHSL.s)+Math.abs(n.l-this.targetHSL.l)}css(s){function t(n,o=1){return Math.round(s[n]*o)}return`invert(${t(0)}%) sepia(${t(1)}%) saturate(${t(2)}%) hue-rotate(${t(3,3.6)}deg) brightness(${t(4)}%) contrast(${t(5)}%)`}}function Ne(a){const s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(s,(n,o,i,c)=>o+o+i+i+c+c);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}const X={},q=a=>{if(X[a])return X[a];const s=Ne(a);if(s.length!==3){alert("Invalid format!");return}const t=new de(s[0],s[1],s[2]),o=new ge(t).solve(),i={color:t,result:o};return X[a]=i,i};function se({note:a}){return e.jsxs("div",{className:"note-stars",children:[e.jsx("div",{className:"icon first "+(a>=1?"full":a<=0?"vide":"half")}),e.jsx("div",{className:"icon "+(a>=2?"full":a<=1?"vide":"half")}),e.jsx("div",{className:"icon "+(a>=3?"full":a<=2?"vide":"half")}),e.jsx("div",{className:"icon "+(a>=4?"full":a<=3?"vide":"half")}),e.jsx("div",{className:"icon "+(a>=5?"full":a<=4?"vide":"half")})]})}const Q=V(a=>({comments:void 0,index:void 0,lastPage:void 0,setLastPage(s){a(()=>({lastPage:s}))},setIndex(s){a(()=>({index:s}))},userComment:void 0,async getCommentIndex(s){const t=new URLSearchParams({});for(const i in s){const c=s[i];c!=null&&t.set(i,c)}return await(await fetch(`${P}/get_comment_index/?${t}`)).json()},async sendCommentResponse(s){const t=k.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_comment_id",s.comment_id.toString()),n.append("response",s.response);const i=await(await fetch(`${P}/set_product_comment_response`,{method:"PUT",body:n,headers:t.headers})).json();if(i!=null&&i.id)return a(({comments:c})=>({comments:c&&{...c,list:c.list.map(m=>m.id==s.comment_id?i:m)}})),i},async fetcheditCommentText(s){const t=k.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_comment_id",s.comment_id.toString()),n.append("text",s.text);const i=await(await fetch(`${P}/edit_product_comment_text`,{method:"PUT",body:n,headers:t.headers})).json();if(i!=null&&i.id)return a(({comments:c})=>({comments:c&&{...c,list:c.list.map(m=>m.id==s.comment_id?i:m)}})),i},async deleteComment(s,t){const n=k.getState().getHeaders();if(!n)return;const i=await(await fetch(`${P}/delete_product_comment/${s.id}`,{method:"DELETE",headers:n.headers})).json();if(i!=null&&i.deleted)return t&&setTimeout(()=>{a(({comments:c})=>({comments:c&&{...c,list:c.list.filter(m=>m.id!=s.id)}}))},t),i},async fetchProductComments(s){if(!k.getState().store)return;const n=new URLSearchParams({});for(const c in s){const m=s[c];n.set(c,m)}const i=await(await fetch(`${P}/get_product_comments/?${n.toString()}`)).json();return s!=null&&s.no_save||a(()=>({comments:i})),i},async fetchUserComment(){},async create_product_comment(s){const t=k.getState().getHeaders();if(!t)return;const n=new FormData;n.append("product_id",s.product_id),n.append("note",s.note+""),n.append("text",s.text);for(let c=0;c<s.photos.length;c++)n.append("photos_"+c,s.photos[c]);for(let c=0;c<s.videos.length;c++)n.append("videos_"+c,s.videos[c]);console.log(s);const i=await(await fetch(`${P}/create_product_comment`,{method:"POST",body:n,headers:t.headers})).json();if(i!=null&&i.id)return i}}));function K({comment:a,canOpen:s,onClick:t}){var D,_;const[n,o]=p.useState(!1),[i,c]=p.useState(!1),{userStore:m,manager:l}=k(),{deleteComment:h,sendCommentResponse:r,fetcheditCommentText:j}=Q(),x=(l==null?void 0:l.type.toLocaleLowerCase())=="collaborator"||(l==null?void 0:l.type.toLocaleLowerCase())=="owner",[C,d]=p.useState(!1),[g,w]=p.useState(!1),[L,N]=p.useState(a.text||""),[F,T]=p.useState(a.response||""),f=(m==null?void 0:m.user_id)==a.user_id,[$,H]=p.useState(null);return e.jsxs("div",{ref:H,className:"product-comment",onClick:()=>{t==null||t(),c(!1)},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"photo",style:{background:a.user?A(a.user.photos[0]):""},children:e.jsx("span",{style:{background:(D=a.user)!=null&&D.country_icon?A(a.user.country_icon):""}})}),e.jsxs("div",{className:"coment-right",children:[e.jsxs("div",{className:"flex",style:{flexWrap:"nowrap"},children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"name",children:(_=a.user)==null?void 0:_.name}),e.jsx(se,{note:a.note})]}),(f||x)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"option",onClick:v=>{v.preventDefault(),v.stopPropagation(),c(!i)}}),e.jsxs("div",{className:"ctn-option "+(i?"open":""),onClick:()=>{c(!1)},children:[e.jsx("div",{className:"close",onClick:()=>{c(!1)}}),f&&e.jsx("div",{className:"edit-comment",onClick:()=>{d(!0),w(!1)},children:"Edit Comment"}),x&&e.jsx("div",{className:"edit-response",onClick:()=>{w(!0),d(!1)},children:a.response?"Edit Response":"Add Response"}),e.jsx("div",{className:"delete",onClick:()=>{h(a,300).then(v=>{v!=null&&v.deleted&&($==null||$.classList.add("deleted"),setTimeout(()=>{$&&($.style.display="none")},300))})},children:"Delete"})]})]})]}),e.jsx("div",{className:"date",children:new Date(a.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),e.jsx("div",{className:"message",children:C?e.jsxs("label",{htmlFor:"edit-comment-"+a.id,children:[e.jsx("input",{id:"edit-comment-"+a.id,type:"text",value:L,placeholder:"Edit Comment",onChange:v=>{N(v.currentTarget.value)}}),e.jsx("span",{onClick:()=>{w(!1),d(!1),j({comment_id:a.id,text:L})}})]}):a.text})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),s&&(a.photos_count>0||a.videos_count>0)&&e.jsxs("div",{className:"files-ctn",children:[a.photos.map((v,b)=>e.jsx("div",{style:{background:A(v)+",#4544"},onClick:R=>{R.preventDefault(),R.stopPropagation(),t==null||t({comment:a,relative:b})}},v)),a.videos.map((v,b)=>e.jsx("div",{onClick:R=>{R.preventDefault(),R.stopPropagation(),t==null||t({comment:a,relative:a.photos.length+b})},children:e.jsx("video",{width:60,height:60,src:`${P}${v}`})},v))]})]}),(s&&a.response||g)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"open-response "+(n||g?"open":""),onClick:()=>{o(!n),w(!1),d(!1)},children:[a.response?"Open response":"Add Response",e.jsx("span",{})]}),e.jsx("div",{className:"response "+(n||g?"open":""),children:g?e.jsxs("label",{htmlFor:"edit-response-"+a.id,children:[e.jsx("input",{id:"edit-response-"+a.id,type:"text",value:F,placeholder:"Edit Response",onChange:v=>{T(v.currentTarget.value)}}),e.jsx("span",{onClick:()=>{w(!1),o(!0),r({comment_id:a.id,response:F})}})]}):a.response})]})]})}function Z({posistion:a,size:s,top:t,step:n}){return o=>{if(!o||o.dataset.init)return;o.dataset.init="init",o.style.scrollBehavior="smooth";const i=o.parentElement,c=document.createElement("div");c.style.width=o.style.width,c.style.position="relative",c.append(o),i.append(c);const m=document.createElement("div"),l=document.createElement("div"),h=document.createElement("div"),r=document.createElement("div");l.className="h-scroll-icon-ctn right",m.className="h-scroll-icon-ctn",s&&(l.style.width=`${s}px`,l.style.height=`${s}px`,m.style.width=`${s}px`,m.style.height=`${s}px`),a&&(l.style.right=`${-a}px`,m.style.left=`${-a}px`),t&&(l.style.top=`${t}px`,m.style.top=`${t}px`),r.className="h-scroll-icon right",h.className="h-scroll-icon",l.append(r),m.append(h),r.style.filter=q("#123").result.filter,h.style.filter=q("#123").result.filter,c.append(l,m);const j=()=>{o.scrollLeft<=0?m.style.display="none":m.style.display="block",o.scrollLeft>=o.scrollWidth-o.getBoundingClientRect().width?l.style.display="none":l.style.display="block"};m.addEventListener("click",()=>{n?o.scrollLeft-=n:o.scrollLeft-=o.getBoundingClientRect().width/2}),l.addEventListener("click",()=>{n?o.scrollLeft+=n:o.scrollLeft+=o.getBoundingClientRect().width/2}),o.addEventListener("scroll",j),setTimeout(()=>{j()},500)}}function _e({product:a,setRef:s,userCommand:t}){const{userComment:n,comments:o,create_product_comment:i,fetchProductComments:c,setIndex:m}=Q(),[l,h]=p.useState([]),[r,j]=p.useState([]),[x,C]=p.useState(""),[d,g]=p.useState(0),{navBack:w,qs:L,current:N,json:F}=I(),[T,f]=p.useState(!1),[$,H]=p.useState(),[D,_]=p.useState(!1),[v,b]=p.useState({order_by:"created_at_desc",order_text:"Date",with_photo:!1,with_video:!1,limit:20,page:1}),[R,G]=p.useState(!1);return p.useEffect(()=>{c({product_id:a.id,...v})},[$,a,v,F]),N("comments")&&e.jsxs("section",{className:"page-comments "+(N("comments")?"open":"close"),ref:s,children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"return",onClick:()=>{w()}}),e.jsx("h1",{children:"Comments"}),e.jsx("div",{className:"option"})]}),e.jsx(me,{product:a,onClick:()=>L().keepJson().setAbsPath(["products","detail","images"])}),e.jsxs("div",{className:"write-comment",children:[e.jsxs("div",{className:"top-prompt",children:[" Leave a comment ",e.jsx("span",{})]}),$?e.jsx("div",{children:"Thank you for the comment."}):n?e.jsxs("div",{children:["You have already commented on this product ",e.jsx("span",{onClick:()=>f(!0),children:" see my comment"})]}):t!=null&&t.payment_id?e.jsxs("div",{className:"zone-inputs",children:[e.jsxs("div",{className:"user-rating",children:[e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"icon "+(d>=1?"star":""),onClick:()=>g(1)}),e.jsx("div",{className:"icon "+(d>=2?"star":""),onClick:()=>g(2)}),e.jsx("div",{className:"icon "+(d>=3?"star":""),onClick:()=>g(3)}),e.jsx("div",{className:"icon "+(d>=4?"star":""),onClick:()=>g(4)}),e.jsx("div",{className:"icon "+(d==5?"star":""),onClick:()=>g(5)})]}),e.jsx("div",{className:"value",children:d})]}),!!d&&e.jsxs("label",{htmlFor:"comment-input-text",className:"input-text",children:[e.jsx("input",{id:"comment-input-text",autoFocus:!0,type:"text",value:x,placeholder:"Write Comment",onChange:y=>{C(y.target.value.substring(0,200))}}),e.jsxs("div",{className:"div",children:[x.length,"/200"]})]}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-photo",id:"comment-photo",accept:"image/*",onChange:y=>{if(y.target.files){for(const E of y.target.files)l.unshift(E);h([...l].slice(0,5))}}}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-video",id:"comment-video",accept:"video/*",onChange:y=>{if(y.target.files){for(const E of y.target.files)r.unshift(E);j([...r].slice(0,2))}}}),e.jsxs("div",{className:"files-ctn",style:{display:d&&x?"flex":"none"},children:[e.jsxs("div",{className:"photo-ctn",children:[e.jsxs("label",{htmlFor:"comment-photo",className:"photo",children:[e.jsx("span",{}),"Photo ",l.length,"/5"]}),e.jsx("div",{className:"files-photo",children:l.map(y=>e.jsx("div",{style:{background:A(URL.createObjectURL(y))},children:e.jsx("span",{onClick:()=>{h(l.filter(E=>E!=y))}})},y.name))})]}),e.jsxs("div",{className:"video-ctn",children:[e.jsxs("label",{htmlFor:"comment-video",className:"photo",children:[e.jsx("span",{}),"Video ",r.length,"/2"]}),e.jsx("div",{className:"files-video",children:r.map(y=>e.jsxs("div",{children:[e.jsx("video",{width:80,height:80,src:URL.createObjectURL(y)}),e.jsx("span",{onClick:()=>{j(r.filter(E=>E!=y))}})]},y.name))})]})]}),e.jsxs("div",{className:"send-comment "+(D?"loading":""),children:[e.jsx("span",{className:"text "+(x.trim()?"":"no"),onClick:()=>{d&&x&&(_(!0),i({note:d,photos:l,product_id:a.id,text:x,videos:r}).then(y=>{setTimeout(()=>{_(!1),console.log("===>>",y),y!=null&&y.id&&H(y)},2e3)}))},children:"Send"})," ",e.jsx("span",{className:"loading"})]})]}):e.jsx("div",{children:"Comments are allowed after purchasing the product"})]}),e.jsx("div",{className:"my-comment",children:n&&e.jsx(K,{comment:n,canOpen:!0})}),e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"date active",onClick:()=>{G(!R)},children:[v.order_text,e.jsx("span",{className:v.order_by.includes("desc")?"desc":""}),e.jsxs("div",{className:R?"open":"",children:[e.jsxs("div",{onClick:()=>b({...v,order_by:"created_at_desc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>b({...v,order_by:"created_at_asc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:""})]}),e.jsxs("div",{onClick:()=>b({...v,order_by:"note_desc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>b({...v,order_by:"note_asc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:""})]})]})]}),e.jsx("div",{className:"photo "+(v.with_photo?"active":""),onClick:()=>b({...v,with_photo:!v.with_photo}),children:"With Photo"}),e.jsx("div",{className:"video "+(v.with_video?"active":""),onClick:()=>b({...v,with_video:!v.with_video}),children:"With Video"})]}),e.jsx("div",{className:"comments",children:o==null?void 0:o.list.map(y=>e.jsx(K,{comment:y,canOpen:!0,onClick:E=>{const W=E==null?void 0:E.comment;W&&(L().keepJson().setAbsPath(["products","detail","images"]),m({comment:W,relative:E.relative}))}},y.id))})]})}function ye({product:a}){var T,f,$,H,D;const{current:s,navBack:t,pathList:n}=I(),{getCommentIndex:o,index:i}=Q(),[c,m]=p.useState(null),[l,h]=p.useState((i==null?void 0:i.relative)||0),[r,j]=p.useState(),[x]=p.useState({}),[C,d]=p.useState(!1),[g,w]=p.useState({move:"",comment_id:i==null?void 0:i.comment.id});p.useEffect(()=>{s("images")&&a&&o({product_id:a.id,comment_id:g.comment_id||(i==null?void 0:i.comment.id),move:g.move||void 0}).then(_=>{var v;if(console.log({res:_}),(v=_==null?void 0:_.comment)!=null&&v.id){if(g.move=="back")h(_.comment.photos_count+_.comment.videos_count-1);else if(g.move=="next")h(0);else{let b=((i==null?void 0:i.relative)??l)||0;const R=_.comment.photos_count+_.comment.videos_count;b=b<=0?0:b>=R-1?R-1:b,h(b)}g.move="",g.comment_id=void 0,j(_)}})},[g,i,n]),p.useEffect(()=>{s("images")&&(w({comment_id:void 0,move:""}),j(void 0),console.log({commentIndex:r}))},[a,n]),p.useEffect(()=>{x.init||(x.init=!0,window.addEventListener("keyup",_=>{_.code=="ArrowRight"?x.moveNext():_.code=="ArrowLeft"&&x.moveBack()}))},[]);const L=()=>{l<=0?(console.log("back comment "),r&&w({...g,comment_id:r.comment.id,move:"back"})):(console.log("back image "),h(l-1))},N=()=>{l>=F.length-1?(console.log("next comment "),r&&w({...g,comment_id:r.comment.id,move:"next"})):(console.log("next image "),h(l+1))};x.moveNext=N,x.moveBack=L;const F=[...((T=r==null?void 0:r.comment)==null?void 0:T.photos)||[],...((f=r==null?void 0:r.comment)==null?void 0:f.videos)||[]];return s("images")&&!(r!=null&&r.comment)?e.jsxs("div",{className:"image-not-found",children:[e.jsx("p",{className:"text",children:"no images or videos found for this product."}),e.jsxs("div",{onClick:()=>t(),children:[e.jsx("span",{}),"go back"]})]}):s("images")&&(r==null?void 0:r.comment)&&e.jsxs("section",{className:"page-comment-image "+(s("images")?"open":"close"),children:[e.jsxs("div",{className:"page-top",children:[e.jsx("div",{className:"return",style:{filter:q("#fff").result.filter},onClick:()=>t()}),e.jsxs("div",{className:"count",children:[((r==null?void 0:r.befor)||0)+l," / ",(r==null?void 0:r.total)||0]})]}),e.jsxs("div",{className:"file-view _flex _center",children:[l>((($=r==null?void 0:r.comment)==null?void 0:$.photos_count)||0)-1?e.jsx("div",{className:"video _flex",ref:_=>{if(!_||_.dataset.init)return;_.dataset.init="init",m(_);const v=()=>{const b=_.querySelector("video"),R=_.getBoundingClientRect();b.width=R.width};window.addEventListener("resize",v)},children:e.jsx("video",{loop:!0,autoPlay:!0,controls:!0,width:c==null?void 0:c.getBoundingClientRect().width,src:`${P}${F[l]}`})}):e.jsx("div",{className:"photo",children:e.jsx("div",{className:"img",style:{background:A(F[l],"100%")}})}),e.jsx("div",{className:"move-next",onClick:N,children:e.jsx("div",{className:"next",children:e.jsx("span",{})})}),e.jsx("div",{className:"move-back",onClick:L,children:e.jsx("div",{className:"back",children:e.jsx("span",{})})})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"top _flex _wrap",children:[e.jsx("div",{className:"name",children:J(((H=r==null?void 0:r.comment.user)==null?void 0:H.name)||"",50)}),e.jsxs("div",{className:"_flex  _l-auto",children:[e.jsx(se,{note:((D=r==null?void 0:r.comment)==null?void 0:D.note)||0}),e.jsx("div",{className:"open",onClick:()=>d(!0),children:"Open"})]})]}),e.jsx("div",{className:"message",children:J((r==null?void 0:r.comment.text)||"",100)}),e.jsxs("div",{className:"preview-comment "+(C?"open":"close"),children:[e.jsx("div",{className:"close",onClick:()=>{d(!1)}}),e.jsx(K,{canOpen:!0,comment:r.comment})]})]})]})}const ce={more:!0,list:["/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1mieub_19ahe0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg"]};let B;function we(){var te,ie,ne,ae;const{json:a,qs:s,check:t,current:n}=I(),{setProductById:o,product:i,fetchProducts:c,fetchVisites:m,visites:l,selectProduct:h}=re(),[r,j]=p.useState(),{fetchProductComments:x,setLastPage:C}=Q(),{user:d}=k(),[g,w]=p.useState(!0),[L,N]=p.useState(0),[F,T]=p.useState(!1),[f,$]=p.useState(),H=p.useRef(null),D=p.useRef(null),_=p.useRef(null),[v,b]=p.useState(),[R]=p.useState({});p.useEffect(()=>{t("detail")&&(a!=null&&a.product_id)&&a.product_id!=R.product_id&&(R.product_id=a.product_id,o(a))},[a]),p.useEffect(()=>{i&&t("detail")&&(c({no_save:!0,category_id:i.category_id}).then(u=>{u!=null&&u.list&&j(u)}),x({product_id:i.id,no_save:!0}).then(u=>b(u)),_.current&&(_.current.scrollTop=0),T(!1),s().keepJson().setAbsPath(["products","detail"]))},[i]),p.useEffect(()=>{!l&&d&&m({limit:10})},[d,i]);const[G,y]=p.useState(!1),[E]=p.useState(),[W]=p.useState({payment_id:"lol"}),[O,he]=p.useState(null);return p.useEffect(()=>{if(O){if(O.dataset.init)return;O.dataset.init="init",O.addEventListener("scroll",()=>{O.scrollTop>200?y(!0):y(!1)})}},[O]),i&&t("detail")&&e.jsxs("div",{className:"detail-product "+(i?"open":""),children:[i&&e.jsx(_e,{userComment:E,userCommand:W,setRef:he,product:i}),i&&e.jsx(ye,{product:i}),e.jsxs("section",{className:"detail "+(n("detail")?"open":"close"),ref:_,children:[e.jsxs("div",{className:"top-top _flex",children:[e.jsx("div",{className:"return",ref:u=>{if(!u||u.dataset.init)return;u.dataset.init="init";const S=()=>{window.innerWidth>940?u.style.display=" none":u.style.display="flex"};window.addEventListener("resize",S),S()},onClick:()=>{h(void 0)}}),e.jsx("div",{className:"label _lr-auto",children:"Detail Product"})]}),e.jsxs("div",{className:"top-infos",ref:u=>{if(!u||u.dataset.init)return;u.dataset.init="init";const S=u.querySelector(".images"),M=u.querySelector(".infos"),U=()=>{u.getBoundingClientRect().width<700?(u.style.flexWrap="wrap",S.style.width="",S.style.minWidth="",S.style.maxWidth="",M.style.width="",M.style.minWidth="",M.style.maxWidth=""):(u.style.flexWrap="",S.style.width="50%",S.style.minWidth="50%",S.style.maxWidth="50%",M.style.width="50%",M.style.minWidth="50%",M.style.maxWidth="50%")};window.addEventListener("resize",U),setTimeout(()=>{U(),B==null||B(0)},200)},children:[e.jsxs("div",{className:"images",children:[e.jsxs("div",{className:"list",ref:le(u=>{B=u},N),children:[e.jsx("div",{className:"gap"}),i==null?void 0:i.images.map((u,S)=>e.jsx("div",{className:"img card-h-c "+(L==S?"active":""),style:{background:A(u)},onClick:()=>{B==null||B(S),N(S)}},u+(i==null?void 0:i.id))),e.jsx("div",{className:"gap"})]}),e.jsx("div",{className:"min-list",children:i==null?void 0:i.images.map((u,S)=>e.jsx("div",{className:"min-img "+(L==S?"active":""),style:{background:A(u)},onClick:()=>{N(S),B==null||B(S)}},u+(i==null?void 0:i.id)))})]}),e.jsx("div",{className:"infos",ref:H,children:e.jsxs("div",{className:"diff",ref:D,children:[e.jsxs("div",{className:"text "+(f&&g?"min":""),children:[e.jsxs("div",{className:"title",children:[i==null?void 0:i.title,e.jsx("span",{})]}),e.jsx("p",{className:"description",children:((i==null?void 0:i.description.length)||0)>100&&!F?e.jsxs(e.Fragment,{children:[J((i==null?void 0:i.description)||"",100)," ",e.jsx("span",{onClick:()=>T(!0),children:"Read more"})]}):(i==null?void 0:i.description)||""})]}),(i==null?void 0:i.features)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"label-features",children:["Features",e.jsxs("span",{children:[" ",(f==null?void 0:f.name)&&" : "+(f==null?void 0:f.name)]})," ",f&&e.jsx("span",{className:"close",style:{filter:((te=q("#112233"))==null?void 0:te.result.filter)||""},onClick:()=>{$(void 0)}})]}),e.jsx("div",{className:"features",children:i==null?void 0:i.features.list.map(u=>{var S;return e.jsxs("div",{className:"feature "+((f==null?void 0:f.id)==u.id?"active":""),style:{filter:((S=q("#358f27"))==null?void 0:S.result.filter)||""},onClick:()=>{var M,U;if(!f){const z=((M=H.current)==null?void 0:M.getBoundingClientRect().height)||0,Y=((U=D.current)==null?void 0:U.getBoundingClientRect().height)||0;z-Y<150?w(!0):w(!1)}(f==null?void 0:f.id)==u.id?$(void 0):$(u)},children:[e.jsx("div",{className:"icon",style:{background:A(u.icon)}}),e.jsx("div",{className:"label",children:J(u.name,10)})]},u.id)})})]}),f&&e.jsxs("div",{className:"label-components",children:["Components: ",e.jsx("span",{children:(ne=(ie=i==null?void 0:i.featuresCollector)==null?void 0:ie.allCollectedFeatures()[f.id])==null?void 0:ne.name})]}),e.jsx("div",{className:"components "+(f?"open":""),children:(ae=f==null?void 0:f.components)==null?void 0:ae.map(u=>{var S,M;return e.jsxs("div",{className:"component "+(((M=(S=i==null?void 0:i.featuresCollector)==null?void 0:S.allCollectedFeatures()[f.id])==null?void 0:M.id)==u.id?"active":""),onClick:()=>{var U,z,Y,oe;((z=(U=i==null?void 0:i.featuresCollector)==null?void 0:U.allCollectedFeatures()[f.id])==null?void 0:z.id)==u.id?(Y=i==null?void 0:i.featuresCollector)==null||Y.collectFeature(f,void 0):(oe=i==null?void 0:i.featuresCollector)==null||oe.collectFeature(f,u)},children:[e.jsx("div",{className:"icon",style:{background:A(u.icon[0],"contain")}}),e.jsx("div",{className:"label",children:J(u.name,10)})]})})})]})})]}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"title",children:["product reviews",e.jsx("span",{})]}),i&&e.jsx(me,{onClick:()=>{C(""),s().keepJson().setAbsPath(["products","detail","images"])},product:i}),e.jsxs("div",{className:"title",children:["Comments",e.jsx("span",{})]}),e.jsxs("div",{className:"min-comments",ref:Z({posistion:20}),children:[v==null?void 0:v.list.map(u=>e.jsx(K,{comment:u,onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])}},u.id)),e.jsxs("div",{className:"more-comment",onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])},children:[e.jsx("div",{className:"icon "+(v!=null&&v.list.length||0>0?"":"add"),children:e.jsx("span",{style:{filter:q("#ffffff").result.filter}})}),e.jsx("div",{className:"label",children:v!=null&&v.list.length||0>0?"More":"Add"})]})]})]}),e.jsxs("div",{className:"visites",children:[e.jsxs("div",{className:"title",children:["Products Visited",e.jsx("span",{})]}),e.jsx("div",{className:"list",ref:Z({posistion:20}),children:l==null?void 0:l.list.map(u=>e.jsx(ee,{product:u,active:(i==null?void 0:i.id)==u.id,onClick:()=>{h(u)}},u.id))})]}),e.jsxs("div",{className:"more-products",children:[e.jsxs("div",{className:"title more",children:["More Products",e.jsx("span",{})]}),e.jsx("div",{className:"list",ref:Z({posistion:20}),children:r==null?void 0:r.list.map(u=>e.jsx(ee,{product:u,active:(i==null?void 0:i.id)==u.id,onClick:()=>{h(u)}},u.id))})]}),e.jsx("footer",{})]}),n("detail")&&e.jsx("div",{className:"price-zone",children:e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"price",children:[e.jsx("div",{children:"Price"}),e.jsxs("div",{className:"value",children:[(i==null?void 0:i.price)||0," $"]})]}),e.jsx("div",{className:"add-to-cart",children:"Add to cart"})]})}),n("comments")&&(G||(W==null?void 0:W.payment_id)&&!E)&&e.jsxs("div",{className:"write-zone",children:[G&&e.jsx("div",{className:"up-icon",onClick:()=>{O&&(O.scrollTop=0)},children:e.jsx("span",{})}),e.jsx("div",{className:"write-icon",children:e.jsx("span",{})})]})]})}function me({product:a,onClick:s}){return e.jsxs("div",{className:"group-file-rating",children:[e.jsx("div",{className:"after-order",children:e.jsxs("div",{className:"ctn-mini-files",onClick:s,children:[ce.list.map((t,n)=>e.jsx("div",{className:"w",children:e.jsx("div",{className:"mini-file",style:{background:A(t)}})},n)),e.jsx("div",{className:"back",style:{background:A(ce.list[0])},children:e.jsx("div",{className:"more-files",children:"+ More"})})]})}),(a==null?void 0:a.note)&&e.jsxs("div",{className:"rating",children:[e.jsx("div",{className:"note",children:a.note.star}),e.jsx(se,{note:a.note.star}),e.jsxs("div",{className:"vote",children:[a.note.votes," ",e.jsx("span",{})]})]})]})}const Ce=V(a=>({categories:void 0,async fetchCategoies(s){console.log({filter:s});const t=k.getState().store;if(!t)return;const n={...s};n.store_id=t.id;const o=new URLSearchParams({});for(const m in n){const l=n[m];o.set(m,l)}const c=await(await fetch(`${P}/get_categories/?${o.toString()}`)).json();if(c!=null&&c.list)return s!=null&&s.no_save||a(()=>({categories:c})),console.log(c),{...c}}})),Se=(a,s)=>{let t=!1;for(const n in s)a[n]!=s[n]&&(t=!0,a[n]=s[n]);return t};function be(){const{json:a,qs:s,check:t}=I(),{products:n,fetchProducts:o,selectProduct:i,product:c}=re(),{store:m}=k(),[l,h]=p.useState({order_by:"date_desc",category_id:"",price_min:void 0,price_max:void 0,text:"",product_id:""}),{fetchCategoies:r}=Ce(),[j,x]=p.useState(),[C]=p.useState({});return p.useEffect(()=>{t("products")&&o({...l}).then(d=>{d!=null&&d.list[0]&&!c&&window.innerWidth>940&&i(d==null?void 0:d.list[0])})},[l,m]),p.useEffect(()=>{!j&&r({limit:25,no_save:!0}).then(d=>{console.log(d),d!=null&&d.list&&x(d)})},[m]),p.useEffect(()=>{Se(l,a||{})&&h({...l})},[a]),p.useEffect(()=>{C.init||(C.init=!0,window.addEventListener("resize",()=>{var d;window.innerWidth>940&&i((d=C.products)==null?void 0:d.list[0])}))},[]),C.products=n,t("products")&&e.jsxs("div",{className:"page-products",children:[e.jsxs("div",{className:"left",children:[e.jsx("div",{className:"top",children:"Filter"}),e.jsx("div",{className:"categories",children:j==null?void 0:j.list.map(d=>e.jsx("div",{className:"category",onClick:()=>h({...l,category_id:d.id}),children:d.label},d.id))}),e.jsxs("div",{className:"prices",children:[e.jsxs("div",{className:"ctn",children:[e.jsx("label",{htmlFor:"product-price-min",children:e.jsx("input",{type:"text",id:"product-price-min",placeholder:"Min",value:l.price_min})}),e.jsx("label",{htmlFor:"product-price-max",children:e.jsx("input",{type:"text",id:"product-price-max",placeholder:"Max",value:l.price_max})})]}),e.jsx("div",{className:"set-price",children:e.jsx("div",{className:"btn",children:"Set Price"})})]})]}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"search-zone",children:[e.jsxs("label",{htmlFor:"product-search",className:"search",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{id:"product-search",type:"text",placeholder:"Search Product",value:l.text,onChange:d=>{h({...l,text:d.currentTarget.value})}}),e.jsx("div",{className:"clear",onClick:()=>{h({...l,text:""})}})]}),e.jsx("div",{className:"search-text",children:l.text&&e.jsxs(e.Fragment,{children:['Search result for "',e.jsx("span",{children:l.text}),'"']})}),e.jsxs("div",{className:"sort",children:[e.jsx("div",{className:"label",children:"Sort"}),e.jsx("div",{className:"list",children:["name","price","date","popular"].map(d=>e.jsx("div",{className:(a==null?void 0:a.order_by).split("_")[0]==d?"active":"",onClick:()=>{s({...a,order_by:d+"_desc"}).apply()},children:d},d))})]})]}),e.jsx("div",{className:"list",children:n==null?void 0:n.list.map(d=>e.jsx(ee,{product:d,active:(c==null?void 0:c.id)==d.id,onClick:()=>{s({...a,product_id:d.id}).setAbsPath(["products","detail"])}},d.id))})]}),e.jsx("div",{className:"right "+(c?"open":""),children:e.jsx(we,{})})]})}function ke(){const{authenticateUser:a}=k(),{openChild:s,currentChild:t,back_color:n,blur:o}=fe(),i=p.useRef(null),{pathList:c}=I();return p.useEffect(()=>{s(void 0)},[c]),p.useEffect(()=>{a(),window.addEventListener("blur",()=>{s(void 0)})},[]),e.jsxs("div",{className:"app",style:{width:"100%",height:"100%"},ref:m=>{},children:[t&&e.jsx("div",{className:"child-viewer",onContextMenu:m=>{m.preventDefault(),s(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:n},onClick:()=>{s(void 0)},onContextMenu:m=>{m.preventDefault(),s(void 0)},children:t})}),e.jsx("div",{ref:i,className:"app-ctn",style:{filter:o?"blur(10px)":""},children:e.jsx(be,{})})]})}const Pe=a=>a,Le=Pe(e.jsx(pe.StrictMode,{children:e.jsx(ke,{})}));export{Le as ClientView};

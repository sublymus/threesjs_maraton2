import{c as V,S as we,j as e,g as F,l as Y,u as be,b as Se}from"./BindToParentScroll-DgT6uH8a.js";import{H as $,r as m,R as ke}from"./index-CoRWiZjx.js";import{f as Pe}from"./DataBase-u9YpBFfJ.js";const w=V(n=>({user:void 0,store:void 0,userStore:void 0,manager:void 0,openAuth:!1,async updateUser({name:s,photos:t,id:a}){const c=new FormData;if(s&&c.append("name",s),t!=null&&t[0])c.append("photos_0",t[0]);else return;c.append("id",a),c.append("photos",'["photos_0"]');const i=w.getState().getHeaders();if(!i)return;const l=await(await fetch(`${$}/edit_me`,{method:"PUT",body:c,headers:i.headers})).json();console.log({user:l}),l.id&&(n(()=>({user:{...l,photos:l.photos.map(r=>`${$}${r}`)}})),localStorage.setItem("user",JSON.stringify(l)))},async disconnection(){const s=w.getState().getHeaders();if(!s)return;const t={method:"GET",headers:s.headers};await fetch(`${$}/disconnection`,t),localStorage.removeItem("user"),localStorage.removeItem("store_name"),n(()=>({user:void 0,store:void 0,userStore:void 0,openAuth:!0}))},async getAccess(){window.open(`${$}/google_connexion`,void 0,"popup");const s=setInterval(()=>{const t=localStorage.getItem("user"),a=t&&JSON.parse(t);a&&(console.log("getAccess",{token:a.token}),n(()=>({user:a})),clearInterval(s),w.getState().authenticateUser())},100)},async authenticateUser(){let s=localStorage.getItem("user");const t=localStorage.getItem("store_name")||window.location.pathname.split("/")[2];if(s){const a=JSON.parse(s),c=new Headers;c.append("Authorization",`Bearer ${a.token}`);const i={method:"GET",headers:c},o=await fetch(`${$}/can_use_store/${t}`,i);let l;try{if(l=await o.json(),!l.user)return}catch{return}const r={...a,...l.user};n(()=>({user:r,manager:l.manager,userStore:l.userStore,store:l.store,openAuth:!1})),localStorage.setItem("user",JSON.stringify(r))}else await w.getState().getStore()},async getStore(){const s=localStorage.getItem("store_name")||window.location.pathname.split("/")[1];if(s){const t=await fetch(`${$}/get_store_by_name/${s}`);try{let a=await t.json();n(()=>({store:a}))}catch{}}},getHeaders(){const s=w.getState().store;if(!s)return;let t=w.getState().user;if(!t)return;const a=new Headers;return a.append("Authorization",`Bearer ${t.token}`),{store:s,headers:a,user:t}}})),ce=[{u:"products",n:"Home",i:"/src/res/application.png"},{u:"categories",n:"Categories",i:"/src/res/catalog.png"},{u:"favorites",n:"Favorites",i:"/src/res/shopping-cart.png"},{u:"cart",n:"Cart",i:"/src/res/chat.png"},{u:"profile",n:"Prolife",i:"/src/res/chat.png"}],$e={"/":{loading:{},products:{detail:{comments:{},images:{}}},categories:{},favorites:{},cart:{payment:{}},profile:{command:{}}}},oe=V(n=>({T:localStorage.getItem("theme"),storeVar:void 0,usersVar:void 0,back_color:"",blur:!1,openNav:"max",setOpenNav(s){n(()=>({openNav:s}))},setT(s){s&&localStorage.setItem("theme",s),n(()=>({T:s}))},currentChild:void 0,openChild(s,t,a){n(()=>({currentChild:s,blur:t,back_color:s&&a||""}))}})),B=new we($e,["/","products"]).getStore(),Ee=(n,s)=>{const t=setInterval(()=>{let a=!1,c=n,i=0;for(;!a;){if(c==document.body){clearInterval(t),s(),a=!0;return}else c==null||i>100?a=!0:c=c.parentElement;i++}},100)},ge=(n,s)=>t=>{if(!t)return;if(t.dataset.init)return n==null?void 0:n(t.setIndex);t.dataset.init="init:"+Math.trunc(Math.random()*1e3)/1e3;const a=()=>{let c=0;const i=r=>{const d=t.querySelectorAll(".card-h-c");if(c=r,d.length<=0)return;c=c>=d.length?d.length-1:c<0?0:c;const p=t.getBoundingClientRect(),h=p.width,j=d[c].getBoundingClientRect(),u=j.x-p.x+j.width/2;t.scrollTo({behavior:"smooth",left:t.scrollLeft-(h/2-u)})};t.setIndex=i;const o=()=>{const r=t.getBoundingClientRect().width;i(c);const d=t.querySelectorAll(".gap");for(const p of d)p.style.width=`${r/2}px`,p.style.minWidth=`${r/2}px`,p.style.maxWidth=`${r/2}px`};window.addEventListener("resize",o),o();const l=.1;t.addEventListener("scrollend",()=>{const r=t.getBoundingClientRect(),d=r.width,p=d*l,_=t.querySelectorAll(".card-h-c")[c].getBoundingClientRect(),j=_.x-r.x+_.width/2;let u=c;j<d/2-p?(u=c+1,i(u)):j>d/2+p?(u=c-1,i(u)):i(c),s==null||s(u)}),n==null||n(i)};Ee(t,()=>{a()})};class Ne{constructor(s,t,a){this.set(s,t,a)}toString(){return`rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`}set(s,t,a){this.r=this.clamp(s),this.g=this.clamp(t),this.b=this.clamp(a)}hueRotate(s=0){s=s/180*Math.PI;const t=Math.sin(s),a=Math.cos(s);this.multiply([.213+a*.787-t*.213,.715-a*.715-t*.715,.072-a*.072+t*.928,.213-a*.213+t*.143,.715+a*.285+t*.14,.072-a*.072-t*.283,.213-a*.213-t*.787,.715-a*.715+t*.715,.072+a*.928+t*.072])}grayscale(s=1){this.multiply([.2126+.7874*(1-s),.7152-.7152*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152+.2848*(1-s),.0722-.0722*(1-s),.2126-.2126*(1-s),.7152-.7152*(1-s),.0722+.9278*(1-s)])}sepia(s=1){this.multiply([.393+.607*(1-s),.769-.769*(1-s),.189-.189*(1-s),.349-.349*(1-s),.686+.314*(1-s),.168-.168*(1-s),.272-.272*(1-s),.534-.534*(1-s),.131+.869*(1-s)])}saturate(s=1){this.multiply([.213+.787*s,.715-.715*s,.072-.072*s,.213-.213*s,.715+.285*s,.072-.072*s,.213-.213*s,.715-.715*s,.072+.928*s])}multiply(s){const t=this.clamp(this.r*s[0]+this.g*s[1]+this.b*s[2]),a=this.clamp(this.r*s[3]+this.g*s[4]+this.b*s[5]),c=this.clamp(this.r*s[6]+this.g*s[7]+this.b*s[8]);this.r=t,this.g=a,this.b=c}brightness(s=1){this.linear(s)}contrast(s=1){this.linear(s,-(.5*s)+.5)}linear(s=1,t=0){this.r=this.clamp(this.r*s+t*255),this.g=this.clamp(this.g*s+t*255),this.b=this.clamp(this.b*s+t*255)}invert(s=1){this.r=this.clamp((s+this.r/255*(1-2*s))*255),this.g=this.clamp((s+this.g/255*(1-2*s))*255),this.b=this.clamp((s+this.b/255*(1-2*s))*255)}hsl(){const s=this.r/255,t=this.g/255,a=this.b/255,c=Math.max(s,t,a),i=Math.min(s,t,a);let o,l,r=(c+i)/2;if(c===i)o=l=0;else{const d=c-i;switch(l=r>.5?d/(2-c-i):d/(c+i),c){case s:o=(t-a)/d+(t<a?6:0);break;case t:o=(a-s)/d+2;break;case a:o=(s-t)/d+4;break}o/=6}return{h:o*100,s:l*100,l:r*100}}clamp(s){return s>255?s=255:s<0&&(s=0),s}}class Le{constructor(s,t){this.target=s,this.targetHSL=s.hsl(),this.reusedColor=new Ne(0,0,0)}solve(){const s=this.solveNarrow(this.solveWide());return{values:s.values,loss:s.loss,filter:this.css(s.values)}}solveWide(){const a=[60,180,18e3,600,1.2,1.2];let c={loss:1/0};for(let i=0;c.loss>25&&i<3;i++){const o=[50,20,3750,50,100,100],l=this.spsa(5,a,15,o,1e3);l.loss<c.loss&&(c=l)}return c}solveNarrow(s){const t=s.loss,a=2,c=t+1,i=[.25*c,.25*c,c,.25*c,.2*c,.2*c];return this.spsa(t,i,a,s.values,500)}spsa(s,t,a,c,i){const l=.16666666666666666;let r=null,d=1/0;const p=new Array(6),h=new Array(6),_=new Array(6);for(let u=0;u<i;u++){const E=a/Math.pow(u+1,l);for(let N=0;N<6;N++)p[N]=Math.random()>.5?1:-1,h[N]=c[N]+E*p[N],_[N]=c[N]-E*p[N];const C=this.loss(h)-this.loss(_);for(let N=0;N<6;N++){const f=C/(2*E)*p[N],S=t[N]/Math.pow(s+u+1,1);c[N]=j(c[N]-S*f,N)}const R=this.loss(c);R<d&&(r=c.slice(0),d=R)}return{values:r,loss:d};function j(u,E){let C=100;return E===2?C=7500:(E===4||E===5)&&(C=200),E===3?u>C?u%=C:u<0&&(u=C+u%C):u<0?u=0:u>C&&(u=C),u}}loss(s){const t=this.reusedColor;t.set(0,0,0),t.invert(s[0]/100),t.sepia(s[1]/100),t.saturate(s[2]/100),t.hueRotate(s[3]*3.6),t.brightness(s[4]/100),t.contrast(s[5]/100);const a=t.hsl();return Math.abs(t.r-this.target.r)+Math.abs(t.g-this.target.g)+Math.abs(t.b-this.target.b)+Math.abs(a.h-this.targetHSL.h)+Math.abs(a.s-this.targetHSL.s)+Math.abs(a.l-this.targetHSL.l)}css(s){function t(a,c=1){return Math.round(s[a]*c)}return`invert(${t(0)}%) sepia(${t(1)}%) saturate(${t(2)}%) hue-rotate(${t(3,3.6)}deg) brightness(${t(4)}%) contrast(${t(5)}%)`}}function Re(n){const s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(s,(a,c,i,o)=>c+c+i+i+o+o);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}const ie={},L=n=>{if(ie[n])return ie[n];const s=Re(n);if(s.length!==3){alert("Invalid format!");return}const t=new Ne(s[0],s[1],s[2]),c=new Le(t).solve(),i={color:t,result:c};return ie[n]=i,i},I=V(n=>({commands:void 0,carts:void 0,async deleteCommand(s){const t=w.getState().getHeaders();if(!t)return!1;if((await(await fetch(`${$}/delete_command/${s}`,{headers:t.headers,method:"DELETE"})).json()).deleted){const i=I.getState().carts;return n(()=>({carts:{limit:(i==null?void 0:i.limit)||25,page:(i==null?void 0:i.page)||1,total:(i==null?void 0:i.total)||0,list:((i==null?void 0:i.list)||[]).filter(o=>o.id!=s)}})),!0}return!1},async addProductToCart(s){const t=w.getState().getHeaders();if(!t||!(s.product_id||s.command_id))return;const a=new FormData,c={};s.product_id&&a.append("product_id",s.product_id+""),s.command_id&&a.append("command_id",s.command_id+""),s.quantity&&a.append("quantity",s.quantity+""),s.collected_features&&a.append("collected_features",JSON.stringify(s.collected_features));const i=new URLSearchParams({});for(const d in c){const p=c[d];i.set(d,p)}const l=await(await fetch(`${$}/add_command`,{method:"POST",headers:t.headers,body:a})).json();if(!l.id)return;const r=I.getState().carts;return n(()=>({carts:{limit:(r==null?void 0:r.limit)||25,page:(r==null?void 0:r.page)||1,total:(r==null?void 0:r.total)||0,list:[...((r==null?void 0:r.list)||[]).map(d=>d.id==l.id?l:d)]}})),l},async confirmCommand(s){const t=w.getState().getHeaders();if(!t)return!1;const a=new FormData;return s!=null&&s.list&&a.append("list",JSON.stringify(s.list)),(await(await fetch(`${$}/client_confirm_command`,{headers:t.headers,method:"PUT",body:a})).json()).success?(I.getState().fetchCarts({}),I.getState().fetchCommands({}),!0):!1},async fetchCarts(){const s=w.getState().getHeaders();if(!s)return;const t={};t.store_id=s.store.id,t.status="CART";const a=new URLSearchParams({});for(const o in t){const l=t[o];a.set(o,l)}const i=await(await fetch(`${$}/get_commands/?${a.toString()}`,{headers:s.headers})).json();return n(()=>({carts:i})),i},async fetchCommands(){const s=w.getState().getHeaders();if(!s)return;const t={};t.store_id=s.store.id,t.no_status="CART";const a=new URLSearchParams({});for(const o in t){const l=t[o];a.set(o,l)}const i=await(await fetch(`${$}/get_commands/?${a.toString()}`,{headers:s.headers})).json();return n(()=>({commands:i})),console.log(i),i}}));function re({cart:n,canNull:s,product:t,onChange:a}){var l,r;let[c,i]=m.useState(Number((n==null?void 0:n.quantity)||(t==null?void 0:t.quantity)||0)||0);const{addProductToCart:o}=I();return m.useEffect(()=>{i(Number((n==null?void 0:n.quantity)||(t==null?void 0:t.quantity)||0)||0)},[t,n]),e.jsxs("div",{className:"cart-quantity",children:[e.jsx("div",{className:"min "+(c<=(s?0:1)?"bloc":""),onClick:()=>{let d=parseInt(c+"");d=d-1<(s?0:1)?s?0:1:d-1,i(d),console.log("counter===>>>> ",d),(t||n)&&o({product_id:t==null?void 0:t.id,command_id:n==null?void 0:n.id,quantity:d}).then(()=>{a==null||a(c)})},children:e.jsx("span",{style:{filter:c<=(s?0:1)||!1?L("#fff").result.filter:L("#358f27").result.filter}})}),e.jsx("div",{className:"count",children:c}),e.jsx("div",{className:"max "+(c>=(((l=t||n)==null?void 0:l.stock)||Number.MAX_VALUE)?"bloc":""),onClick:()=>{var p,h,_;let d=parseInt(c+"");d=d<(((p=t||n)==null?void 0:p.stock)||Number.MAX_VALUE)?d:((h=t||n)==null?void 0:h.stock)||Number.MAX_VALUE,d=d+1,!(d>parseInt((((_=t||n)==null?void 0:_.stock)||Number.MAX_VALUE)+""))&&(i(d),(t||t||n)&&o({product_id:t==null?void 0:t.id,command_id:n==null?void 0:n.id,quantity:d}).then(()=>{a==null||a(c)}))},children:e.jsx("span",{style:{filter:c>=(((r=t||n)==null?void 0:r.stock)||Number.MAX_VALUE)?L("#fff").result.filter:L("#358f27").result.filter}})})]})}const J=V((n,s)=>({visites:void 0,product:void 0,products:{limit:25,list:[],page:1,total:0},setProducts(t,a){n(({products:c})=>({products:(c||a)&&{...c,...a,...t}}))},async setClientVisite(t){const a=w.getState().getHeaders();if(!a)return;const c=new FormData;c.append("product_id",t),await fetch(`${$}/set_client_visited`,{headers:a.headers,body:c,method:"PUT"})},async fetchVisites({after_date:t,before_date:a,client_id:c,product_id:i,limit:o,page:l}){const r=w.getState().getHeaders();if(!r)return;const d={};d.store_id=r.store.id,d.product_id=i||"",d.client_id=c||"",d.limit=o||6,d.page=l||1,d.after_date=t||"",d.before_date=a||"";const p=new URLSearchParams({});for(const j in d){const u=d[j];u!=null&&p.set(j,u)}const _=await(await fetch(`${$}/get_client_visited/?${p.toString()}`,{headers:r.headers})).json();!_||!_.list||n(()=>({visites:_}))},featuresCollector:void 0,async setProductById(t){if(!t.product_id)return;const a=s().products,c=a==null?void 0:a.list.find(i=>i.id==t.product_id);if(c)s().selectProduct(c),n(()=>({featuresCollector:c==null?void 0:c.featuresCollector})),console.log(t);else{const i=w.getState().store;if(!i)return;const o={};o.product_id=t.product_id,o.is_features_required=!0,o.store_id=i.id,o.by_product_category=!(a!=null&&a.list[0]);const l=new URLSearchParams({});for(const h in o){const _=o[h];_!=null&&l.set(h,_)}const d=await(await fetch(`${$}/get_products/?${l.toString()}`)).json();if(!d.list)return;const p=d.list.find(h=>h.id==t.product_id)||d.list[0];n(()=>({products:a?{...a,list:[...d.list.filter(h=>!a.list.find(_=>_.id==h.id)),...a.list]}:d,product:p,featuresCollector:p==null?void 0:p.featuresCollector})),s().selectProduct(p)}},fetchProducts:async t=>{const a=w.getState().getHeaders();if(!a)return;const c={...t};c.is_features_required=!0,c.store_id=a.store.id;const i=new URLSearchParams({});for(const r in c){const d=c[r];d!=null&&i.set(r,d)}const l=await(await fetch(`${$}/get_products/?${i.toString()}`,{headers:a.headers})).json();if(l!=null&&l.list)return t!=null&&t.no_save||n(()=>({products:l})),{...l}},async selectProduct(t){if(!t)return n(()=>({product:void 0}));t.features=Pe;const a={};t.features.list.forEach(c=>{var i;c.default_value?a[c.id]=c.default_value:(console.log("nnnnnnnnnn"),a[c.id]=(i=c.components)==null?void 0:i.find(o=>!!o.is_default),c.default_value=a[c.id])}),t.featuresCollector={collectFeature(c,i){i!=null?a[c.id]=i:c.default_value&&(a[c.id]=c.default_value),n(()=>({featuresCollector:t.featuresCollector&&{...t.featuresCollector}}))},getCollectedFeatures(c){return a[c]},allCollectedFeatures(){return a}},n(()=>({product:t})),s().setClientVisite(t.id)}}));function de({product:n,active:s,onClick:t,aspect:a,mode:c}){var R,N,f,S;const[i,o]=m.useState(0),l=m.useRef(null),{addProductToCart:r}=I(),{fetchProducts:d,products:p,setProducts:h,selectProduct:_,product:j}=J(),[u,E]=m.useState({...n});m.useEffect(()=>{E({...n})},[n]),m.useEffect(()=>{const x=()=>{l.current&&a!=null&&c=="v"&&(l.current.style.height=`${l.current.getBoundingClientRect().width*(a||1)}px`)};return a!=null&&c=="v"&&window.addEventListener("resize",x),l.current&&(!a||c=="h")&&(l.current.style.height=""),x(),()=>{window.removeEventListener("resize",x)}},[l,a,c]);const C=()=>{n&&d({add_cart:!0,product_id:n.id,no_save:!0}).then(x=>{if(x!=null&&x.list[0].id){const y={...x==null?void 0:x.list[0]};p&&h({...p,list:p==null?void 0:p.list.map(A=>A.id==(x==null?void 0:x.list[0].id)?y:A)}),(j==null?void 0:j.id)==(x==null?void 0:x.list[0].id)&&_(y);return}})};return e.jsxs("div",{className:"product-card "+c+" "+(s?"active":""),onClick:t,ref:l,children:[e.jsxs("div",{className:"images",ref:ge(void 0,o),children:[e.jsx("div",{className:"gap"}),u.images.map(x=>e.jsx("div",{className:"image card-h-c ",style:{background:F(x)}},x)),e.jsx("div",{className:"gap"})]}),e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"counters",children:u.images.map((x,y)=>e.jsx("div",{className:"counter "+(i==y?"active":"")},x))}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"value",children:"12450.93 $"})}),e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:u.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:u.description})]}),e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"star "+((R=u.note)!=null&&R.star?"":"vide")}),e.jsx("div",{className:"note",children:(N=u.note)==null?void 0:N.star}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"vote",children:(f=u.note)==null?void 0:f.votes}),e.jsx("div",{className:"users"}),!((S=u.note)!=null&&S.star)&&e.jsx("div",{className:"new",children:"New"})]}),e.jsx("div",{className:"add-btn",onClick:x=>{x.preventDefault(),x.stopPropagation()},children:u.quantity!=null&&u.quantity!=null&&parseInt(u.quantity+"")!=0&&u.quantity.toString()!="0"?e.jsx(re,{canNull:!0,product:u,onChange:()=>{C()}}):e.jsxs("div",{className:"btn",onClick:()=>r({product_id:u.id,quantity:1}).then(x=>{x!=null&&x.id&&C()}),children:["Add ",e.jsx("span",{children:" to cart"})]})})]})]})}function me({note:n}){return e.jsxs("div",{className:"note-stars",children:[e.jsx("div",{className:"icon first "+(n>=1?"full":n<=0?"vide":"half")}),e.jsx("div",{className:"icon "+(n>=2?"full":n<=1?"vide":"half")}),e.jsx("div",{className:"icon "+(n>=3?"full":n<=2?"vide":"half")}),e.jsx("div",{className:"icon "+(n>=4?"full":n<=3?"vide":"half")}),e.jsx("div",{className:"icon "+(n>=5?"full":n<=4?"vide":"half")})]})}const ee=V(n=>({comments:void 0,index:void 0,lastPage:void 0,setLastPage(s){n(()=>({lastPage:s}))},setIndex(s){n(()=>({index:s}))},userComment:void 0,async getCommentIndex(s){const t=new URLSearchParams({});for(const i in s){const o=s[i];o!=null&&t.set(i,o)}return await(await fetch(`${$}/get_comment_index/?${t}`)).json()},async sendCommentResponse(s){const t=w.getState().getHeaders();if(!t)return;const a=new FormData;a.append("product_comment_id",s.comment_id.toString()),a.append("response",s.response);const i=await(await fetch(`${$}/set_product_comment_response`,{method:"PUT",body:a,headers:t.headers})).json();if(i!=null&&i.id)return n(({comments:o})=>({comments:o&&{...o,list:o.list.map(l=>l.id==s.comment_id?i:l)}})),i},async fetcheditCommentText(s){const t=w.getState().getHeaders();if(!t)return;const a=new FormData;a.append("product_comment_id",s.comment_id.toString()),a.append("text",s.text);const i=await(await fetch(`${$}/edit_product_comment_text`,{method:"PUT",body:a,headers:t.headers})).json();if(i!=null&&i.id)return n(({comments:o})=>({comments:o&&{...o,list:o.list.map(l=>l.id==s.comment_id?i:l)}})),i},async deleteComment(s,t){const a=w.getState().getHeaders();if(!a)return;const i=await(await fetch(`${$}/delete_product_comment/${s.id}`,{method:"DELETE",headers:a.headers})).json();if(i!=null&&i.deleted)return t&&setTimeout(()=>{n(({comments:o})=>({comments:o&&{...o,list:o.list.filter(l=>l.id!=s.id)}}))},t),i},async fetchProductComments(s){if(!w.getState().store)return;const a=new URLSearchParams({});for(const o in s){const l=s[o];a.set(o,l)}const i=await(await fetch(`${$}/get_product_comments/?${a.toString()}`)).json();return s!=null&&s.no_save||n(()=>({comments:i})),i},async fetchUserComment(){},async create_product_comment(s){const t=w.getState().getHeaders();if(!t)return;const a=new FormData;a.append("product_id",s.product_id),a.append("note",s.note+""),a.append("text",s.text);for(let o=0;o<s.photos.length;o++)a.append("photos_"+o,s.photos[o]);for(let o=0;o<s.videos.length;o++)a.append("videos_"+o,s.videos[o]);console.log(s);const i=await(await fetch(`${$}/create_product_comment`,{method:"POST",body:a,headers:t.headers})).json();if(i!=null&&i.id)return i}}));function Z({comment:n,canOpen:s,onClick:t}){var b,M;const[a,c]=m.useState(!1),[i,o]=m.useState(!1),{userStore:l,manager:r}=w(),{deleteComment:d,sendCommentResponse:p,fetcheditCommentText:h}=ee(),_=(r==null?void 0:r.type.toLocaleLowerCase())=="collaborator"||(r==null?void 0:r.type.toLocaleLowerCase())=="owner",[j,u]=m.useState(0),[E,C]=m.useState(!1),[R,N]=m.useState(!1),[f,S]=m.useState(n.text||""),[x,y]=m.useState(n.response||""),A=(l==null?void 0:l.user_id)==n.user_id,[H,W]=m.useState(null);return e.jsxs("div",{ref:W,className:"product-comment",onClick:()=>{t==null||t(),o(!1)},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"photo",style:{background:n.user?F(n.user.photos[0]):""},children:e.jsx("span",{style:{background:(b=n.user)!=null&&b.country_icon?F(n.user.country_icon):""}})}),e.jsxs("div",{className:"coment-right",children:[e.jsxs("div",{className:"flex",style:{flexWrap:"nowrap"},children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"name",children:(M=n.user)==null?void 0:M.name}),e.jsx(me,{note:n.note})]}),(A||_)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"option",onClick:v=>{v.preventDefault(),v.stopPropagation(),o(!i)}}),e.jsxs("div",{className:"ctn-option "+(i?"open":""),onClick:()=>{o(!1)},children:[e.jsx("div",{className:"close",onClick:()=>{o(!1)}}),A&&e.jsx("div",{className:"edit-comment",onClick:()=>{C(!0),N(!1)},children:"Edit Comment"}),_&&e.jsx("div",{className:"edit-response",onClick:()=>{N(!0),C(!1)},children:n.response?"Edit Response":"Add Response"}),e.jsx("div",{className:"delete",onClick:()=>{d(n,300).then(v=>{v!=null&&v.deleted&&(H==null||H.classList.add("deleted"),setTimeout(()=>{H&&(H.style.display="none")},300))})},children:"Delete"})]})]})]}),e.jsx("div",{className:"date",children:new Date(n.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),e.jsx("div",{className:"message",children:E?e.jsxs("label",{htmlFor:"edit-comment-"+n.id,children:[e.jsx("input",{id:"edit-comment-"+n.id,type:"text",value:f,placeholder:"Edit Comment",onChange:v=>{S(v.currentTarget.value)}}),e.jsx("span",{onClick:()=>{N(!1),C(!1),h({comment_id:n.id,text:f}).then(v=>{v!=null&&v.id&&(n.text=v.text,u(j+1))})}})]}):n.text})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),s&&(n.photos_count>0||n.videos_count>0)&&e.jsxs("div",{className:"files-ctn",children:[n.photos.map((v,T)=>e.jsx("div",{style:{background:F(v)+",#4544"},onClick:q=>{q.preventDefault(),q.stopPropagation(),t==null||t({comment:n,relative:T})}},v)),n.videos.map((v,T)=>e.jsx("div",{onClick:q=>{q.preventDefault(),q.stopPropagation(),t==null||t({comment:n,relative:n.photos.length+T})},children:e.jsx("video",{width:60,height:60,src:`${$}${v}`})},v))]})]}),(s&&n.response||R)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"open-response "+(a||R?"open":""),onClick:()=>{c(!a),N(!1),C(!1)},children:[n.response?"Open response":"Add Response",e.jsx("span",{})]}),e.jsx("div",{className:"response "+(a||R?"open":""),children:R?e.jsxs("label",{htmlFor:"edit-response-"+n.id,children:[e.jsx("input",{id:"edit-response-"+n.id,type:"text",value:x,placeholder:"Edit Response",onChange:v=>{y(v.currentTarget.value)}}),e.jsx("span",{onClick:()=>{N(!1),c(!0),p({comment_id:n.id,response:x}).then(v=>{v!=null&&v.id&&(n.response=v.response,u(j+1))})}})]}):n.response})]})]})}function he({posistion:n,size:s,top:t,step:a}){return c=>{if(!c||c.dataset.init)return;c.dataset.init="init",c.style.scrollBehavior="smooth";const i=c.parentElement,o=document.createElement("div");o.style.width=c.style.width,o.style.position="relative",o.append(c),i.append(o);const l=document.createElement("div"),r=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div");r.className="h-scroll-icon-ctn right",l.className="h-scroll-icon-ctn",s&&(r.style.width=`${s}px`,r.style.height=`${s}px`,l.style.width=`${s}px`,l.style.height=`${s}px`),n&&(r.style.right=`${-n}px`,l.style.left=`${-n}px`),t&&(r.style.top=`${t}px`,l.style.top=`${t}px`),p.className="h-scroll-icon right",d.className="h-scroll-icon",r.append(p),l.append(d),p.style.filter=L("#123").result.filter,d.style.filter=L("#123").result.filter,o.append(r,l);const h=()=>{c.scrollLeft<=0?l.style.display="none":l.style.display="block",c.scrollLeft>=c.scrollWidth-c.getBoundingClientRect().width-30?r.style.display="none":r.style.display="block"};l.addEventListener("click",()=>{a?c.scrollLeft-=a:c.scrollLeft-=c.getBoundingClientRect().width/2}),r.addEventListener("click",()=>{a?c.scrollLeft+=a:c.scrollLeft+=c.getBoundingClientRect().width/2}),c.addEventListener("scroll",h),setTimeout(()=>{h()},500)}}function se({detail:n,image:s,title:t}){const{getAccess:a}=w();return e.jsx("div",{className:"page-auth",children:e.jsxs("div",{className:"auth-ctn",onClick:c=>{c.stopPropagation(),c.preventDefault()},children:[e.jsx("div",{className:"image",style:{background:s&&F(s)}}),e.jsxs("div",{className:"form",children:[e.jsx("h1",{className:"auth-title",children:t||"JOIN US NOW"}),e.jsxs("h5",{className:"auth-prompt",children:["Read more ?"," ",e.jsx("span",{onClick:()=>{},children:"Click here"})]}),e.jsxs("div",{className:"google",onClick:()=>{a()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Connexion"})]}),e.jsx("p",{children:n||"Google connexion is required to get access to sublymus service."})]})]})})}function Ae({product:n,setRef:s,userCommand:t}){const{userComment:a,comments:c,create_product_comment:i,fetchProductComments:o,setIndex:l}=ee(),{openChild:r}=oe(),{user:d}=w(),{navBack:p,qs:h,current:_,json:j}=B(),[u,E]=m.useState([]),[C,R]=m.useState([]),[N,f]=m.useState(""),[S,x]=m.useState(0),[y,A]=m.useState(!1),[H,W]=m.useState(),[b,M]=m.useState(!1),[v,T]=m.useState({order_by:"created_at_desc",order_text:"Date",with_photo:!1,with_video:!1,limit:20,page:1}),[q,te]=m.useState(!1);return m.useEffect(()=>{o({product_id:n.id,...v})},[H,n,v,j]),_("comments")&&e.jsxs("section",{className:"page-comments "+(_("comments")?"open":"close"),ref:s,children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"return",onClick:()=>{p()}}),e.jsx("h1",{children:"Comments"}),e.jsx("div",{className:"option"})]}),e.jsx(Ce,{product:n,onClick:()=>h().keepJson().setAbsPath(["products","detail","images"])}),e.jsxs("div",{className:"write-comment",children:[e.jsxs("div",{className:"top-prompt",children:[" Leave a comment ",e.jsx("span",{})]}),H?e.jsx("div",{children:"Thank you for the comment."}):a?e.jsxs("div",{children:["You have already commented on this product ",e.jsx("span",{onClick:()=>A(!0),children:" see my comment"})]}):t!=null&&t.payment_id?e.jsxs("div",{className:"zone-inputs",children:[e.jsxs("div",{className:"user-rating",children:[e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"icon "+(S>=1?"star":""),onClick:()=>x(1)}),e.jsx("div",{className:"icon "+(S>=2?"star":""),onClick:()=>x(2)}),e.jsx("div",{className:"icon "+(S>=3?"star":""),onClick:()=>x(3)}),e.jsx("div",{className:"icon "+(S>=4?"star":""),onClick:()=>x(4)}),e.jsx("div",{className:"icon "+(S==5?"star":""),onClick:()=>x(5)})]}),e.jsx("div",{className:"value",children:S})]}),!!S&&e.jsxs("label",{htmlFor:"comment-input-text",className:"input-text",children:[e.jsx("input",{id:"comment-input-text",autoFocus:!0,type:"text",value:N,placeholder:"Write Comment",onChange:k=>{f(k.target.value.substring(0,200))}}),e.jsxs("div",{className:"div",children:[N.length,"/200"]})]}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-photo",id:"comment-photo",accept:"image/*",onChange:k=>{if(k.target.files){for(const D of k.target.files)u.unshift(D);E([...u].slice(0,5))}}}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-video",id:"comment-video",accept:"video/*",onChange:k=>{if(k.target.files){for(const D of k.target.files)C.unshift(D);R([...C].slice(0,2))}}}),e.jsxs("div",{className:"files-ctn",style:{display:S&&N?"flex":"none"},children:[e.jsxs("div",{className:"photo-ctn",children:[e.jsxs("label",{htmlFor:"comment-photo",className:"photo",children:[e.jsx("span",{}),"Photo ",u.length,"/5"]}),e.jsx("div",{className:"files-photo",children:u.map(k=>e.jsx("div",{style:{background:F(URL.createObjectURL(k))},children:e.jsx("span",{onClick:()=>{E(u.filter(D=>D!=k))}})},k.name))})]}),e.jsxs("div",{className:"video-ctn",children:[e.jsxs("label",{htmlFor:"comment-video",className:"photo",children:[e.jsx("span",{}),"Video ",C.length,"/2"]}),e.jsx("div",{className:"files-video",children:C.map(k=>e.jsxs("div",{children:[e.jsx("video",{width:80,height:80,src:URL.createObjectURL(k)}),e.jsx("span",{onClick:()=>{R(C.filter(D=>D!=k))}})]},k.name))})]})]}),e.jsxs("div",{className:"send-comment "+(b?"loading":""),children:[e.jsx("span",{className:"text "+(N.trim()?"":"no"),onClick:()=>{if(!d)return r(e.jsx(se,{}),!0,"#fffc");S&&N&&(M(!0),i({note:S,photos:u,product_id:n.id,text:N,videos:C}).then(k=>{M(!1),k!=null&&k.id&&W(k)}))},children:"Send"})," ",e.jsx("span",{className:"loading"})]})]}):e.jsx("div",{children:"Comments are allowed after purchasing the product"})]}),e.jsx("div",{className:"my-comment",children:a&&e.jsx(Z,{comment:a,canOpen:!0})}),e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"date active",onClick:()=>{te(!q)},children:[v.order_text,e.jsx("span",{className:v.order_by.includes("desc")?"desc":""}),e.jsxs("div",{className:q?"open":"",children:[e.jsxs("div",{onClick:()=>T({...v,order_by:"created_at_desc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>T({...v,order_by:"created_at_asc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:""})]}),e.jsxs("div",{onClick:()=>T({...v,order_by:"note_desc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>T({...v,order_by:"note_asc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:""})]})]})]}),e.jsx("div",{className:"photo "+(v.with_photo?"active":""),onClick:()=>T({...v,with_photo:!v.with_photo}),children:"With Photo"}),e.jsx("div",{className:"video "+(v.with_video?"active":""),onClick:()=>T({...v,with_video:!v.with_video}),children:"With Video"})]}),e.jsx("div",{className:"comments",children:c==null?void 0:c.list.map(k=>e.jsx(Z,{comment:k,canOpen:!0,onClick:D=>{const G=D==null?void 0:D.comment;G&&(h().keepJson().setAbsPath(["products","detail","images"]),l({comment:G,relative:D.relative}))}},k.id))})]})}function qe({product:n}){var x,y,A,H,W;const{current:s,navBack:t,pathList:a}=B(),{getCommentIndex:c,index:i,setIndex:o}=ee(),[l,r]=m.useState(null),[d,p]=m.useState((i==null?void 0:i.relative)||0),[h,_]=m.useState(),[j]=m.useState({}),[u,E]=m.useState(!1),[C,R]=m.useState({move:"",comment_id:i==null?void 0:i.comment.id});m.useEffect(()=>{s("images")&&n&&c({product_id:n.id,comment_id:C.comment_id||(i==null?void 0:i.comment.id),move:C.move||void 0}).then(b=>{var M;if(console.log({res:b}),(M=b==null?void 0:b.comment)!=null&&M.id){if(C.move=="back")p(b.comment.photos_count+b.comment.videos_count-1);else if(C.move=="next")p(0);else{let v=((i==null?void 0:i.relative)??d)||0;const T=b.comment.photos_count+b.comment.videos_count;v=v<=0?0:v>=T-1?T-1:v,p(v)}C.move="",C.comment_id=void 0,_(b)}})},[C,i,a]),m.useEffect(()=>{s("images")&&(R({comment_id:void 0,move:""}),_(void 0),console.log({commentIndex:h}))},[n,a]),m.useEffect(()=>{j.init||(j.init=!0,window.addEventListener("keyup",b=>{b.code=="ArrowRight"?j.moveNext():b.code=="ArrowLeft"&&j.moveBack()}))},[]);const N=()=>{d<=0?(console.log("back comment "),h&&R({...C,comment_id:h.comment.id,move:"back"})):(console.log("back image "),p(d-1))},f=()=>{d>=S.length-1?(console.log("next comment "),h&&R({...C,comment_id:h.comment.id,move:"next"})):(console.log("next image "),p(d+1))};j.moveNext=f,j.moveBack=N;const S=[...((x=h==null?void 0:h.comment)==null?void 0:x.photos)||[],...((y=h==null?void 0:h.comment)==null?void 0:y.videos)||[]];return s("images")&&!(h!=null&&h.comment)?e.jsxs("div",{className:"image-not-found",children:[e.jsx("p",{className:"text",children:"no images or videos found for this product."}),e.jsxs("div",{onClick:()=>t(),children:[e.jsx("span",{}),"go back"]})]}):s("images")&&(h==null?void 0:h.comment)&&e.jsxs("section",{className:"page-comment-image "+(s("images")?"open":"close"),children:[e.jsxs("div",{className:"page-top",children:[e.jsx("div",{className:"return",style:{filter:L("#fff").result.filter},onClick:()=>t()}),e.jsxs("div",{className:"count",children:[((h==null?void 0:h.befor)||0)+d," / ",(h==null?void 0:h.total)||0]})]}),e.jsxs("div",{className:"file-view _flex _center",children:[d>(((A=h==null?void 0:h.comment)==null?void 0:A.photos_count)||0)-1?e.jsx("div",{className:"video _flex",ref:b=>{if(!b||b.dataset.init)return;b.dataset.init="init",r(b);const M=()=>{const v=b.querySelector("video"),T=b.getBoundingClientRect();v.width=T.width};window.addEventListener("resize",M)},children:e.jsx("video",{loop:!0,autoPlay:!0,controls:!0,width:l==null?void 0:l.getBoundingClientRect().width,src:`${$}${S[d]}`})}):e.jsx("div",{className:"photo",children:e.jsx("div",{className:"img",style:{background:F(S[d],"100%")}})}),e.jsx("div",{className:"move-next",onClick:f,children:e.jsx("div",{className:"next",children:e.jsx("span",{})})}),e.jsx("div",{className:"move-back",onClick:N,children:e.jsx("div",{className:"back",children:e.jsx("span",{})})})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"top _flex _wrap",children:[e.jsx("div",{className:"name",children:Y(((H=h==null?void 0:h.comment.user)==null?void 0:H.name)||"",50)}),e.jsxs("div",{className:"_flex  _l-auto",children:[e.jsx(me,{note:((W=h==null?void 0:h.comment)==null?void 0:W.note)||0}),e.jsx("div",{className:"open",onClick:()=>E(!0),children:"Open"})]})]}),e.jsx("div",{className:"message",children:Y((h==null?void 0:h.comment.text)||"",100)}),e.jsxs("div",{className:"preview-comment "+(u?"open":"close"),children:[e.jsx("div",{className:"close",onClick:()=>{E(!1)}}),e.jsx(Z,{comment:h.comment,canOpen:!0,onClick:b=>{const M=b==null?void 0:b.comment;M&&o({comment:M,relative:b.relative})}})]})]})]})}function ye({mode:n}){const{pathList:s,qs:t}=B(),{visites:a,fetchVisites:c}=J(),{openChild:i}=oe(),{user:o}=w();return m.useEffect(()=>{!a&&o&&c({})},[o,s]),e.jsxs("div",{className:"comp-visites "+(n||"h"),children:[e.jsxs("h1",{className:"title",children:["Products Visited",e.jsx("span",{})]}),e.jsxs("div",{className:"list",ref:he({posistion:20}),children:[!o&&e.jsx("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>i(e.jsx(se,{}),!0,"#fffc"),children:"Connexion required"}),a==null?void 0:a.list.map(l=>e.jsx(de,{aspect:n=="v"?1.4:void 0,mode:"inlist",product:l,onClick:()=>{t({product_id:l.id}).setAbsPath(["products","detail"])}},l.id))]})]})}function _e({mode:n}){const{qs:s}=B(),{product:t,fetchProducts:a}=J(),{store:c}=w(),[i,o]=m.useState();return m.useEffect(()=>{a({no_save:!0,category_id:t==null?void 0:t.category_id}).then(l=>{l!=null&&l.list&&o(l)})},[t,c]),e.jsxs("div",{className:"more-products "+(n||"h"),children:[e.jsxs("h1",{className:"title more",children:["More Products",e.jsx("span",{})]}),e.jsx("div",{className:"list",ref:he({posistion:20}),children:i==null?void 0:i.list.map(l=>e.jsx(de,{aspect:n=="v"?1.4:void 0,mode:"inlist",product:l,active:(t==null?void 0:t.id)==l.id,onClick:()=>{s({product_id:l.id}).setAbsPath(["products","detail"])}},l.id))})]})}const ve={more:!0,list:["/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1mieub_19ahe0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hvrng7iv_29tvf0_products_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg","/fs/1hv1lpqtk_27y870_products_model_images_05e7dc8e-f409-46ae-91cc-6a125add8c5b.jpg"]};let U;function Me(){var G,ue,pe,xe;const{json:n,qs:s,check:t,current:a}=B(),{setProductById:c,product:i,selectProduct:o,products:l,fetchProducts:r,setProducts:d}=J(),{fetchProductComments:p,setLastPage:h}=ee(),{addProductToCart:_}=I(),j=m.useRef(null),u=m.useRef(null),E=m.useRef(null),[C,R]=m.useState(!0),[N,f]=m.useState(0),[S,x]=m.useState(!1),[y,A]=m.useState(),[H,W]=m.useState(!1),[b]=m.useState(),[M]=m.useState({payment_id:"lol"}),[v,T]=m.useState(null),[q,te]=m.useState(),[k]=m.useState({});m.useEffect(()=>{t("detail")&&(n!=null&&n.product_id)&&n.product_id!=k.product_id&&(k.product_id=n.product_id,c(n))},[n]),m.useEffect(()=>{i&&t("detail")&&(x(!1),f(0),U==null||U(0),s().keepJson().setAbsPath(["products","detail"]))},[i]),m.useEffect(()=>{i&&t("detail")&&(console.log("new Comments fech"),p({product_id:i.id,no_save:!0,limit:4}).then(g=>te(g)))},[i]),m.useEffect(()=>{if(v){if(v.dataset.init)return;v.dataset.init="init",v.addEventListener("scroll",()=>{v.scrollTop>200?W(!0):W(!1)})}},[v]);const D=()=>{i&&r({add_cart:!0,product_id:i.id,no_save:!0}).then(g=>{if(g!=null&&g.list[0].id){const P={...g==null?void 0:g.list[0]};l&&d({...l,list:l==null?void 0:l.list.map(O=>O.id==(g==null?void 0:g.list[0].id)?P:O)}),(i==null?void 0:i.id)==(g==null?void 0:g.list[0].id)&&o(P)}})};return i&&e.jsxs("div",{className:"detail-product "+(i?"open":""),children:[i&&e.jsx(Ae,{userComment:b,userCommand:M,setRef:T,product:i}),i&&e.jsx(qe,{product:i}),e.jsxs("section",{className:"detail "+(a("products")||a("detail")?"open":"close"),ref:E,children:[e.jsxs("div",{className:"top-top _flex",children:[e.jsx("div",{className:"return",ref:g=>{if(!g||g.dataset.init)return;g.dataset.init="init";const P=()=>{window.innerWidth>940?g.style.display=" none":g.style.display="flex"};window.addEventListener("resize",P),P()},onClick:()=>{o(void 0)}}),e.jsx("div",{className:"label _lr-auto",children:"Detail Product"})]}),e.jsxs("div",{className:"top-infos",ref:g=>{if(!g||g.dataset.init)return;g.dataset.init="init";const P=g.querySelector(".images"),O=g.querySelector(".infos"),z=()=>{g.getBoundingClientRect().width<700?(g.style.flexWrap="wrap",P.style.width="",P.style.minWidth="",P.style.maxWidth="",O.style.width="",O.style.minWidth="",O.style.maxWidth=""):(g.style.flexWrap="",P.style.width="50%",P.style.minWidth="50%",P.style.maxWidth="50%",O.style.width="50%",O.style.minWidth="50%",O.style.maxWidth="50%")};window.addEventListener("resize",z),setTimeout(()=>{z(),U==null||U(0)},200)},children:[e.jsxs("div",{className:"images",children:[e.jsxs("div",{className:"list",ref:ge(g=>{U=g},f),children:[e.jsx("div",{className:"gap"}),i==null?void 0:i.images.map((g,P)=>e.jsx("div",{className:"img card-h-c "+(N==P?"active":""),style:{background:F(g)},onClick:()=>{U==null||U(P),f(P)}},g+(i==null?void 0:i.id))),e.jsx("div",{className:"gap"})]}),e.jsx("div",{className:"min-list",children:i==null?void 0:i.images.map((g,P)=>e.jsx("div",{className:"min-img "+(N==P?"active":""),style:{background:F(g)},onClick:()=>{f(P),U==null||U(P)}},g+(i==null?void 0:i.id)))})]}),e.jsx("div",{className:"infos",ref:j,children:e.jsxs("div",{className:"diff",ref:u,children:[e.jsxs("div",{className:"text "+(y&&C?"min":""),children:[e.jsxs("div",{className:"title",children:[i==null?void 0:i.title,e.jsx("span",{})]}),e.jsx("p",{className:"description",children:((i==null?void 0:i.description.length)||0)>100&&!S?e.jsxs(e.Fragment,{children:[Y((i==null?void 0:i.description)||"",100)," ",e.jsx("span",{onClick:()=>x(!0),children:"Read more"})]}):(i==null?void 0:i.description)||""})]}),(i==null?void 0:i.features)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"label-features",children:["Features",e.jsxs("span",{children:[" ",(y==null?void 0:y.name)&&" : "+(y==null?void 0:y.name)]})," ",y&&e.jsx("span",{className:"close",style:{filter:((G=L("#112233"))==null?void 0:G.result.filter)||""},onClick:()=>{A(void 0)}})]}),e.jsx("div",{className:"features",children:i==null?void 0:i.features.list.map(g=>{var P;return e.jsxs("div",{className:"feature "+((y==null?void 0:y.id)==g.id?"active":""),style:{filter:((P=L("#358f27"))==null?void 0:P.result.filter)||""},onClick:()=>{var O,z;if(!y){const X=((O=j.current)==null?void 0:O.getBoundingClientRect().height)||0,K=((z=u.current)==null?void 0:z.getBoundingClientRect().height)||0;X-K<150?R(!0):R(!1)}(y==null?void 0:y.id)==g.id?A(void 0):A(g)},children:[e.jsx("div",{className:"icon",style:{background:F(g.icon)}}),e.jsx("div",{className:"label",children:Y(g.name,10)})]},g.id)})})]}),y&&e.jsxs("div",{className:"label-components",children:["Components: ",e.jsx("span",{children:(pe=(ue=i==null?void 0:i.featuresCollector)==null?void 0:ue.allCollectedFeatures()[y.id])==null?void 0:pe.name})]}),e.jsx("div",{className:"components "+(y?"open":""),children:(xe=y==null?void 0:y.components)==null?void 0:xe.map(g=>{var P,O;return e.jsxs("div",{className:"component "+(((O=(P=i==null?void 0:i.featuresCollector)==null?void 0:P.allCollectedFeatures()[y.id])==null?void 0:O.id)==g.id?"active":""),onClick:()=>{var z,X,K,fe;((X=(z=i==null?void 0:i.featuresCollector)==null?void 0:z.allCollectedFeatures()[y.id])==null?void 0:X.id)==g.id?(K=i==null?void 0:i.featuresCollector)==null||K.collectFeature(y,void 0):(fe=i==null?void 0:i.featuresCollector)==null||fe.collectFeature(y,g)},children:[e.jsx("div",{className:"icon",style:{background:F(g.icon[0],"contain")}}),e.jsx("div",{className:"label",children:Y(g.name,10)})]})})})]})})]}),e.jsxs("div",{className:"detail-box",children:[e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"title",children:["product reviews",e.jsx("span",{})]}),i&&e.jsx(Ce,{onClick:()=>{h(""),s().keepJson().setAbsPath(["products","detail","images"])},product:i}),e.jsxs("div",{className:"title",children:["Comments",e.jsx("span",{})]}),e.jsxs("div",{className:"min-comments",ref:he({posistion:20}),children:[q==null?void 0:q.list.map(g=>e.jsx(Z,{comment:g,onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])}},g.id)),e.jsxs("div",{className:"more-comment "+(q!=null&&q.list.length||0>0?"":"horizontal"),onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])},children:[e.jsx("div",{className:"icon "+(q!=null&&q.list.length||0>0?"":"add"),children:e.jsx("span",{style:{filter:L("#ffffff").result.filter}})}),e.jsx("div",{className:"label",children:q!=null&&q.list.length||0>0?"More":"Add First Comment"})]})]})]}),e.jsx(ye,{}),e.jsx(_e,{})]})]}),a("detail")&&e.jsx("div",{className:"price-zone",children:e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"price",children:[e.jsx("div",{children:"Price"}),e.jsxs("div",{className:"value",children:[(i==null?void 0:i.price)||0," $"]})]}),i.quantity!=null&&i.quantity!=null&&parseInt(i.quantity+"")!=0&&i.quantity.toString()!="0"?e.jsx(re,{canNull:!0,product:i,onChange:()=>{D()}}):e.jsxs("div",{className:"add-to-cart",onClick:()=>_({product_id:i.id,quantity:1}).then(g=>{g!=null&&g.id&&D()}),children:["Add ",e.jsx("span",{children:" to cart"})]})]})}),a("comments")&&(H||(M==null?void 0:M.payment_id)&&!b)&&e.jsxs("div",{className:"write-zone",children:[H&&e.jsx("div",{className:"up-icon",onClick:()=>{v&&(v.scrollTop=0)},children:e.jsx("span",{})}),e.jsx("div",{className:"write-icon",children:e.jsx("span",{})})]})]})}function Ce({product:n,onClick:s}){const{qs:t}=B();return e.jsxs("div",{className:"group-file-rating",children:[e.jsx("div",{className:"after-order",children:e.jsxs("div",{className:"ctn-mini-files",onClick:s,children:[ve.list.map((a,c)=>e.jsx("div",{className:"w",children:e.jsx("div",{className:"mini-file",style:{background:F(a)}})},c)),e.jsx("div",{className:"back",style:{background:F(ve.list[0])},children:e.jsx("div",{className:"more-files",children:"+ More"})})]})}),(n==null?void 0:n.note)&&e.jsxs("div",{className:"rating",onClick:()=>t().keepJson().setAbsPath(["products","detail","comments"]),children:[e.jsx("div",{className:"note",children:n.note.star}),e.jsx(me,{note:n.note.star}),e.jsxs("div",{className:"vote",children:[n.note.votes," ",e.jsx("span",{})]})]})]})}const Te=V(n=>({categories:void 0,async fetchCategoies(s){console.log({filter:s});const t=w.getState().store;if(!t)return;const a={...s};a.store_id=t.id;const c=new URLSearchParams({});for(const l in a){const r=a[l];c.set(l,r)}const o=await(await fetch(`${$}/get_categories/?${c.toString()}`)).json();if(o!=null&&o.list)return s!=null&&s.no_save||n(()=>({categories:o})),{...o}}}));let Q="";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?Q="mobile-device":Q="not-mobile-device";document.body.classList.add(Q);const le=Q,Fe=(n,s)=>{let t=!1;for(const a in s)n[a]!=s[a]&&(t=!0,n[a]=s[a]);return delete n.product_id,t};function De(){const{json:n,qs:s,check:t,pathList:a}=B(),{products:c,fetchProducts:i,selectProduct:o,product:l}=J(),{store:r}=w(),[d,p]=m.useState({order_by:"date_desc",category_id:"",limit:4,add_cart:!0,price_min:void 0,price_max:void 0,text:"",product_id:""}),{fetchCategoies:h}=Te(),[_,j]=m.useState(),[u]=m.useState({}),[E,C]=m.useState(!1);m.useEffect(()=>{t("products")&&i({...d}).then(f=>{f!=null&&f.list[0]&&!l&&window.innerWidth>940&&(o(f==null?void 0:f.list[0]),s({...n,product_id:f.list[0].id}).setAbsPath(["products","detail"]))})},[d,r,a]),m.useEffect(()=>{!_&&h({limit:25,no_save:!0}).then(f=>{f!=null&&f.list&&j(f)})},[r]),m.useEffect(()=>{t("products")&&Fe(d,n||{})&&p({...d})},[n]),m.useEffect(()=>{window.addEventListener("resize",()=>{var f;window.innerWidth>940&&!u.product&&o((f=u.products)==null?void 0:f.list[0])})},[]),u.product=l,u.products=c;const[R,N]=m.useState("");return m.useEffect(()=>{window.addEventListener("resize",()=>{N(`${window.innerWidth} / ${window.innerHeight}  / ${window.screen.height} => ${le}`)}),N(`${window.innerWidth} / ${window.innerHeight} / ${window.devicePixelRatio}  => ${le}`)},[]),t("products")&&e.jsxs("div",{className:"page-products",children:[e.jsx("div",{className:"left "+(E?"open":"")+" "+(t("detail")&&l?"product-detail":""),onClick:()=>{C(!1)},children:e.jsxs("div",{className:"filter-fram",children:[e.jsx("div",{className:"top",children:"Filter"}),e.jsx("div",{className:"categories",children:_==null?void 0:_.list.map(f=>e.jsx("div",{className:"category",onClick:()=>p({...d,category_id:f.id}),children:f.label},f.id))}),e.jsxs("div",{className:"prices",children:[e.jsxs("div",{className:"ctn",children:[e.jsx("label",{htmlFor:"product-price-min",children:e.jsx("input",{type:"text",id:"product-price-min",placeholder:"Min",value:d.price_min})}),e.jsx("label",{htmlFor:"product-price-max",children:e.jsx("input",{type:"text",id:"product-price-max",placeholder:"Max",value:d.price_max})})]}),e.jsx("div",{className:"set-price",children:e.jsx("div",{className:"btn",children:"Set Price"})})]})]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"search-zone",children:[e.jsxs("label",{htmlFor:"product-search",className:"search",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{id:"product-search",type:"text",placeholder:"Search Product",value:d.text,onChange:f=>{p({...d,text:f.currentTarget.value})}}),e.jsx("div",{className:"clear",onClick:()=>{p({...d,text:""})}})]}),e.jsx("div",{className:"search-text",children:d.text&&e.jsxs(e.Fragment,{children:['Search result for "',e.jsx("span",{children:d.text}),'"']})}),e.jsxs("div",{className:"sort",children:[e.jsx("div",{className:"label",onClick:()=>{C(!0)},children:"Sort"}),e.jsx("div",{className:"list",children:["date","name","price","popular"].map(f=>{var S;return e.jsx("div",{className:((S=(n==null?void 0:n.order_by)||d.order_by)==null?void 0:S.split("_")[0])==f?"active":"",onClick:()=>{s({...n,order_by:f+"_desc"}).apply()},children:f},f)})})]})]}),e.jsx("div",{className:"list",children:c==null?void 0:c.list.map(f=>e.jsx(de,{canAddToCart:f.title.includes("321"),product:f,active:(l==null?void 0:l.id)==f.id,onClick:()=>{o({...f}),s({...n,product_id:f.id}).setAbsPath(["products","detail"])}},f.id))})]}),e.jsx("div",{className:"right "+(l?"product":"")+" "+(t("detail")?"detail":""),children:e.jsx(Me,{})})]})}function Oe(){var _;const{setAbsPath:n,pathList:s}=B(),[t,a]=m.useState(s[1]||"home"),[c,i]=m.useState(!1),[o,l]=m.useState(!1),{user:r,getAccess:d}=w(),p=be(),h=j=>{n([j]),a(j)};return m.useEffect(()=>{a(s[1]||"home")},[s]),m.useEffect(()=>{window.addEventListener("click",()=>{const j=document.querySelector(".top-bar .more-navs ul");(j==null?void 0:j.className)==""&&l(!1)})},[]),e.jsxs("div",{className:"top-bar",ref:Se(80,".web"),children:[e.jsxs("div",{className:"top-bar-ctn",children:[e.jsx("div",{className:"left",children:e.jsx("a",{href:"#products",className:"logo-ctn",onClick:j=>{j.preventDefault(),j.stopPropagation(),h("products")},children:e.jsx("div",{className:"icon"})})}),e.jsx("ul",{className:"top-bar-center",children:ce.map((j,u)=>u*150<p.width-400?e.jsxs("li",{className:t==j.u?"active":"",onClick:()=>{h(j.u)},children:[e.jsx("span",{}),j.n]},u):null)}),e.jsxs("div",{className:"right",children:[e.jsx("div",{className:"ctn-icon",onClick:j=>{j.preventDefault(),j.stopPropagation(),l(!o)},children:e.jsx("div",{className:"icon",style:{filter:L("#345").result.filter}})}),r?e.jsx("div",{className:"profile",style:{background:`no-repeat center/cover url(${(_=r==null?void 0:r.photos[0])!=null&&_.startsWith("/")?$:""}${r==null?void 0:r.photos}),#bbb`},onClick:()=>{h("profile")}}):e.jsx("div",{className:"login",onClick:()=>d(),children:"Se connecter"})]})]}),e.jsx("div",{className:"more-navs",onClick:j=>{j.preventDefault(),j.stopPropagation()},children:e.jsxs("ul",{className:o?"":"close",children:[ce.map((j,u)=>u*150>=p.width-400?e.jsxs("li",{className:t==j.u?"active":"",onClick:()=>{h(j.u),l(!o)},children:[e.jsx("span",{}),j.n]},u):null),e.jsxs("li",{className:t=="mode-lite"?"active":"",style:{whiteSpace:"nowrap"},onClick:()=>{i(!c)},children:[e.jsx("span",{}),c?"Lite mode off":"Lite mode on"]})]})})]})}function Be(){const{check:n,setAbsPath:s}=B();return e.jsx("div",{className:"bottom-nav",children:e.jsx("ul",{children:ce.map((t,a)=>e.jsxs("li",{className:t.u+" "+(n(t.u)?"active":""),onClick:()=>s([t.u]),children:[e.jsx("span",{className:"label",children:t.n}),e.jsx("span",{className:"icon "+t.u})]},a))})})}function He(){const{check:n}=B();return n("categories")&&e.jsx("div",{className:"page-categories"})}function Ue(){const{check:n}=B(),{user:s}=w();return n("favorites")&&(s?e.jsx(e.Fragment,{}):e.jsx("div",{className:"page-favorites",children:e.jsx(se,{detail:"Google connexion is required to access your favorites"})}))}function We(){const{check:n,pathList:s,navBack:t,setAbsPath:a}=B(),{visites:c,fetchVisites:i}=J(),{current:o}=B(),{user:l}=w(),{carts:r,fetchCarts:d,deleteCommand:p,confirmCommand:h}=I(),[_,j]=m.useState(0),[u,E]=m.useState(0),[C,R]=m.useState(0),[N,f]=m.useState((r==null?void 0:r.list.map(x=>x))||[]),[S]=m.useState({});return S.selecteds=N,m.useEffect(()=>{let x=0,y=0;N.forEach(A=>{x+=Number(A.quantity),y+=A.price*A.quantity}),E(y),R(x)},[_,N]),m.useEffect(()=>{f((r==null?void 0:r.list.filter(x=>!!S.selecteds.find(y=>y.id==x.id)))||[])},[r]),m.useEffect(()=>{l&&o("cart")&&d({}).then(x=>{x!=null&&x.list&&f(x.list)}),!c&&l&&o("cart")&&i({})},[l,s]),n("cart")&&(l?e.jsxs("div",{className:"page-cart",children:[e.jsxs("div",{className:"top-cart _flex",children:[e.jsx("div",{className:"return",onClick:()=>{t()}}),e.jsx("div",{className:"label _lr-auto",children:"Cart"})]}),e.jsxs("div",{className:"cart-ctn",children:[e.jsxs("div",{className:"items",children:[e.jsxs("div",{className:"select-all",children:[e.jsx("div",{className:"btn "+(N.length<((r==null?void 0:r.list.length)||0)?"":"select"),onClick:()=>{N.length<((r==null?void 0:r.list.length)||0)?f((r==null?void 0:r.list.map(x=>x))||[]):f([])},children:N.length<((r==null?void 0:r.list.length)||0)?"Select All":"Deselect All"}),e.jsxs("a",{className:"my-command ",onClick:()=>a(["profile","command"]),children:["my orders ",e.jsx("span",{})]})]}),r==null?void 0:r.list.map(x=>e.jsx(Ie,{selected:!!N.find(y=>y.id==x.id),cart:x,onSelect:y=>{N.find(A=>A.id==y.id)?f(N.filter(A=>A.id!=y.id)):f([...N,y])},onDelete:y=>{p(y.id)},onQuantityChange:()=>{j(_+1)}},x.id))]}),e.jsxs("div",{className:"go-to-checkout",children:[e.jsx("div",{className:"title",onClick:()=>{h({list:N.map(x=>x.id)})},children:"Go to checkout"}),e.jsx("p",{children:"Available delivery methods and times can be selected when placing an order."}),e.jsxs("div",{className:"infos",children:[e.jsxs("div",{className:"count",children:[e.jsx("h2",{children:"Your cart"}),e.jsxs("div",{className:"val",children:[C," products ",e.jsx("span",{})," "]})]}),e.jsxs("div",{children:[e.jsxs("span",{children:["Products (",N.length,")"]}),e.jsxs("span",{className:"initial-price",children:[u.toLocaleString(),"$"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text",children:[e.jsx("div",{children:"Discount"}),e.jsxs("div",{className:"detail",children:["More details ",e.jsx("span",{})]})]}),e.jsxs("span",{className:"discount",children:[0 .toLocaleString(),"$"]})]})]}),e.jsxs("div",{className:"_flex",children:[e.jsx("h1",{children:"total cost"}),e.jsxs("h1",{className:"total",children:[u.toLocaleString(),"$"]})]})]})]}),e.jsx(ye,{mode:"h"}),e.jsx(_e,{mode:"h"})]}):e.jsx("div",{className:"page-cart",children:e.jsx(se,{detail:"Google connexion is required to access your cart"})}))}let ne={metal:"gold",gem:"Diamon",size:56};function Ie({cart:n,selected:s,onClick:t,onSelect:a,onDelete:c,onLike:i,onShare:o,onQuantityChange:l}){return e.jsx("div",{className:"cart-item",onClick:()=>t==null?void 0:t(n),children:e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"image",style:{background:F(n.images[0])}}),e.jsxs("div",{className:"info-right  _limit-text",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"a",children:[e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:n.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:n.description})]}),e.jsxs("div",{className:"features",children:[Object.keys({...ne}).slice(0,2).map(r=>e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"k",children:r}),":",e.jsx("span",{className:"v",children:(ne||{})[r]})]},r)),Object.keys(ne||{}).length>2&&e.jsxs("div",{className:"all-features",children:["See more ",e.jsx("span",{})]})]})]}),e.jsx("div",{className:"price ",children:e.jsxs("span",{className:"current",children:[(n.price*n.quantity).toLocaleString()," ","$"]})}),e.jsx(re,{cart:n,onChange:()=>{l==null||l(n)}})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"options",children:[e.jsx("div",{style:{filter:L("#123").result.filter},className:"to-favorites",onClick:()=>i==null?void 0:i(n),children:e.jsx("span",{})}),e.jsx("div",{style:{filter:L("#123").result.filter},className:"delete",onClick:()=>{c==null||c(n)},children:e.jsx("span",{})}),e.jsx("div",{style:{filter:L("#123").result.filter},className:"share",onClick:()=>o==null?void 0:o(n),children:e.jsx("span",{})})]}),e.jsx("div",{className:"check-box "+(s?"selected":""),onClick:()=>a==null?void 0:a(n),children:s?"selected":"not selected"})]})]})]})})}const ze={};function Ve(){const{store:n}=w(),{commands:s,fetchCommands:t}=I();return m.useEffect(()=>{n&&t({})},[n]),e.jsx("div",{className:"page-command",children:e.jsx("div",{className:"orders",children:s==null?void 0:s.list.map(a=>e.jsx(Je,{order:a,onShare:()=>{},onClick:()=>{},onLike:()=>{}},a.id))})})}let ae={metal:"gold",gem:"Diamon",size:56};function Je({order:n,onClick:s,onLike:t,onShare:a,onComment:c}){return e.jsx("div",{className:"order-item",onClick:()=>s==null?void 0:s(n),children:e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"image",style:{background:F(n.images[0])}}),e.jsxs("div",{className:"info-right  _limit-text",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"a",children:[e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:n.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:n.description})]}),e.jsxs("div",{className:"features",children:[Object.keys({...ae}).slice(0,2).map(i=>e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"k",children:i}),":",e.jsx("span",{className:"v",children:(ae||{})[i]})]},i)),Object.keys(ae||{}).length>2&&e.jsxs("div",{className:"all-features",children:["See more ",e.jsx("span",{})]})]})]}),e.jsx("div",{className:"price ",children:e.jsxs("span",{className:"current",children:[(n.price*n.quantity).toLocaleString()," ","$"]})}),e.jsx("div",{className:"status",style:{background:ze[n.status]},children:n.status})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"options",children:[e.jsx("div",{style:{filter:L("#123").result.filter},className:"to-favorites",onClick:()=>t==null?void 0:t(n),children:e.jsx("span",{})}),e.jsx("div",{style:{filter:L("#123").result.filter},className:"start-comment",onClick:()=>{c==null||c(n)},children:e.jsx("span",{})}),e.jsx("div",{style:{filter:L("#123").result.filter},className:"share",onClick:()=>a==null?void 0:a(n),children:e.jsx("span",{})})]}),e.jsxs("div",{className:"ref-id",onClick:i=>{navigator.clipboard.writeText("#"+n.id.split("-")[0]);const l=i.currentTarget.querySelector("span");l.classList.add("anim-top"),setTimeout(()=>{l.classList.remove("anim-top"),l.classList.add("anim-btm"),setTimeout(()=>{l.classList.remove("anim-btm")},300)},300)},children:["Ref Id : #",n.id.split("-")[0]," ",e.jsx("span",{style:{filter:L("#333").result.filter}})]})]})]})]})})}const je={edit:"Edit Profile",command:"Orders",messages:"Messages",setting:"Setting"};function Ge(){const{check:n,json:s}=B(),{user:t,disconnection:a,getAccess:c}=w(),[i,o]=m.useState(!0),[l,r]=m.useState("");m.useEffect(()=>{n("profile")&&r((s==null?void 0:s.page)||"")},[s]);const d={command:e.jsx(Ve,{})};return n("profile")&&e.jsxs("div",{className:"page-profile",children:[e.jsx("div",{className:"nav "+(i?"open":"close"),onClick:()=>{o(!1)},children:e.jsxs("div",{className:"nav-ctn",onClick:p=>{p.preventDefault(),p.stopPropagation()},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"close",onClick:()=>{o(!1)}}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cover-image"}),e.jsx("div",{className:"photo",style:{background:(t==null?void 0:t.photos[0])&&F(t==null?void 0:t.photos[0])}})]}):e.jsxs("div",{className:"login",onClick:()=>{c()},children:[e.jsx("div",{className:"icon",style:{}}),e.jsx("h3",{className:"label",children:"Login"}),e.jsx("span",{className:"next"})]})]}),e.jsx("h1",{className:"name",children:t==null?void 0:t.name}),t&&e.jsx("div",{className:"email _limit-text",children:t==null?void 0:t.email}),e.jsxs("ul",{children:[e.jsxs("li",{className:"edit "+(l=="edit"?"active":"")+" "+(t?"":"hide"),onClick:()=>{o(!1),r("edit")},children:[" ",e.jsx("span",{className:"icon",style:{filter:L("#123").result.filter}}),"Edit Profile",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"command "+(l=="command"?"active":"")+" "+(t?"":"hide"),onClick:()=>{o(!1),r("command")},children:[" ",e.jsx("span",{className:"icon",style:{filter:L("#123").result.filter}}),"My Orders",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"messages "+(l=="messages"?"active":"")+" "+(t?"":"hide"),onClick:()=>{o(!1),r("messages")},children:[" ",e.jsx("span",{className:"icon",style:{filter:L("#123").result.filter}}),"messages",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"setting "+(l=="setting"?"active":"")+" "+(t?"":"hide"),onClick:()=>{o(!1),r("setting")},children:[" ",e.jsx("span",{className:"icon",style:{filter:L("#123").result.filter}}),"setting",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"about "+(l=="about"?"active":""),onClick:()=>{o(!1),r("about")},children:[" ",e.jsx("span",{className:"icon",style:{filter:L("#123").result.filter}}),"about",e.jsx("span",{className:"next"})]})]}),e.jsx("div",{className:"version",children:"By Sublymus Studio v:1.0.1"}),t&&e.jsxs("div",{className:"disconnect",onClick:()=>{a()},children:[e.jsx("span",{className:"icon",style:{filter:L("#c43d4c").result.filter}}),"Log out"]})]})}),e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"title",children:[e.jsx("span",{className:"option-nav",onClick:()=>{o(!0)}}),e.jsxs("h1",{children:[" ",je[l]||je.edit]})]}),d[l]]})]})}function Xe(){const{authenticateUser:n}=w(),{openChild:s,currentChild:t,back_color:a,blur:c}=oe(),i=m.useRef(null),{pathList:o}=B();return m.useEffect(()=>{s(void 0)},[o]),m.useEffect(()=>{n(),window.addEventListener("blur",()=>{s(void 0)})},[]),e.jsxs("div",{className:"app",style:{width:"100%",height:"100%"},ref:l=>{},children:[t&&e.jsx("div",{className:"child-viewer",onContextMenu:l=>{l.preventDefault(),s(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:a},onClick:()=>{s(void 0)},onContextMenu:l=>{l.preventDefault(),s(void 0)},children:t})}),e.jsx(Oe,{}),e.jsxs("div",{ref:i,className:"app-ctn",style:{filter:c?"blur(10px)":"",height:`calc(100% - var(--bottom-nav-height) - ${le=="mobile-device"?window.screen.height-window.innerHeight:0}px)`},children:[e.jsx(De,{}),e.jsx(He,{}),e.jsx(Ue,{}),e.jsx(We,{}),e.jsx(Ge,{})]}),e.jsx(Be,{})]})}const Ye=n=>n,es=Ye(e.jsx(ke.StrictMode,{children:e.jsx(Xe,{})}));export{es as ClientView};

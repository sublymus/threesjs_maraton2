import{c as K,S as Fe,j as e,g as B,L as G,l as ie,u as Ae,b as qe}from"./BindToParentScroll-wq_hAQJI.js";import{H as $,r as u,R as Le}from"./index-BEcpemk-.js";import{t as P,S as Te}from"./SearchFilterBindJson-BZbWq4O4.js";import{f as Re}from"./DataBase-Y_pan52e.js";const C=K(t=>({user:void 0,store:void 0,userStore:void 0,manager:void 0,openAuth:!1,async updateUser(i){const s=C.getState().getHeaders();if(!s)return;const a=new FormData;i.photos_0=i.photo,delete i.photo;for(const r in i)i[r]&&a.append(r,i[r]);a.append("photos",'["photos_0"]');const c=await(await fetch(`${$}/edit_me`,{method:"PUT",body:a,headers:s.headers})).json();console.log({user:c}),c.id&&(t(()=>({user:c})),localStorage.setItem("user",JSON.stringify({...s.user,...c})))},async disconnection(){const i=C.getState().getHeaders();if(!i)return;const s={method:"GET",headers:i.headers};await fetch(`${$}/disconnection`,s),localStorage.removeItem("user"),t(()=>({user:void 0,store:void 0,userStore:void 0,openAuth:!0}))},async getAccess(){window.open(`${$}/google_connexion`,void 0,"popup");const i=setInterval(()=>{const s=localStorage.getItem("user"),a=s&&JSON.parse(s);a&&(console.log("getAccess",{token:a.token}),t(()=>({user:a})),clearInterval(i),C.getState().authenticateUser())},100)},async authenticateUser(){let i=localStorage.getItem("user");const s=localStorage.getItem("store_name")||window.location.pathname.split("/")[1];try{if(i){const a=JSON.parse(i),l=new Headers;l.append("Authorization",`Bearer ${a.token}`);const c={method:"GET",headers:l},r=await fetch(`${$}/can_use_store/${s}`,c);let o;try{if(o=await r.json(),!o.store)return}catch{return}const n=(o==null?void 0:o.user)&&{...a,...o.user};t(()=>({user:n,manager:o.manager,userStore:o.userStore,store:o.store,openAuth:!1})),o!=null&&o.user&&localStorage.setItem("user",JSON.stringify(n));return}}catch{}await C.getState().getStore()},async getStore(){const i=localStorage.getItem("store_name")||window.location.pathname.split("/")[1];if(i){const s=await fetch(`${$}/get_store_by_name/${i}`);try{let a=await s.json();t(()=>({store:a})),console.log(a)}catch{}}},getHeaders(){const i=C.getState().store;if(!i)return;let s=C.getState().user;const a=new Headers;return a.append("Authorization",`Bearer ${s==null?void 0:s.token}`),{store:i,headers:a,user:s}}})),he=[{u:"products",n:"Home",i:"/src/res/application.png"},{u:"categories",n:"Categories",i:"/src/res/catalog.png"},{u:"favorites",n:"Favorites",i:"/src/res/shopping-cart.png"},{u:"cart",n:"Cart",i:"/src/res/chat.png"},{u:"profile",n:"Prolife",i:"/src/res/chat.png"}],De={"/":{loading:{},products:{detail:{comments:{},images:{}}},categories:{},favorites:{},cart:{payment:{}},profile:{command:{}}}},Z=K(t=>({T:localStorage.getItem("theme"),storeVar:void 0,usersVar:void 0,back_color:"",blur:!1,openNav:"max",setOpenNav(i){t(()=>({openNav:i}))},setT(i){i&&localStorage.setItem("theme",i),t(()=>({T:i}))},currentChild:void 0,openChild(i,s,a){t(()=>({currentChild:i,blur:s,back_color:i&&a||""}))}})),U=new Fe(De,["/","products"]).getStore(),Oe=(t,i)=>{const s=setInterval(()=>{let a=!1,l=t,c=0;for(;!a;){if(l==document.body){clearInterval(s),i(),a=!0;return}else l==null||c>100?a=!0:l=l.parentElement;c++}},100)},Se=(t,i)=>s=>{if(!s)return;if(s.dataset.init)return t==null?void 0:t(s.setIndex);s.dataset.init="init:"+Math.trunc(Math.random()*1e3)/1e3;const a=()=>{let l=0;const c=n=>{const d=s.querySelectorAll(".card-h-c");if(l=n,d.length<=0)return;l=l>=d.length?d.length-1:l<0?0:l;const m=s.getBoundingClientRect(),h=m.width,x=d[l].getBoundingClientRect(),g=x.x-m.x+x.width/2;s.scrollTo({behavior:"smooth",left:s.scrollLeft-(h/2-g)})};s.setIndex=c;const r=()=>{const n=s.getBoundingClientRect().width;c(l);const d=s.querySelectorAll(".gap");for(const m of d)m.style.width=`${n/2}px`,m.style.minWidth=`${n/2}px`,m.style.maxWidth=`${n/2}px`};window.addEventListener("resize",r),r();const o=.1;s.addEventListener("scrollend",()=>{const n=s.getBoundingClientRect(),d=n.width,m=d*o,v=s.querySelectorAll(".card-h-c")[l].getBoundingClientRect(),x=v.x-n.x+v.width/2;let g=l;x<d/2-m?(g=l+1,c(g)):x>d/2+m?(g=l-1,c(g)):c(l),i==null||i(g)}),t==null||t(c)};Oe(s,()=>{a()})},V=K(t=>({commands:void 0,carts:void 0,async deleteCommand(i){const s=C.getState().getHeaders();if(!s)return!1;if((await(await fetch(`${$}/delete_command/${i}`,{headers:s.headers,method:"DELETE"})).json()).deleted){const c=V.getState().carts;return t(()=>({carts:{limit:(c==null?void 0:c.limit)||25,page:(c==null?void 0:c.page)||1,total:(c==null?void 0:c.total)||0,list:((c==null?void 0:c.list)||[]).filter(r=>r.id!=i)}})),!0}return!1},async addProductToCart(i){const s=C.getState().getHeaders();if(!s||!(i.product_id||i.command_id))return;const a=new FormData,l={};a.append("store_id",s.store.id),i.product_id&&a.append("product_id",i.product_id+""),i.command_id&&a.append("command_id",i.command_id+""),i.quantity&&a.append("quantity",i.quantity+""),i.collected_features&&a.append("collected_features",JSON.stringify(i.collected_features));const c=new URLSearchParams({});for(const d in l){const m=l[d];c.set(d,m)}const o=await(await fetch(`${$}/add_command`,{method:"POST",headers:s.headers,body:a})).json();if(!o.id)return;const n=V.getState().carts;return t(()=>({carts:{limit:(n==null?void 0:n.limit)||25,page:(n==null?void 0:n.page)||1,total:(n==null?void 0:n.total)||0,list:[...((n==null?void 0:n.list)||[]).map(d=>d.id==o.id?o:d)]}})),o},async confirmCommand(i){const s=C.getState().getHeaders();if(!s)return!1;const a=new FormData;return i!=null&&i.list&&a.append("list",JSON.stringify(i.list)),(await(await fetch(`${$}/client_confirm_command`,{headers:s.headers,method:"PUT",body:a})).json()).success?(V.getState().fetchCarts({}),V.getState().fetchCommands({}),!0):!1},async fetchCarts(){const i=C.getState().getHeaders();if(!i)return;const s={};s.store_id=i.store.id,s.status="CART",s.add_favorite=!0;const a=new URLSearchParams({});for(const r in s){const o=s[r];a.set(r,o)}const c=await(await fetch(`${$}/get_commands/?${a.toString()}`,{headers:i.headers})).json();return t(()=>({carts:c})),c},async fetchCommands(){const i=C.getState().getHeaders();if(!i)return;const s={};s.store_id=i.store.id,s.no_status="CART",s.add_favorite=!0;const a=new URLSearchParams({});for(const r in s){const o=s[r];a.set(r,o)}const c=await(await fetch(`${$}/get_commands/?${a.toString()}`,{headers:i.headers})).json();return t(()=>({commands:c})),console.log(c),c}}));function le({cart:t,canNull:i,product:s,onChange:a}){var o,n;let[l,c]=u.useState(Number((t==null?void 0:t.quantity)||(s==null?void 0:s.quantity)||0)||0);const{addProductToCart:r}=V();return u.useEffect(()=>{c(Number((t==null?void 0:t.quantity)||(s==null?void 0:s.quantity)||0)||0)},[s,t]),e.jsxs("div",{className:"cart-quantity",onClick:d=>{d.preventDefault(),d.stopPropagation()},children:[e.jsx("div",{className:"min "+(l<=(i?0:1)?"bloc":""),onClick:()=>{let d=parseInt(l+"");d=d-1<(i?0:1)?i?0:1:d-1,c(d),console.log("counter===>>>> ",d),(s||t)&&r({product_id:s==null?void 0:s.id,command_id:t==null?void 0:t.id,quantity:d}).then(()=>{a==null||a(l)})},children:e.jsx("span",{style:{filter:l<=(i?0:1)||!1?P("#fff").result.filter:P("#358f27").result.filter}})}),e.jsx("div",{className:"count",children:l}),e.jsx("div",{className:"max "+(l>=(((o=s||t)==null?void 0:o.stock)||Number.MAX_VALUE)?"bloc":""),onClick:()=>{var m,h,v;let d=parseInt(l+"");d=d<(((m=s||t)==null?void 0:m.stock)||Number.MAX_VALUE)?d:((h=s||t)==null?void 0:h.stock)||Number.MAX_VALUE,d=d+1,!(d>parseInt((((v=s||t)==null?void 0:v.stock)||Number.MAX_VALUE)+""))&&(c(d),(s||s||t)&&r({product_id:s==null?void 0:s.id,command_id:t==null?void 0:t.id,quantity:d}).then(()=>{a==null||a(l)}))},children:e.jsx("span",{style:{filter:l>=(((n=s||t)==null?void 0:n.stock)||Number.MAX_VALUE)?P("#fff").result.filter:P("#358f27").result.filter}})})]})}function Q({detail:t,image:i,title:s}){const{getAccess:a}=C();return e.jsx("div",{className:"page-auth",children:e.jsxs("div",{className:"auth-ctn",onClick:l=>{l.stopPropagation(),l.preventDefault()},children:[e.jsx("div",{className:"image",style:{background:i&&B(i)}}),e.jsxs("div",{className:"form",children:[e.jsx("h1",{className:"auth-title",children:s||"JOIN US NOW"}),e.jsxs("h5",{className:"auth-prompt",children:["Read more ?"," ",e.jsx("span",{onClick:()=>{},children:"Click here"})]}),e.jsxs("div",{className:"google",onClick:()=>{a()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Connexion"})]}),e.jsx("p",{children:t||"Google connexion is required to get access to sublymus service."})]})]})})}const ue=K((t,i)=>({favorites:void 0,setFavorites(s){t(()=>({favorites:s}))},async deleteFavorite(s){const a=C.getState().getHeaders();if(!(a!=null&&a.user))return!1;if((await(await fetch(`${$}/delete_favorite/${s}`,{headers:a.headers,method:"DELETE"})).json()).deleted){const r=i().favorites;return t(()=>({favorites:{limit:(r==null?void 0:r.limit)||25,page:(r==null?void 0:r.page)||1,total:(r==null?void 0:r.total)||0,list:[...(r==null?void 0:r.list)||[]].filter(o=>o.id!=s).map(o=>({...o}))}})),!0}return!1},async addFavorite(s){const a=C.getState().getHeaders();if(!(a!=null&&a.user)||!s.product_id)return;const l=new FormData,c={};l.append("product_id",s.product_id),s.label&&l.append("label",s.label);const r=new URLSearchParams({});for(const m in c){const h=c[m];r.set(m,h)}const n=await(await fetch(`${$}/add_favorite`,{method:"POST",headers:a.headers,body:l})).json();if(!n.id)return;const d=i().favorites;return t(()=>({favorites:{limit:(d==null?void 0:d.limit)||25,page:(d==null?void 0:d.page)||1,total:(d==null?void 0:d.total)||0,list:[...((d==null?void 0:d.list)||[]).map(m=>m.id==n.id?n:m)]}})),n},async fetchFavorites(s){const a=C.getState().getHeaders();if(!(a!=null&&a.user))return;const l={...s};l.store_id=a.store.id,l.add_product=!0;const c=new URLSearchParams({});for(const n in l){const d=l[n];d&&c.set(n,d)}const o=await(await fetch(`${$}/get_favorites/?${c.toString()}`,{headers:a.headers})).json();if(o!=null&&o.list)return s!=null&&s.no_save||t(()=>({favorites:o})),{...o}}}));function ke({elm:t,onChange:i}){const{addFavorite:s,deleteFavorite:a}=ue(),{openChild:l}=Z(),c=t.product_id||t.id,[r,o]=u.useState(!1),[n,d]=u.useState(0),[m]=u.useState({});return m.counter=n,m.isOpen=r,e.jsxs("div",{className:"favorites-btn "+(t.favorite?"favorite":"")+" "+(r?"open":""),onClick:()=>{r?(c&&l(e.jsx(Be,{product_id:c,onChange:()=>i==null?void 0:i(t)}),!1,"#3455"),o(!1)):t.favorite?a(t.favorite).then(()=>{i==null||i(t)}):(()=>{o(!0),d(3);const h=setInterval(()=>{console.log(m.counter),m.counter>1&&m.isOpen?d(m.counter-1):(clearInterval(h),m.isOpen&&(o(!1),s({product_id:c,label:"default"}).then(()=>{i==null||i(t)})))},1e3)})()},children:[e.jsx("span",{className:"icon",style:{display:r?"none":"",filter:t.favorite&&P("#c00").result.filter}}),e.jsx("span",{className:"plus",style:{display:r?"":"none",filter:t.favorite&&P("#c00").result.filter}}),e.jsx("span",{className:"down",style:{display:r?"":"none",filter:t.favorite&&P("#c00").result.filter},children:n})]})}function Be({product_id:t,onChange:i}){var h,v;const{openChild:s}=Z(),[a,l]=u.useState(!1),[c,r]=u.useState(""),{addFavorite:o,favorites:n,fetchFavorites:d}=ue(),m=x=>{(x||c)&&(console.log(x,c),o({product_id:t,label:x||c}).then(()=>{i==null||i(),r(""),s(void 0)}))};return u.useEffect(()=>{!(n!=null&&n.labels)&&d({add_labels:!0})}),e.jsx("div",{className:"choise-label",onClick:()=>s(void 0),children:e.jsxs("div",{className:"ctn",onClick:x=>{x.preventDefault(),x.stopPropagation()},children:[e.jsx("h1",{children:"Choise Label"}),e.jsx("div",{className:"list",children:(v=((h=n==null?void 0:n.labels)==null?void 0:h.length)==0?["default"]:n==null?void 0:n.labels)==null?void 0:v.map(x=>e.jsxs("div",{className:"label",style:{borderBottom:`${G(x)} 2px solid`,border:`${G(x)} 2px solid`},onClick:()=>{m(x)},children:[x," ",e.jsx("span",{style:{background:G(x)}})]}))}),a?e.jsx("div",{className:"new-label",children:e.jsxs("label",{htmlFor:"new-label",children:[e.jsx("span",{className:"plus",onClick:()=>{m()}}),e.jsx("input",{type:"text",autoFocus:!0,id:"new-label",value:c,onKeyUp:x=>{console.log(x.code),x.code=="Enter"&&m()},onChange:x=>{r(x.currentTarget.value.toLowerCase().trim())}}),e.jsx("span",{className:"send",onClick:()=>{m()}})]})}):e.jsx("div",{className:"add-new",onClick:()=>{l(!0)},children:"Add New Label"})]})})}function xe({product:t,active:i,onClick:s,aspect:a,mode:l,onRefresh:c}){var v,x,g,y;const{addProductToCart:r}=V(),{openChild:o}=Z(),{user:n}=C(),d=u.useRef(null),[m,h]=u.useState(0);return u.useEffect(()=>{const N=()=>{d.current&&a!=null&&l=="v"&&(d.current.style.height=`${d.current.getBoundingClientRect().width*(a||1)}px`)};return a!=null&&l=="v"&&window.addEventListener("resize",N),d.current&&(!a||l=="h")&&(d.current.style.height=""),N(),()=>{window.removeEventListener("resize",N)}},[d,a,l]),e.jsxs("div",{className:"product-card "+l+" "+(i?"active":""),onClick:s,ref:d,children:[e.jsx("div",{className:"back"}),e.jsxs("div",{className:"images",ref:Se(void 0,h),children:[e.jsx("div",{className:"gap"}),t.images.map(N=>e.jsx("div",{className:"image card-h-c ",style:{background:B(N)}},N)),e.jsx("div",{className:"gap"})]}),e.jsx("div",{className:"div",onClick:N=>{N.preventDefault(),N.stopPropagation()},children:n&&e.jsx(ke,{elm:t,onChange:()=>{c==null||c(t)}})}),e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"counters",children:t.images.map((N,D)=>e.jsx("div",{className:"counter "+(m==D?"active":"")},N))}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"value",children:"12450.93 $"})}),e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:t.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:t.description})]}),e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"star "+((v=t.note)!=null&&v.star?"":"vide")}),e.jsx("div",{className:"note",children:((x=t.note)==null?void 0:x.star)||0}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"vote",children:((g=t.note)==null?void 0:g.votes)||0}),e.jsx("div",{className:"users"}),!((y=t.note)!=null&&y.star)&&e.jsx("div",{className:"new",children:"New"})]}),e.jsx("div",{className:"add-btn unselectable",onClick:N=>{N.preventDefault(),N.stopPropagation()},children:t.quantity!=null&&t.quantity!=null&&parseInt(t.quantity+"")!=0&&t.quantity.toString()!="0"?e.jsx(le,{canNull:!0,product:t,onChange:()=>{c==null||c(t)}}):e.jsxs("div",{className:"btn _limit-text",onClick:()=>n?r({product_id:t.id,quantity:1}).then(N=>{N!=null&&N.id&&(c==null||c(t))}):o(e.jsx(Q,{}),!1,"#3455"),children:["Add ",e.jsx("span",{children:" to cart"})]})})]})]})}const ee=K((t,i)=>({visites:void 0,product:void 0,products:{limit:25,list:[],page:1,total:0},setProducts(s,a){t(({products:l})=>({products:(l||a)&&{...l,...a,...s}}))},setVisites(s,a){t(({visites:l})=>({visites:(l||a)&&{...l,...a,...s}}))},async setClientVisite(s){const a=C.getState().getHeaders();if(!(a!=null&&a.user))return;const l=new FormData;l.append("product_id",s),await fetch(`${$}/set_client_visited`,{headers:a.headers,body:l,method:"PUT"})},async fetchVisites({after_date:s,before_date:a,client_id:l,product_id:c,limit:r,page:o}){const n=C.getState().getHeaders();if(!n)return;const d={};d.store_id=n.store.id,d.product_id=c||"",d.client_id=l||"",d.limit=r||6,d.page=o||1,d.after_date=s||"",d.before_date=a||"",d.add_favorite=!0;const m=new URLSearchParams({});for(const x in d){const g=d[x];g!=null&&m.set(x,g)}const v=await(await fetch(`${$}/get_client_visited/?${m.toString()}`,{headers:n.headers})).json();!v||!v.list||t(()=>({visites:v}))},featuresCollector:void 0,async setProductById(s){if(!s.product_id)return;const a=i().products,l=a==null?void 0:a.list.find(c=>c.id==s.product_id);if(l)i().selectProduct(l),t(()=>({featuresCollector:l==null?void 0:l.featuresCollector}));else{const c=C.getState().store;if(!c)return;const r={};r.product_id=s.product_id,r.is_features_required=!0,r.store_id=c.id,r.by_product_category=!(a!=null&&a.list[0]);const o=new URLSearchParams({});for(const h in r){const v=r[h];v!=null&&o.set(h,v)}const d=await(await fetch(`${$}/get_products/?${o.toString()}`)).json();if(!d.list)return;const m=d.list.find(h=>h.id==s.product_id)||d.list[0];t(()=>({products:a?{...a,list:[...d.list.filter(h=>!a.list.find(v=>v.id==h.id)),...a.list]}:d,product:m,featuresCollector:m==null?void 0:m.featuresCollector})),i().selectProduct(m)}},fetchProducts:async s=>{const a=C.getState().getHeaders();if(!a)return;const l={...s};l.store_id=a.store.id,l.add_favorite=!0;const c=new URLSearchParams({});for(const n in l){const d=l[n];d!=null&&c.set(n,d)}const o=await(await fetch(`${$}/get_products/?${c.toString()}`,{headers:a.headers})).json();if(o!=null&&o.list)return s!=null&&s.no_save||t(()=>({products:o})),{...o}},async selectProduct(s){if(!s)return t(()=>({product:void 0}));s.features=Re;const a={};s.features.list.forEach(l=>{var c;a[l.id]=(c=l.components)==null?void 0:c[0]}),s.featuresCollector={collectFeature(l,c){var r,o;c!=null?a[l.id]=c:(r=l.components)!=null&&r[0]&&(a[l.id]=(o=l.components)==null?void 0:o[0]),t(()=>({featuresCollector:s.featuresCollector&&{...s.featuresCollector}}))},getCollectedFeatures(l){return a[l]},allCollectedFeatures(){return a}},t(()=>({product:s})),i().setClientVisite(s.id)}}));function pe({note:t}){return e.jsxs("div",{className:"note-stars",children:[e.jsx("div",{className:"icon first "+(t>=1?"full":t<=0?"vide":"half")}),e.jsx("div",{className:"icon "+(t>=2?"full":t<=1?"vide":"half")}),e.jsx("div",{className:"icon "+(t>=3?"full":t<=2?"vide":"half")}),e.jsx("div",{className:"icon "+(t>=4?"full":t<=3?"vide":"half")}),e.jsx("div",{className:"icon "+(t>=5?"full":t<=4?"vide":"half")})]})}const ce=K(t=>({comments:void 0,index:void 0,lastPage:void 0,setLastPage(i){t(()=>({lastPage:i}))},setIndex(i){t(()=>({index:i}))},userComment:void 0,async getCommentIndex(i){const s=new URLSearchParams({});for(const c in i){const r=i[c];r!=null&&s.set(c,r)}return await(await fetch(`${$}/get_comment_index/?${s}`)).json()},async sendCommentResponse(i){const s=C.getState().getHeaders();if(!s)return;const a=new FormData;a.append("product_comment_id",i.comment_id.toString()),a.append("response",i.response);const c=await(await fetch(`${$}/set_product_comment_response`,{method:"PUT",body:a,headers:s.headers})).json();if(c!=null&&c.id)return t(({comments:r})=>({comments:r&&{...r,list:r.list.map(o=>o.id==i.comment_id?c:o)}})),c},async fetcheditCommentText(i){const s=C.getState().getHeaders();if(!s)return;const a=new FormData;a.append("product_comment_id",i.comment_id.toString()),a.append("text",i.text);const c=await(await fetch(`${$}/edit_product_comment_text`,{method:"PUT",body:a,headers:s.headers})).json();if(c!=null&&c.id)return t(({comments:r})=>({comments:r&&{...r,list:r.list.map(o=>o.id==i.comment_id?c:o)}})),c},async deleteComment(i,s){const a=C.getState().getHeaders();if(!a)return;const c=await(await fetch(`${$}/delete_product_comment/${i.id}`,{method:"DELETE",headers:a.headers})).json();if(c!=null&&c.deleted)return s&&setTimeout(()=>{t(({comments:r})=>({comments:r&&{...r,list:r.list.filter(o=>o.id!=i.id)}}))},s),c},async fetchProductComments(i){if(!C.getState().store)return;const a=new URLSearchParams({});for(const r in i){const o=i[r];a.set(r,o)}const c=await(await fetch(`${$}/get_product_comments/?${a.toString()}`)).json();return i!=null&&i.no_save||t(()=>({comments:c})),c},async fetchUserComment(){},async create_product_comment(i){const s=C.getState().getHeaders();if(!s)return;const a=new FormData;a.append("product_id",i.product_id),a.append("note",i.note+""),a.append("text",i.text);for(let r=0;r<i.photos.length;r++)a.append("photos_"+r,i.photos[r]);for(let r=0;r<i.videos.length;r++)a.append("videos_"+r,i.videos[r]);console.log(i);const c=await(await fetch(`${$}/create_product_comment`,{method:"POST",body:a,headers:s.headers})).json();if(c!=null&&c.id)return c}}));function ae({comment:t,canOpen:i,onClick:s}){var b,k;const[a,l]=u.useState(!1),[c,r]=u.useState(!1),{userStore:o,manager:n}=C(),{deleteComment:d,sendCommentResponse:m,fetcheditCommentText:h}=ce(),v=(n==null?void 0:n.type.toLocaleLowerCase())=="collaborator"||(n==null?void 0:n.type.toLocaleLowerCase())=="owner",[x,g]=u.useState(0),[y,N]=u.useState(!1),[D,S]=u.useState(!1),[L,T]=u.useState(t.text||""),[p,f]=u.useState(t.response||""),E=(o==null?void 0:o.user_id)==t.user_id,[O,W]=u.useState(null);return e.jsxs("div",{ref:W,className:"product-comment",onClick:()=>{s==null||s(),r(!1)},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"photo",style:{background:t.user?B(t.user.photos[0]):""},children:e.jsx("span",{style:{background:(b=t.user)!=null&&b.country_icon?B(t.user.country_icon):""}})}),e.jsxs("div",{className:"coment-right",children:[e.jsxs("div",{className:"flex",style:{flexWrap:"nowrap"},children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"name",children:(k=t.user)==null?void 0:k.name}),e.jsx(pe,{note:t.note})]}),(E||v)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"option",onClick:_=>{_.preventDefault(),_.stopPropagation(),r(!c)}}),e.jsxs("div",{className:"ctn-option "+(c?"open":""),onClick:()=>{r(!1)},children:[e.jsx("div",{className:"close",onClick:()=>{r(!1)}}),E&&e.jsx("div",{className:"edit-comment",onClick:()=>{N(!0),S(!1)},children:"Edit Comment"}),v&&e.jsx("div",{className:"edit-response",onClick:()=>{S(!0),N(!1)},children:t.response?"Edit Response":"Add Response"}),e.jsx("div",{className:"delete",onClick:()=>{d(t,300).then(_=>{_!=null&&_.deleted&&(O==null||O.classList.add("deleted"),setTimeout(()=>{O&&(O.style.display="none")},300))})},children:"Delete"})]})]})]}),e.jsx("div",{className:"date",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),e.jsx("div",{className:"message",children:y?e.jsxs("label",{htmlFor:"edit-comment-"+t.id,children:[e.jsx("input",{id:"edit-comment-"+t.id,type:"text",value:L,placeholder:"Edit Comment",onChange:_=>{T(_.currentTarget.value)}}),e.jsx("span",{onClick:()=>{S(!1),N(!1),h({comment_id:t.id,text:L}).then(_=>{_!=null&&_.id&&(t.text=_.text,g(x+1))})}})]}):t.text})]}),e.jsxs("div",{className:"message-ctn",children:[e.jsx("div",{className:"gap"}),i&&(t.photos_count>0||t.videos_count>0)&&e.jsxs("div",{className:"files-ctn",children:[t.photos.map((_,M)=>e.jsx("div",{style:{background:B(_)+",#4544"},onClick:q=>{q.preventDefault(),q.stopPropagation(),s==null||s({comment:t,relative:M})}},_)),t.videos.map((_,M)=>e.jsx("div",{onClick:q=>{q.preventDefault(),q.stopPropagation(),s==null||s({comment:t,relative:t.photos.length+M})},children:e.jsx("video",{width:60,height:60,src:`${$}${_}`})},_))]})]}),(i&&t.response||D)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"open-response "+(a||D?"open":""),onClick:()=>{l(!a),S(!1),N(!1)},children:[t.response?"Open response":"Add Response",e.jsx("span",{})]}),e.jsx("div",{className:"response "+(a||D?"open":""),children:D?e.jsxs("label",{htmlFor:"edit-response-"+t.id,children:[e.jsx("input",{id:"edit-response-"+t.id,type:"text",value:p,placeholder:"Edit Response",onChange:_=>{f(_.currentTarget.value)}}),e.jsx("span",{onClick:()=>{S(!1),l(!0),m({comment_id:t.id,response:p}).then(_=>{_!=null&&_.id&&(t.response=_.response,g(x+1))})}})]}):t.response})]})]})}function oe({posistion:t,size:i,top:s,step:a}){return l=>{if(!l||l.dataset.init)return;l.dataset.init="init",l.style.scrollBehavior="smooth";const c=l.parentElement,r=document.createElement("div");r.style.width=l.style.width,r.style.position="relative",r.append(l),c.append(r);const o=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div");n.className="h-scroll-icon-ctn right",o.className="h-scroll-icon-ctn",i&&(n.style.width=`${i}px`,n.style.height=`${i}px`,o.style.width=`${i}px`,o.style.height=`${i}px`),t&&(n.style.right=`${-t}px`,o.style.left=`${-t}px`),s&&(n.style.top=`${s}px`,o.style.top=`${s}px`),m.className="h-scroll-icon right",d.className="h-scroll-icon",n.append(m),o.append(d),m.style.filter=P("#123").result.filter,d.style.filter=P("#123").result.filter,r.append(n,o);const h=()=>{l.scrollLeft<=0?o.style.display="none":o.style.display="block",l.scrollLeft>=l.scrollWidth-l.getBoundingClientRect().width-30?n.style.display="none":n.style.display="block"};o.addEventListener("click",()=>{a?l.scrollLeft-=a:l.scrollLeft-=l.getBoundingClientRect().width/2}),n.addEventListener("click",()=>{a?l.scrollLeft+=a:l.scrollLeft+=l.getBoundingClientRect().width/2}),l.addEventListener("scroll",h),setTimeout(()=>{h()},500)}}function Ue({product:t,setRef:i,userCommand:s,ImageComments:a,onRefresh:l}){const{userComment:c,comments:r,create_product_comment:o,fetchProductComments:n,setIndex:d}=ce(),{openChild:m}=Z(),{user:h}=C(),{navBack:v,qs:x,current:g,json:y}=U(),[N,D]=u.useState([]),[S,L]=u.useState([]),[T,p]=u.useState(""),[f,E]=u.useState(0),[O,W]=u.useState(!1),[b,k]=u.useState(),[_,M]=u.useState(!1),[q,J]=u.useState({order_by:"created_at_desc",order_text:"Date",with_photo:!1,with_video:!1,limit:20,page:1}),[X,z]=u.useState(!1);return u.useEffect(()=>{n({product_id:t.id,...q})},[b,t,q,y]),g("comments")&&e.jsxs("section",{className:"page-comments "+(g("comments")?"open":"close"),ref:i,children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"return",onClick:()=>{v()}}),e.jsx("h1",{children:"Comments"}),e.jsx("div",{className:"option"})]}),e.jsx(Pe,{images:a==null?void 0:a.images,more:a==null?void 0:a.more,product:t,onClick:()=>x().keepJson().setAbsPath(["products","detail","images"])}),e.jsxs("div",{className:"write-comment",children:[e.jsxs("div",{className:"top-prompt",children:[" Leave a comment ",e.jsx("span",{})]}),b?e.jsx("div",{children:"Thank you for the comment."}):c?e.jsxs("div",{children:["You have already commented on this product ",e.jsx("span",{onClick:()=>W(!0),children:" see my comment"})]}):s!=null&&s.payment_id?e.jsxs("div",{className:"zone-inputs",children:[e.jsxs("div",{className:"user-rating",children:[e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"icon "+(f>=1?"star":""),onClick:()=>E(1)}),e.jsx("div",{className:"icon "+(f>=2?"star":""),onClick:()=>E(2)}),e.jsx("div",{className:"icon "+(f>=3?"star":""),onClick:()=>E(3)}),e.jsx("div",{className:"icon "+(f>=4?"star":""),onClick:()=>E(4)}),e.jsx("div",{className:"icon "+(f==5?"star":""),onClick:()=>E(5)})]}),e.jsx("div",{className:"value",children:f})]}),!!f&&e.jsxs("label",{htmlFor:"comment-input-text",className:"input-text",children:[e.jsx("input",{id:"comment-input-text",autoFocus:!0,type:"text",value:T,placeholder:"Write Comment",onChange:F=>{p(F.target.value.substring(0,200))}}),e.jsxs("div",{className:"div",children:[T.length,"/200"]})]}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-photo",id:"comment-photo",accept:"image/*",onChange:F=>{if(F.target.files){for(const A of F.target.files)N.unshift(A);D([...N].slice(0,5))}}}),e.jsx("input",{multiple:!0,style:{display:"none"},type:"file",name:"comment-video",id:"comment-video",accept:"video/*",onChange:F=>{if(F.target.files){for(const A of F.target.files)S.unshift(A);L([...S].slice(0,2))}}}),e.jsxs("div",{className:"files-ctn",style:{display:f&&T?"flex":"none"},children:[e.jsxs("div",{className:"photo-ctn",children:[e.jsxs("label",{htmlFor:"comment-photo",className:"photo",children:[e.jsx("span",{}),"Photo ",N.length,"/5"]}),e.jsx("div",{className:"files-photo",children:N.map(F=>e.jsx("div",{style:{background:B(URL.createObjectURL(F))},children:e.jsx("span",{onClick:()=>{D(N.filter(A=>A!=F))}})},F.name))})]}),e.jsxs("div",{className:"video-ctn",children:[e.jsxs("label",{htmlFor:"comment-video",className:"photo",children:[e.jsx("span",{}),"Video ",S.length,"/2"]}),e.jsx("div",{className:"files-video",children:S.map(F=>e.jsxs("div",{children:[e.jsx("video",{width:80,height:80,src:URL.createObjectURL(F)}),e.jsx("span",{onClick:()=>{L(S.filter(A=>A!=F))}})]},F.name))})]})]}),e.jsxs("div",{className:"send-comment "+(_?"loading":""),children:[e.jsx("span",{className:"text "+(T.trim()?"":"no"),onClick:()=>{if(!h)return m(e.jsx(Q,{}),!1,"#3455");f&&T&&(M(!0),o({note:f,photos:N,product_id:t.id,text:T,videos:S}).then(F=>{M(!1),F!=null&&F.id&&(k(F),l==null||l())}))},children:"Send"})," ",e.jsx("span",{className:"loading"})]})]}):e.jsx("div",{children:"Comments are allowed after purchasing the product"})]}),e.jsx("div",{className:"my-comment",children:c&&e.jsx(ae,{comment:c,canOpen:!0})}),e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"date active",onClick:()=>{z(!X)},children:[q.order_text,e.jsx("span",{className:q.order_by.includes("desc")?"desc":""}),e.jsxs("div",{className:X?"open":"",children:[e.jsxs("div",{onClick:()=>J({...q,order_by:"created_at_desc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>J({...q,order_by:"created_at_asc",order_text:"Date"}),children:["Date ",e.jsx("span",{className:""})]}),e.jsxs("div",{onClick:()=>J({...q,order_by:"note_desc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:"desc"})]}),e.jsxs("div",{onClick:()=>J({...q,order_by:"note_asc",order_text:"Star"}),children:["Star ",e.jsx("span",{className:""})]})]})]}),e.jsx("div",{className:"photo "+(q.with_photo?"active":""),onClick:()=>J({...q,with_photo:!q.with_photo}),children:"With Photo"}),e.jsx("div",{className:"video "+(q.with_video?"active":""),onClick:()=>J({...q,with_video:!q.with_video}),children:"With Video"})]}),e.jsx("div",{className:"comments",children:r==null?void 0:r.list.map(F=>e.jsx(ae,{comment:F,canOpen:!0,onClick:A=>{const se=A==null?void 0:A.comment;se&&(x().keepJson().setAbsPath(["products","detail","images"]),d({comment:se,relative:A.relative}))}},F.id))})]})}function Me({product:t}){var p,f,E,O,W;const{current:i,navBack:s,pathList:a}=U(),{getCommentIndex:l,index:c,setIndex:r}=ce(),[o,n]=u.useState(null),[d,m]=u.useState((c==null?void 0:c.relative)||0),[h,v]=u.useState(),[x]=u.useState({}),[g,y]=u.useState(!1),[N,D]=u.useState({move:"",comment_id:c==null?void 0:c.comment.id});u.useEffect(()=>{i("images")&&t&&l({product_id:t.id,comment_id:N.comment_id||(c==null?void 0:c.comment.id),move:N.move||void 0}).then(b=>{var k;if(console.log({res:b}),(k=b==null?void 0:b.comment)!=null&&k.id){if(N.move=="back")m(b.comment.photos_count+b.comment.videos_count-1);else if(N.move=="next")m(0);else{let _=((c==null?void 0:c.relative)??d)||0;const M=b.comment.photos_count+b.comment.videos_count;_=_<=0?0:_>=M-1?M-1:_,m(_)}N.move="",N.comment_id=void 0,v(b)}})},[N,c,a]),u.useEffect(()=>{i("images")&&(D({comment_id:void 0,move:""}),v(void 0),console.log({commentIndex:h}))},[t,a]),u.useEffect(()=>{x.init||(x.init=!0,window.addEventListener("keyup",b=>{b.code=="ArrowRight"?x.moveNext():b.code=="ArrowLeft"&&x.moveBack()}))},[]);const S=()=>{d<=0?(console.log("back comment "),h&&D({...N,comment_id:h.comment.id,move:"back"})):(console.log("back image "),m(d-1))},L=()=>{d>=T.length-1?(console.log("next comment "),h&&D({...N,comment_id:h.comment.id,move:"next"})):(console.log("next image "),m(d+1))};x.moveNext=L,x.moveBack=S;const T=[...((p=h==null?void 0:h.comment)==null?void 0:p.photos)||[],...((f=h==null?void 0:h.comment)==null?void 0:f.videos)||[]];return i("images")&&!(h!=null&&h.comment)?e.jsxs("div",{className:"image-not-found",children:[e.jsx("p",{className:"text",children:"no images or videos found for this product."}),e.jsxs("div",{onClick:()=>s(),children:[e.jsx("span",{}),"go back"]})]}):i("images")&&(h==null?void 0:h.comment)&&e.jsxs("section",{className:"page-comment-image "+(i("images")?"open":"close"),children:[e.jsxs("div",{className:"page-top",children:[e.jsx("div",{className:"return",style:{filter:P("#fff").result.filter},onClick:()=>s()}),e.jsxs("div",{className:"count",children:[((h==null?void 0:h.befor)||0)+d," / ",(h==null?void 0:h.total)||0]})]}),e.jsxs("div",{className:"file-view _flex _center",children:[d>(((E=h==null?void 0:h.comment)==null?void 0:E.photos_count)||0)-1?e.jsx("div",{className:"video _flex",ref:b=>{if(!b||b.dataset.init)return;b.dataset.init="init",n(b);const k=()=>{const _=b.querySelector("video"),M=b.getBoundingClientRect();_.width=M.width};window.addEventListener("resize",k)},children:e.jsx("video",{loop:!0,autoPlay:!0,controls:!0,width:o==null?void 0:o.getBoundingClientRect().width,src:`${$}${T[d]}`})}):e.jsx("div",{className:"photo",children:e.jsx("div",{className:"img",style:{background:B(T[d],"100%")}})}),e.jsx("div",{className:"move-next",onClick:L,children:e.jsx("div",{className:"next",children:e.jsx("span",{})})}),e.jsx("div",{className:"move-back",onClick:S,children:e.jsx("div",{className:"back",children:e.jsx("span",{})})})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"top _flex _wrap",children:[e.jsx("div",{className:"name",children:ie(((O=h==null?void 0:h.comment.user)==null?void 0:O.name)||"",50)}),e.jsxs("div",{className:"_flex  _l-auto",children:[e.jsx(pe,{note:((W=h==null?void 0:h.comment)==null?void 0:W.note)||0}),e.jsx("div",{className:"open",onClick:()=>y(!0),children:"Open"})]})]}),e.jsx("div",{className:"message",children:ie((h==null?void 0:h.comment.text)||"",100)}),e.jsxs("div",{className:"preview-comment "+(g?"open":"close"),children:[e.jsx("div",{className:"close",onClick:()=>{y(!1)}}),e.jsx(ae,{comment:h.comment,canOpen:!0,onClick:b=>{const k=b==null?void 0:b.comment;k&&r({comment:k,relative:b.relative})}})]})]})]})}function ve({mode:t}){const{pathList:i,qs:s}=U(),{visites:a,fetchVisites:l,setVisites:c,fetchProducts:r}=ee(),{openChild:o}=Z(),{user:n}=C(),d=m=>{r({product_id:m.id,no_save:!0}).then(h=>{if(h!=null&&h.list[0].id){const v={...h==null?void 0:h.list[0]};c({...a,list:a==null?void 0:a.list.map(x=>x.id==v.id?v:x)})}})};return u.useEffect(()=>{!a&&n&&l({})},[n,i]),e.jsxs("div",{className:"comp-visites "+(t||"h"),children:[e.jsxs("h1",{className:"title",children:["Products Visited",e.jsx("span",{})]}),e.jsxs("div",{className:"list",ref:oe({posistion:20}),children:[!n&&e.jsx("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>o(e.jsx(Q,{}),!0,"#fffc"),children:"Connexion required"}),a==null?void 0:a.list.map(m=>e.jsx(xe,{aspect:t=="v"?1.4:void 0,mode:"inlist",product:m,onClick:()=>{s({product_id:m.id}).setAbsPath(["products","detail"])},onRefresh:h=>{d(h)}},m.id))]})]})}function je({mode:t}){const{qs:i}=U(),{product:s,fetchProducts:a}=ee(),{store:l}=C(),[c,r]=u.useState();u.useEffect(()=>{a({no_save:!0,category_id:s==null?void 0:s.category_id}).then(n=>{n!=null&&n.list&&r(n)})},[s,l]);const o=n=>{c&&a({product_id:n.id,no_save:!0,lol:!0}).then(d=>{if(d!=null&&d.list[0].id){const m={...d==null?void 0:d.list[0]};c&&r({...c,list:c.list.map(h=>h.id==m.id?m:h)})}})};return e.jsxs("div",{className:"more-products "+(t||"h"),children:[e.jsxs("h1",{className:"title more",children:["More Products",e.jsx("span",{})]}),e.jsx("div",{className:"list",ref:oe({posistion:20}),children:c==null?void 0:c.list.map(n=>e.jsx(xe,{aspect:t=="v"?1.4:void 0,mode:"inlist",product:n,active:(s==null?void 0:s.id)==n.id,onClick:()=>{i({product_id:n.id}).setAbsPath(["products","detail"])},onRefresh:d=>{o(d)}},n.id))})]})}let H;function He({onRefresh:t}){var ge,ye,_e;const{json:i,qs:s,check:a,current:l,navBack:c,pathList:r}=U(),{setProductById:o,product:n,selectProduct:d,products:m,fetchProducts:h,setProducts:v}=ee(),{fetchProductComments:x,setLastPage:g}=ce(),{addProductToCart:y}=V(),{user:N}=C(),{openChild:D}=Z(),S=u.useRef(null),L=u.useRef(null),T=u.useRef(null),[p,f]=u.useState(!0),[E,O]=u.useState(0),[W,b]=u.useState(!1),[k,_]=u.useState(),[M,q]=u.useState(!1),[J]=u.useState(),[X]=u.useState({payment_id:"lol"}),[z,F]=u.useState(null),[A,se]=u.useState(),[Y,Ee]=u.useState(),[fe]=u.useState({}),[te]=u.useState({current:null}),re=()=>{if(!te.current)return;const j=te.current.getBoundingClientRect(),w=te.current.querySelectorAll(".img");let R=j.width-60;R=R>400?400:R;for(const I of w)I.style.height=`${R/1.295}px`,I.style.width=`${R}px`,I.style.minWidth=`${R}px`};re(),u.useEffect(()=>{a("detail")&&(i!=null&&i.product_id)&&i.product_id!=fe.product_id&&(fe.product_id=i.product_id,o({json:i}))},[i]),u.useEffect(()=>{n&&a("detail")&&(T.current&&(T.current.scrollTop=0),b(!1),O(0),H==null||H(0))},[n]),u.useEffect(()=>{n&&a("detail")&&(console.log("new Comments fech"),x({product_id:n.id,no_save:!0,limit:4}).then(j=>se(j)),x({product_id:n.id,no_save:!0,with_photo:!0,limit:5}).then(j=>{const w=j==null?void 0:j.list.map(R=>R.photos).flat();return Ee({images:(w==null?void 0:w.slice(0,5))||[],more:((w==null?void 0:w.length)||0)>5})}))},[n,r]),u.useEffect(()=>(window.addEventListener("resize",re),()=>{window.removeEventListener("resize",re)}),[]),u.useEffect(()=>{if(z){if(z.dataset.init)return;z.dataset.init="init",z.addEventListener("scroll",()=>{z.scrollTop>200?q(!0):q(!1)})}},[z]);const Ne=()=>{n&&h({add_cart:!0,product_id:n.id,no_save:!0}).then(j=>{if(j!=null&&j.list[0].id){const w={...j==null?void 0:j.list[0]};m&&v({...m,list:m==null?void 0:m.list.map(R=>R.id==(j==null?void 0:j.list[0].id)?w:R)}),(n==null?void 0:n.id)==(j==null?void 0:j.list[0].id)&&d(w)}})};return console.log("detail product",n),n&&e.jsxs("div",{className:"detail-product "+(n?"open":""),children:[n&&e.jsx(Ue,{onRefresh:t,ImageComments:Y,userComment:J,userCommand:X,setRef:F,product:n}),n&&e.jsx(Me,{product:n}),e.jsxs("section",{className:"detail "+(l("products")||l("detail")?"open":"close"),ref:T,children:[e.jsxs("div",{className:"top-top _flex",children:[e.jsx("div",{className:"return",ref:j=>{if(!j||j.dataset.init)return;j.dataset.init="init";const w=()=>{window.innerWidth>940?j.style.display=" none":j.style.display="flex"};window.addEventListener("resize",w),w()},onClick:()=>{d(void 0),c()}}),e.jsx("div",{className:"label _lr-auto",children:"Detail Product"})]}),e.jsxs("div",{className:"top-infos",ref:j=>{if(!j||j.dataset.init)return;j.dataset.init="init";const w=j.querySelector(".images"),R=j.querySelector(".infos"),I=()=>{j.getBoundingClientRect().width<700?(j.style.flexWrap="wrap",w.style.width="",w.style.minWidth="",w.style.maxWidth="",R.style.width="",R.style.minWidth="",R.style.maxWidth=""):(j.style.flexWrap="",w.style.width="50%",w.style.minWidth="50%",w.style.maxWidth="50%",R.style.width="50%",R.style.minWidth="50%",R.style.maxWidth="50%")};window.addEventListener("resize",I),setTimeout(()=>{I(),H==null||H(0)},200)},children:[e.jsxs("div",{className:"images",children:[e.jsxs("div",{className:"list",ref:j=>{Se(w=>{H=w},O)(j),te.current=j},children:[e.jsx("div",{className:"gap"}),n==null?void 0:n.images.map((j,w)=>e.jsx("div",{className:"img card-h-c "+(E==w?"active":""),style:{background:B(j)},onClick:()=>{H==null||H(w),O(w)}},j+(n==null?void 0:n.id))),e.jsx("div",{className:"gap"})]}),e.jsx("div",{className:"min-list",children:n==null?void 0:n.images.map((j,w)=>e.jsx("div",{className:"min-img "+(E==w?"active":""),style:{background:B(j)},onClick:()=>{O(w),H==null||H(w)}},j+(n==null?void 0:n.id)))})]}),e.jsx("div",{className:"infos",ref:S,children:e.jsxs("div",{className:"diff",ref:L,children:[e.jsxs("div",{className:"text "+(k&&p?"min":""),children:[e.jsxs("div",{className:"title",children:[n==null?void 0:n.title,e.jsx("span",{})]}),e.jsx("p",{className:"description",children:((n==null?void 0:n.description.length)||0)>100&&!W?e.jsxs(e.Fragment,{children:[ie((n==null?void 0:n.description)||"",100)," ",e.jsx("span",{onClick:()=>b(!0),children:"Read more"})]}):(n==null?void 0:n.description)||""})]}),(n==null?void 0:n.features)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"label-features",children:["Features",e.jsxs("span",{children:[" ",(k==null?void 0:k.name)&&" : "+(k==null?void 0:k.name)]})," ",k&&e.jsx("span",{className:"close",style:{filter:((ge=P("#112233"))==null?void 0:ge.result.filter)||""},onClick:()=>{_(void 0)}})]}),e.jsx("div",{className:"features",children:n==null?void 0:n.features.list.map(j=>{var w;return e.jsxs("div",{className:"feature "+((k==null?void 0:k.id)==j.id?"active":""),style:{filter:((w=P("#358f27"))==null?void 0:w.result.filter)||""},onClick:()=>{var R,I;if(!k){const Ce=((R=S.current)==null?void 0:R.getBoundingClientRect().height)||0,$e=((I=L.current)==null?void 0:I.getBoundingClientRect().height)||0;Ce-$e<150?f(!0):f(!1)}(k==null?void 0:k.id)==j.id?_(void 0):_(j)},children:[e.jsx("div",{className:"icon",style:{background:B(j.icon[0])}}),e.jsx("div",{className:"label",children:ie(j.name,10)})]},j.id)})})]}),k&&e.jsxs("div",{className:"label-components",children:["Components: ",e.jsx("span",{children:(_e=(ye=n==null?void 0:n.featuresCollector)==null?void 0:ye.allCollectedFeatures()[k.id])==null?void 0:_e.name})]}),e.jsx("div",{className:"components "+(k?"open":"")})]})})]}),e.jsxs("div",{className:"detail-box",children:[e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"title",children:["product reviews",e.jsx("span",{})]}),n&&e.jsx(Pe,{images:Y==null?void 0:Y.images,more:Y==null?void 0:Y.more,onClick:()=>{g(""),s().keepJson().setAbsPath(["products","detail","images"])},product:n}),e.jsxs("div",{className:"title",children:["Comments",e.jsx("span",{})]}),e.jsxs("div",{className:"min-comments",ref:oe({posistion:20}),children:[A==null?void 0:A.list.map(j=>e.jsx(ae,{comment:j,onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])}},j.id)),e.jsxs("div",{className:"more-comment "+(A!=null&&A.list.length||0>0?"":"horizontal"),onClick:()=>{s().keepJson().setAbsPath(["products","detail","comments"])},children:[e.jsx("div",{className:"icon "+(A!=null&&A.list.length||0>0?"":"add"),children:e.jsx("span",{style:{filter:P("#ffffff").result.filter}})}),e.jsx("div",{className:"label",children:A!=null&&A.list.length||0>0?"More":"Add First Comment"})]})]})]}),e.jsx(ve,{}),e.jsx(je,{})]})]}),l("detail")&&e.jsx("div",{className:"price-zone",children:e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"price",children:[e.jsx("div",{children:"Price"}),e.jsxs("div",{className:"value",children:[(n==null?void 0:n.price)||0," $"]})]}),n.quantity!=null&&n.quantity!=null&&parseInt(n.quantity+"")!=0&&n.quantity.toString()!="0"?e.jsx(le,{canNull:!0,product:n,onChange:()=>{Ne()}}):e.jsxs("div",{className:"add-to-cart",onClick:()=>N?y({product_id:n.id,quantity:1}).then(j=>{j!=null&&j.id&&Ne()}):D(e.jsx(Q,{}),!1,"#3455"),children:["Add ",e.jsx("span",{children:" to cart"})]})]})}),l("comments")&&(M||(X==null?void 0:X.payment_id)&&!J)&&e.jsxs("div",{className:"write-zone",children:[M&&e.jsx("div",{className:"up-icon",onClick:()=>{z&&(z.scrollTop=0)},children:e.jsx("span",{})}),e.jsx("div",{className:"write-icon",children:e.jsx("span",{})})]})]})}function Pe({product:t,onClick:i,images:s,more:a}){const{qs:l}=U();return e.jsxs("div",{className:"group-file-rating",children:[e.jsx("div",{className:"after-order",children:e.jsxs("div",{className:"ctn-mini-files",onClick:i,children:[s==null?void 0:s.map((c,r)=>e.jsx("div",{className:"w",children:e.jsx("div",{className:"mini-file",style:{background:B(c)}})},r)),a&&e.jsx("div",{className:"back",style:{background:(s==null?void 0:s[0])&&B(s==null?void 0:s[0])},children:e.jsx("div",{className:"more-files",children:"+ More"})})]})}),(t==null?void 0:t.note)&&e.jsxs("div",{className:"rating",onClick:()=>l().keepJson().setAbsPath(["products","detail","comments"]),children:[e.jsx("div",{className:"note",children:t.note.star}),e.jsx(pe,{note:t.note.star}),e.jsxs("div",{className:"vote",children:[t.note.votes," ",e.jsx("span",{})]})]})]})}const We=K(t=>({categories:void 0,async fetchCategoies(i){const s=C.getState().store;if(!s)return;const a={...i};a.store_id=s.id;const l=new URLSearchParams({});for(const o in a){const n=a[o];l.set(o,n)}const r=await(await fetch(`${$}/get_categories/?${l.toString()}`)).json();if(r!=null&&r.list)return i!=null&&i.no_save||t(()=>({categories:r})),{...r}}}));let ne="";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?ne="mobile-device":ne="not-mobile-device";document.body.classList.add(ne);const we=ne;function ze(){const{json:t,qs:i,check:s,pathList:a}=U(),{products:l,fetchProducts:c,selectProduct:r,product:o,setProducts:n}=ee(),{store:d}=C(),[m,h]=u.useState({order_by:"date_desc",category_id:"",limit:18,add_cart:!0,lol:!0,is_features_required:!0,price_min:void 0,price_max:void 0,text:"",product_id:""}),{fetchCategoies:v}=We(),[x,g]=u.useState(),[y]=u.useState({}),[N,D]=u.useState(!1);u.useEffect(()=>{s("products")&&d&&c({...m}).then(p=>{p!=null&&p.list[0]&&!o&&window.innerWidth>940&&(r(p==null?void 0:p.list[0]),i({...t,product_id:p.list[0].id}).setAbsPath(["products","detail"]))})},[m,d,a]),u.useEffect(()=>{!x&&v({limit:25,no_save:!0}).then(p=>{p!=null&&p.list&&g(p)})},[d]),u.useEffect(()=>{var p;if(t!=null&&t.product_id){const f=(p=y.products)==null?void 0:p.list.find(E=>E.id==t.product_id);f&&r(f)}s("products")&&Te(m,t||{})&&h({...m})},[t]),u.useEffect(()=>{window.addEventListener("resize",()=>{var p;window.innerWidth>940&&!y.product&&r((p=y.products)==null?void 0:p.list[0])})},[]),y.product=o,y.products=l,y.pathList=a;const[S,L]=u.useState("");u.useEffect(()=>{window.addEventListener("resize",()=>{L(`${window.innerWidth} / ${window.innerHeight}  / ${window.screen.height} => ${we}`)}),L(`${window.innerWidth} / ${window.innerHeight} / ${window.devicePixelRatio}  => ${we}`)},[]);const T=p=>{y.products&&c({add_cart:!0,product_id:p.id,no_save:!0,lol:!0,is_features_required:!0}).then(f=>{var E;if(f!=null&&f.list[0].id){const O={...f==null?void 0:f.list[0]};console.log(O),y.products&&n({...y.products,list:y.products.list.map(W=>W.id==O.id?O:W)}),((E=y.product)==null?void 0:E.id)==O.id&&r(O)}})};return s("products")&&e.jsxs("div",{className:"page-products",children:[e.jsx("div",{className:"left "+(N?"open":"")+" "+(s("detail")&&o?"product-detail":""),onClick:()=>{D(!1)},children:e.jsxs("div",{className:"filter-fram",children:[e.jsx("div",{className:"top",children:"Filter"}),e.jsx("div",{className:"categories",children:x==null?void 0:x.list.map(p=>e.jsx("div",{className:"category",onClick:()=>h({...m,category_id:p.id}),children:p.label},p.id))}),e.jsxs("div",{className:"prices",children:[e.jsxs("div",{className:"ctn",children:[e.jsx("label",{htmlFor:"product-price-min",children:e.jsx("input",{type:"text",id:"product-price-min",placeholder:"Min",value:m.price_min})}),e.jsx("label",{htmlFor:"product-price-max",children:e.jsx("input",{type:"text",id:"product-price-max",placeholder:"Max",value:m.price_max})})]}),e.jsx("div",{className:"set-price",children:e.jsx("div",{className:"btn",children:"Set Price"})})]})]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"search-zone",children:[e.jsxs("label",{htmlFor:"product-search",className:"search",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{id:"product-search",type:"text",placeholder:"Search Product",value:m.text,onChange:p=>{h({...m,text:p.currentTarget.value})}}),e.jsx("div",{className:"clear",onClick:()=>{h({...m,text:""})}})]}),e.jsx("div",{className:"search-text",children:m.text&&e.jsxs(e.Fragment,{children:['Search result for "',e.jsx("span",{children:m.text}),'"']})}),e.jsxs("div",{className:"sort",children:[e.jsx("div",{className:"label",onClick:()=>{D(!0)},children:"Sort"}),e.jsx("div",{className:"list",children:["date","name","price","popular"].map(p=>{var f;return e.jsx("div",{className:((f=(t==null?void 0:t.order_by)||m.order_by)==null?void 0:f.split("_")[0])==p?"active":"",onClick:()=>{i({...t,order_by:p+"_desc"}).apply()},children:p},p)})})]})]}),e.jsx("div",{className:"list",children:l==null?void 0:l.list.map(p=>e.jsx(xe,{canAddToCart:p.title.includes("321"),product:p,active:(o==null?void 0:o.id)==p.id,onClick:()=>{r({...p}),i({...t,product_id:p.id}).setAbsPath(["products","detail"])},onRefresh:f=>{T(f),console.log("onRefresh",f)}},p.id))})]}),e.jsx("div",{className:"right "+(o?"product":"")+" "+(s("detail")?"detail":""),children:e.jsx(He,{onRefresh:()=>{o&&T(o)}})})]})}function Ve(){var v;const{setAbsPath:t,pathList:i}=U(),[s,a]=u.useState(i[1]||"home"),[l,c]=u.useState(!1),[r,o]=u.useState(!1),{user:n,getAccess:d}=C(),m=Ae(),h=x=>{t([x]),a(x)};return u.useEffect(()=>{a(i[1]||"home")},[i]),u.useEffect(()=>{window.addEventListener("click",()=>{const x=document.querySelector(".top-bar .more-navs ul");(x==null?void 0:x.className)==""&&o(!1)})},[]),e.jsxs("div",{className:"top-bar",ref:qe(80,".web"),children:[e.jsxs("div",{className:"top-bar-ctn",children:[e.jsx("div",{className:"left",children:e.jsx("a",{href:"#products",className:"logo-ctn",onClick:x=>{x.preventDefault(),x.stopPropagation(),h("products")},children:e.jsx("div",{className:"icon"})})}),e.jsx("ul",{className:"top-bar-center",children:he.map((x,g)=>g*150<m.width-400?e.jsxs("li",{className:s==x.u?"active":"",onClick:()=>{h(x.u)},children:[e.jsx("span",{}),x.n]},g):null)}),e.jsxs("div",{className:"right",children:[e.jsx("div",{className:"ctn-icon",onClick:x=>{x.preventDefault(),x.stopPropagation(),o(!r)},children:e.jsx("div",{className:"icon",style:{filter:P("#345").result.filter}})}),n?e.jsx("div",{className:"profile",style:{background:`no-repeat center/cover url(${(v=n==null?void 0:n.photos[0])!=null&&v.startsWith("/")?$:""}${n==null?void 0:n.photos}),#bbb`},onClick:()=>{h("profile")}}):e.jsx("div",{className:"login",onClick:()=>d(),children:"Se connecter"})]})]}),e.jsx("div",{className:"more-navs",onClick:x=>{x.preventDefault(),x.stopPropagation()},children:e.jsxs("ul",{className:r?"":"close",children:[he.map((x,g)=>g*150>=m.width-400?e.jsxs("li",{className:s==x.u?"active":"",onClick:()=>{h(x.u),o(!r)},children:[e.jsx("span",{}),x.n]},g):null),e.jsxs("li",{className:s=="mode-lite"?"active":"",style:{whiteSpace:"nowrap"},onClick:()=>{c(!l)},children:[e.jsx("span",{}),l?"Lite mode off":"Lite mode on"]})]})})]})}function Je(){const{check:t,setAbsPath:i}=U();return e.jsx("div",{className:"bottom-nav",children:e.jsx("ul",{children:he.map((s,a)=>e.jsxs("li",{className:s.u+" "+(t(s.u)?"active":""),onClick:()=>i([s.u]),children:[e.jsx("span",{className:"label",children:s.n}),e.jsx("span",{className:"icon "+s.u})]},a))})})}function Ie(){const{check:t}=U();return t("categories")&&e.jsx("div",{className:"page-categories"})}function Ge(){var h;const{pathList:t,check:i,navBack:s}=U(),{user:a}=C(),{favorites:l,fetchFavorites:c,setFavorites:r,deleteFavorite:o}=ue(),{addProductToCart:n}=V(),[d,m]=u.useState("All");return u.useEffect(()=>{c({add_labels:!0,label:d=="All"?void 0:d})},[a,t,d]),i("favorites")&&(a?e.jsxs("div",{className:"page-favorites",children:[e.jsxs("div",{className:"top-favorites _flex",children:[e.jsx("div",{className:"return",onClick:()=>{s()}}),e.jsx("div",{className:"label _lr-auto",children:"Favorites"})]}),e.jsxs("div",{className:"favorites-ctn",children:[e.jsxs("div",{className:"left",children:[e.jsx("div",{className:"filter-by-label-ctn",children:e.jsxs("div",{className:"filter-by",ref:oe({posistion:20}),children:[e.jsx("h4",{children:"labels : "}),e.jsx("span",{className:"label "+(d=="All"?"all":""),onClick:()=>{m("All")},children:"All"}),(h=l==null?void 0:l.labels)==null?void 0:h.map(v=>e.jsx("span",{className:"label",style:{background:d==v?G(v):"",boxShadow:`${G(v)} 0px 0px 3px, ${G(v)} 0px 0px 3px, ${G(v)} 0px 0px 3px`},onClick:()=>{m(v)},children:v}))]})}),l==null?void 0:l.list.map(v=>e.jsx(Xe,{favorite:v,onQuantityChange:()=>{c({favorite_id:v.id}).then(x=>{if(x!=null&&x.list[0]){const g=x==null?void 0:x.list[0];l&&r({...x,list:l.list.map(y=>y.id==v.id?g:y)})}})},addProductToCart:()=>{v.product&&n({product_id:v.product.id,quantity:1}).then(x=>{x!=null&&x.id&&c({favorite_id:v.id}).then(g=>{if(g!=null&&g.list[0]){const y=g==null?void 0:g.list[0];l&&r({...g,list:l.list.map(N=>N.id==v.id?y:N)})}})})},onDelete:()=>{o(v.id)}},v.id))]}),e.jsx("div",{className:"right"})]}),e.jsx(ve,{}),e.jsx(je,{})]}):e.jsx("div",{className:"page-favorites",children:e.jsx(Q,{detail:"Google connexion is required to access your favorites"})}))}function Xe({favorite:t,onClick:i,changeLabel:s,onDelete:a,onShare:l,onQuantityChange:c,addProductToCart:r}){var d,m,h,v,x,g;const o=t.product,{qs:n}=U();return console.log(t.id,(o==null?void 0:o.quantity)!=null,(o==null?void 0:o.quantity)!=null,parseInt((o==null?void 0:o.quantity)+"")!=0,((d=o==null?void 0:o.quantity)==null?void 0:d.toString())!="0"),o&&e.jsx("div",{className:"favorites-item",onClick:()=>{i==null||i(t),n({product_id:t.product_id}).setAbsPath(["products","detail"])},children:e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"image",style:{background:B(o.images[0])}}),e.jsxs("div",{className:"info-right  _limit-text",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"a",children:[e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:o.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:o.description})]}),e.jsxs("div",{className:"stars",children:[e.jsx("div",{className:"star "+((m=o.note)!=null&&m.star?"":"vide")}),e.jsx("div",{className:"note",children:((h=o.note)==null?void 0:h.star)||0}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"vote",children:((v=o.note)==null?void 0:v.votes)||0}),e.jsx("div",{className:"users"}),!((x=o.note)!=null&&x.star)&&e.jsx("div",{className:"new",children:"New"})]})]}),e.jsx("div",{className:"price ",children:e.jsxs("span",{className:"current",children:[o.price.toLocaleString()," ","$"]})}),o.quantity!=null&&o.quantity!=null&&parseInt(o.quantity+"")!=0&&((g=o.quantity)==null?void 0:g.toString())!="0"?e.jsx(le,{canNull:!0,product:o,onChange:y=>{c==null||c(y)}}):e.jsxs("div",{className:"add-btn",onClick:y=>{r(),y.stopPropagation(),y.preventDefault()},children:["Add ",e.jsx("span",{children:" to cart"})]})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"options",style:{position:"relative"},onClick:y=>{y.stopPropagation(),y.preventDefault()},children:[e.jsx("div",{style:{filter:P("#123").result.filter},className:"delete",onClick:()=>{a==null||a(t)},children:e.jsx("span",{})}),e.jsx("div",{style:{filter:P("#123").result.filter},className:"share",onClick:()=>l==null?void 0:l(t),children:e.jsx("span",{})})]}),e.jsxs("div",{className:"label",style:{background:G(t.label)},onClick:y=>{s==null||s(t),y.stopPropagation(),y.preventDefault()},children:[t.label," "]})]})]})]})})}function Ye(){const{check:t,pathList:i,navBack:s,qs:a}=U(),{visites:l,fetchVisites:c}=ee(),{current:r}=U(),{user:o}=C(),{carts:n,fetchCarts:d,deleteCommand:m,confirmCommand:h}=V(),[v,x]=u.useState(0),[g,y]=u.useState(0),[N,D]=u.useState(0),[S,L]=u.useState((n==null?void 0:n.list.map(p=>p))||[]),[T]=u.useState({});return T.selecteds=S,u.useEffect(()=>{let p=0,f=0;S.forEach(E=>{p+=Number(E.quantity),f+=E.price*E.quantity}),y(f),D(p)},[v,S]),u.useEffect(()=>{L((n==null?void 0:n.list.filter(p=>!!T.selecteds.find(f=>f.id==p.id)))||[])},[n]),u.useEffect(()=>{o&&r("cart")&&d({}).then(p=>{p!=null&&p.list&&L(p.list)}),!l&&o&&r("cart")&&c({})},[o,i]),t("cart")&&(o?e.jsxs("div",{className:"page-cart",children:[e.jsxs("div",{className:"top-cart _flex",children:[e.jsx("div",{className:"return",onClick:()=>{s()}}),e.jsx("div",{className:"label _lr-auto",children:"Cart"})]}),e.jsxs("div",{className:"cart-ctn",children:[e.jsxs("div",{className:"items",children:[e.jsxs("div",{className:"select-all",children:[e.jsx("div",{className:"btn "+(S.length<((n==null?void 0:n.list.length)||0)?"":"select"),onClick:()=>{S.length<((n==null?void 0:n.list.length)||0)?L((n==null?void 0:n.list.map(p=>p))||[]):L([])},children:S.length<((n==null?void 0:n.list.length)||0)?"Select All":"Deselect All"}),e.jsxs("a",{className:"my-command ",onClick:()=>a({page:"command"}).setAbsPath(["profile"]),children:["my orders ",e.jsx("span",{})]})]}),n==null?void 0:n.list.map(p=>e.jsx(Ke,{selected:!!S.find(f=>f.id==p.id),cart:p,onSelect:f=>{S.find(E=>E.id==f.id)?L(S.filter(E=>E.id!=f.id)):L([...S,f])},onDelete:f=>{m(f.id)},onQuantityChange:()=>{x(v+1)},onLike:()=>{d({}).then(f=>{f!=null&&f.list&&L(f.list)})}},p.id))]}),e.jsxs("div",{className:"right",children:[e.jsxs("div",{className:"go-to-checkout",children:[e.jsx("div",{className:"title",onClick:()=>{h({list:S.map(p=>p.id)})},children:"Go to checkout"}),e.jsx("p",{children:"Available delivery methods and times can be selected when placing an order."}),e.jsxs("div",{className:"infos",children:[e.jsxs("div",{className:"count",children:[e.jsx("h2",{children:"Your cart"}),e.jsxs("div",{className:"val",children:[N," products ",e.jsx("span",{})," "]})]}),e.jsxs("div",{children:[e.jsxs("span",{children:["Products (",S.length,")"]}),e.jsxs("span",{className:"initial-price",children:[g.toLocaleString(),"$"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text",children:[e.jsx("div",{children:"Discount"}),e.jsxs("div",{className:"detail",children:["More details ",e.jsx("span",{})]})]}),e.jsxs("span",{className:"discount",children:[0 .toLocaleString(),"$"]})]})]}),e.jsxs("div",{className:"_flex",children:[e.jsx("h1",{children:"total cost"}),e.jsxs("h1",{className:"total",children:[g.toLocaleString(),"$"]})]})]}),e.jsx("div",{className:"cart-cover-image"})]})]}),e.jsx(ve,{mode:"h"}),e.jsx(je,{mode:"h"})]}):e.jsx("div",{className:"page-cart",children:e.jsx(Q,{detail:"Google connexion is required to access your cart"})}))}let de={metal:"gold",gem:"Diamon",size:56};function Ke({cart:t,selected:i,onClick:s,onSelect:a,onDelete:l,onLike:c,onShare:r,onQuantityChange:o}){return e.jsx("div",{className:"cart-item",onClick:()=>s==null?void 0:s(t),children:e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"image",style:{background:B(t.images[0])}}),e.jsxs("div",{className:"info-right  _limit-text",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"a",children:[e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:t.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:t.description})]}),e.jsxs("div",{className:"features",children:[Object.keys({...de}).slice(0,2).map(n=>e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"k",children:n}),":",e.jsx("span",{className:"v",children:(de||{})[n]})]},n)),Object.keys(de||{}).length>2&&e.jsxs("div",{className:"all-features",children:["See more ",e.jsx("span",{})]})]})]}),e.jsx("div",{className:"price ",children:e.jsxs("span",{className:"current",children:[(t.price*t.quantity).toLocaleString()," ","$"]})}),e.jsx(le,{cart:t,onChange:()=>{o==null||o(t)}})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"options",style:{position:"relative"},children:[e.jsx(ke,{elm:t,onChange:()=>c==null?void 0:c(t)}),e.jsx("div",{style:{filter:P("#123").result.filter},className:"delete",onClick:()=>{l==null||l(t)},children:e.jsx("span",{})}),e.jsx("div",{style:{filter:P("#123").result.filter},className:"share",onClick:()=>r==null?void 0:r(t),children:e.jsx("span",{})})]}),e.jsx("div",{className:"check-box "+(i?"selected":""),onClick:()=>a==null?void 0:a(t),children:i?"selected":"not selected"})]})]})]})})}const Ze={};function Qe(){const{user:t}=C(),{commands:i,fetchCommands:s}=V();return u.useEffect(()=>{t&&s({})},[t]),e.jsx("div",{className:"page-command",children:e.jsx("div",{className:"orders",children:i==null?void 0:i.list.map(a=>e.jsx(es,{order:a,onShare:()=>{},onClick:()=>{},onLike:()=>{}},a.id))})})}let me={metal:"gold",gem:"Diamon",size:56};function es({order:t,onClick:i,onLike:s,onShare:a,onComment:l}){return e.jsx("div",{className:"order-item",onClick:()=>i==null?void 0:i(t),children:e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"image",style:{background:B(t.images[0])}}),e.jsxs("div",{className:"info-right  _limit-text",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"a",children:[e.jsxs("h3",{className:"name _limit-text",children:[e.jsx("span",{className:"product-title",children:t.title})," ",e.jsx("span",{className:"slash",children:"/"})," ",e.jsx("span",{children:t.description})]}),e.jsxs("div",{className:"features",children:[Object.keys({...me}).slice(0,2).map(c=>e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"k",children:c}),":",e.jsx("span",{className:"v",children:(me||{})[c]})]},c)),Object.keys(me||{}).length>2&&e.jsxs("div",{className:"all-features",children:["See more ",e.jsx("span",{})]})]})]}),e.jsx("div",{className:"price ",children:e.jsxs("span",{className:"current",children:[(t.price*t.quantity).toLocaleString()," ","$"]})}),e.jsx("div",{className:"status",style:{background:Ze[t.status]},children:t.status})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"options",children:[e.jsx("div",{style:{filter:P("#123").result.filter},className:"to-favorites",onClick:()=>s==null?void 0:s(t),children:e.jsx("span",{})}),e.jsx("div",{style:{filter:P("#123").result.filter},className:"start-comment",onClick:()=>{l==null||l(t)},children:e.jsx("span",{})}),e.jsx("div",{style:{filter:P("#123").result.filter},className:"share",onClick:()=>a==null?void 0:a(t),children:e.jsx("span",{})})]}),e.jsxs("div",{className:"ref-id",onClick:c=>{navigator.clipboard.writeText("#"+t.id.split("-")[0]);const o=c.currentTarget.querySelector("span");o.classList.add("anim-top"),setTimeout(()=>{o.classList.remove("anim-top"),o.classList.add("anim-btm"),setTimeout(()=>{o.classList.remove("anim-btm")},300)},300)},children:["Ref Id : #",t.id.split("-")[0]," ",e.jsx("span",{style:{filter:P("#333").result.filter}})]})]})]})]})})}function ss(){const{updateUser:t,user:i}=C(),[s,a]=u.useState({});return u.useEffect(()=>{a({name:i==null?void 0:i.name,address:(i==null?void 0:i.address)||"Yopouon",phone:(i==null?void 0:i.phone)||"+7(999)862-74-41",date:i==null?void 0:i.created_at,money:(i==null?void 0:i.money)||"USD"})},[i]),e.jsxs("div",{className:"page-edit",children:[e.jsx("div",{className:"photo",style:{background:i&&B(i.photos[0])},children:e.jsx("div",{className:"div",children:e.jsx("label",{htmlFor:"new-photo",className:"new-photo",children:e.jsx("input",{style:{display:"none"},type:"file",name:"new-photo",id:"new-photo",onChange:l=>{var c;t({photo:(c=l.currentTarget.files)==null?void 0:c[0]})}})})})}),e.jsxs("div",{className:"infos",children:[e.jsxs("label",{htmlFor:"edit-email",className:"edit-email",children:[e.jsx("div",{className:"prompt",children:"User Email"}),e.jsx("div",{className:"icon"}),e.jsx("input",{id:"edit-email",type:"text",placeholder:"Edit Name",value:i==null?void 0:i.email})]}),e.jsxs("label",{htmlFor:"edit-name",className:"edit-name",children:[e.jsx("div",{className:"prompt",children:"Name"}),e.jsx("div",{className:"icon"}),e.jsx("input",{id:"edit-name",type:"text",placeholder:"Edit Name",value:s.name,onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("div",{className:"send",onClick:()=>{}})]}),e.jsxs("label",{htmlFor:"edit-phone",className:"edit-phone",children:[e.jsx("div",{className:"prompt",children:"Phone"}),e.jsx("div",{className:"icon"}),e.jsx("input",{id:"edit-phone",type:"text",placeholder:"Search Product",value:s.phone,onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("div",{className:"send",onClick:()=>{}})]}),e.jsxs("label",{htmlFor:"edit-address",className:"edit-address",children:[e.jsx("div",{className:"prompt",children:"Address"}),e.jsx("div",{className:"icon"}),e.jsx("input",{id:"edit-address",type:"text",placeholder:"Search Product",value:s.address,onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("div",{className:"send",onClick:()=>{}})]}),e.jsxs("label",{htmlFor:"edit-date",className:"edit-date",children:[e.jsx("div",{className:"prompt",children:"date of birth"}),e.jsx("div",{className:"icon"}),e.jsx("input",{type:"text",placeholder:"dd-mm-yyyy",value:new Date(s.date).toDateString(),onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("input",{style:{display:"none"},id:"edit-date",type:"date",min:"1997-01-01",max:new Date().toDateString(),placeholder:new Date().toDateString(),onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("div",{className:"send",onClick:()=>{}})]}),e.jsxs("label",{htmlFor:"edit-devise",className:"edit-devise",children:[e.jsx("div",{className:"prompt",children:"Default Money"}),e.jsx("div",{className:"icon"}),e.jsx("input",{id:"edit-devise",type:"text",placeholder:"Search Product",value:s.money,onChange:l=>{a({...s,text:l.currentTarget.value})}}),e.jsx("div",{className:"send",onClick:()=>{}})]})]})]})}const be={edit:"Edit Profile",command:"Orders",messages:"Messages",setting:"Setting"};function ts(){const{check:t,json:i}=U(),{user:s,disconnection:a,getAccess:l}=C(),[c,r]=u.useState(!0),[o,n]=u.useState("");u.useEffect(()=>{t("profile")&&n((i==null?void 0:i.page)||"")},[i]);const d={command:e.jsx(Qe,{}),edit:e.jsx(ss,{})};return t("profile")&&e.jsxs("div",{className:"page-profile",children:[e.jsx("div",{className:"nav "+(c?"open":"close"),onClick:()=>{r(!1)},children:e.jsxs("div",{className:"nav-ctn",onClick:m=>{m.preventDefault(),m.stopPropagation()},children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"close",onClick:()=>{r(!1)}}),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cover-image"}),e.jsx("div",{className:"photo",style:{background:(s==null?void 0:s.photos[0])&&B(s==null?void 0:s.photos[0])}})]}):e.jsxs("div",{className:"login",onClick:()=>{l()},children:[e.jsx("div",{className:"icon",style:{}}),e.jsx("h3",{className:"label",children:"Login"}),e.jsx("span",{className:"next"})]})]}),e.jsx("h1",{className:"name",children:s==null?void 0:s.name}),s&&e.jsx("div",{className:"email _limit-text",children:s==null?void 0:s.email}),e.jsxs("ul",{children:[e.jsxs("li",{className:"edit "+(o=="edit"?"active":"")+" "+(s?"":"hide"),onClick:()=>{r(!1),n("edit")},children:[" ",e.jsx("span",{className:"icon",style:{filter:P("#123").result.filter}}),"Edit Profile",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"command "+(o=="command"?"active":"")+" "+(s?"":"hide"),onClick:()=>{r(!1),n("command")},children:[" ",e.jsx("span",{className:"icon",style:{filter:P("#123").result.filter}}),"My Orders",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"messages "+(o=="messages"?"active":"")+" "+(s?"":"hide"),onClick:()=>{r(!1),n("messages")},children:[" ",e.jsx("span",{className:"icon",style:{filter:P("#123").result.filter}}),"messages",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"setting "+(o=="setting"?"active":"")+" "+(s?"":"hide"),onClick:()=>{r(!1),n("setting")},children:[" ",e.jsx("span",{className:"icon",style:{filter:P("#123").result.filter}}),"setting",e.jsx("span",{className:"next"})]}),e.jsxs("li",{className:"about "+(o=="about"?"active":""),onClick:()=>{r(!1),n("about")},children:[" ",e.jsx("span",{className:"icon",style:{filter:P("#123").result.filter}}),"about",e.jsx("span",{className:"next"})]})]}),e.jsx("div",{className:"version",children:"By Sublymus Studio v:1.0.1"}),s&&e.jsxs("div",{className:"disconnect",onClick:()=>{a()},children:[e.jsx("span",{className:"icon",style:{filter:P("#c43d4c").result.filter}}),"Log out"]})]})}),e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"title",children:[e.jsx("span",{className:"option-nav",onClick:()=>{r(!0)}}),e.jsxs("h1",{children:[" ",be[o]||be.edit]})]}),s?d[o]||d.edit:d.about]})]})}function is(){const{authenticateUser:t}=C(),{openChild:i,currentChild:s,back_color:a,blur:l}=Z(),c=u.useRef(null),{pathList:r}=U();return u.useEffect(()=>{i(void 0)},[r]),u.useEffect(()=>{t(),window.addEventListener("blur",()=>{})},[]),e.jsxs("div",{className:"app",style:{width:"100%",height:"100%"},ref:o=>{},children:[s&&e.jsx("div",{className:"child-viewer",onContextMenu:o=>{o.preventDefault(),i(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:a},onClick:()=>{i(void 0)},onContextMenu:o=>{o.preventDefault(),i(void 0)},children:s})}),e.jsx(Ve,{}),e.jsxs("div",{ref:c,className:"app-ctn",style:{filter:l?"blur(10px)":""},children:[e.jsx(ze,{}),e.jsx(Ie,{}),e.jsx(Ge,{}),e.jsx(Ye,{}),e.jsx(ts,{})]}),e.jsx(Je,{})]})}const as=t=>t,rs=as(e.jsx(Le.StrictMode,{children:e.jsx(is,{})}));export{rs as ClientView};

import{j as e,c as Ze,d as Fe,g as Ke,u as st,l as Ge,e as Xe,t as Ct,f as jt,C as He}from"./BindToParentScroll-DBxHG4Le.js";import{u as ge,a as Ae,F as Je,b as kt,c as Et,d as tt,G as X,S as it,I as fe,C as ms,e as Ot,A as Ft,O as ps,U as Yt,f as Os,g as Gs,h as Fs}from"./ChoiseRole-CxSrej8M.js";import{H,r as x,g as Ks,L as Js,R as Zs}from"./index-B_gxtWp7.js";import{u as A,E as yt}from"./ListPaging-Ci2cFYHs.js";import{S as Qs,t as gt}from"./SearchFilterBindJson-BZbWq4O4.js";import{t as es}from"./Transmit-znnnGx_1.js";import{e as Ms}from"./emoji-ce0Jjmmu.js";function Xs(){const c=localStorage.getItem("store_name"),{getAccess:t}=A();return e.jsx("div",{className:"page-auth",children:e.jsxs("div",{className:"auth-ctn",children:[e.jsx("div",{className:"image"}),e.jsxs("div",{className:"form",children:[e.jsxs("h1",{className:"auth-title",children:[c==null?void 0:c.toUpperCase()," DASHBOARD"]}),e.jsxs("h5",{className:"auth-prompt",children:["Read more ?"," ",e.jsx("span",{onClick:()=>{},children:"Click here"})]}),e.jsxs("div",{className:"google",onClick:()=>{t()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Connexion"})]}),e.jsx("p",{children:"Google connexion is required to get access to sublymus Dash board service."})]})]})})}function Ds({blur:c,className:t}){const{pathList:n,setAbsPath:s}=ge(),{user:a,store:i,disconnection:r}=A(),{T:l,setT:o}=Ae(),u=n[1]||"products";return e.jsxs("div",{className:"nav-bar "+(t||"min")+" "+(a?c?"blur":"":"blur"),children:[e.jsxs("div",{className:"nav-logo",children:[e.jsx("div",{className:"logo",style:{backgroundImage:`url(${`${H}${i==null?void 0:i.banners[0]}`})`}}),e.jsx("div",{className:"label",children:i==null?void 0:i.name})]}),e.jsxs("div",{className:"dash-top-right",children:[e.jsxs("div",{className:"dark-mode "+l,onClick:()=>{o(l?"":"active")},children:[e.jsx("span",{className:"dark-mode-btn"})," ",e.jsx("span",{className:"dark-white-btn",children:" "})]}),e.jsxs("div",{className:"notf",children:[" ",e.jsx("span",{})]})]}),e.jsx("div",{className:"nav-link",children:e.jsxs("ul",{children:[e.jsxs("li",{className:u=="products"||u=="features"||u=="categories"||u=="catalogs"?"active":"no",onClick:()=>{s(["products"])},children:[e.jsx("span",{className:"product"}),e.jsx("label",{children:"STORE"})]}),e.jsxs("li",{className:u=="clients"||u=="collaborators"||u=="roles"?"active":"no",onClick:()=>{s(["clients"])},children:[e.jsx("span",{className:"users"}),e.jsx("label",{children:"USERS"})]}),e.jsxs("li",{className:u=="chat"?"active":"no",onClick:()=>{s(["chat"])},children:[e.jsx("span",{className:"chat"}),e.jsx("label",{children:"CHAT"})]})]})}),e.jsxs("div",{className:"nav-profile",children:[e.jsx("div",{className:"img",style:{background:`no-repeat center/cover url(${a!=null&&a.photos[0].startsWith("/")?H:""}${a==null?void 0:a.photos[0]})`}}),e.jsx("div",{className:"name",children:a==null?void 0:a.name}),e.jsx("div",{className:"logout",onClick:()=>{r()},children:"logout"})]}),e.jsx("div",{className:"logut-icon",onClick:()=>{r()}})]})}const et=Ze(c=>({products:void 0,selectedProduct:void 0,async fectProductCommands({limit:t,page:n,status:s,no_status:a,user_id:i,product_id:r}){const l=A.getState().getHeaders();if(!l)return;const o={};o.user_id=!0,o.store_id=l.store.id,o.product_id=r||"",o.limit=t||25,o.page=n||1,o.user_id=i||"",o.status=s||"",o.no_status=a||"";const u=new URLSearchParams({});for(const k in o){const V=o[k];u.set(k,V)}const _=await(await fetch(`${H}/get_commands/?${u.toString()}`,{headers:l.headers})).json();if(!(!_||!_.list))return _},async setProductById(t){const n=et.getState().products,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedProduct:s}));else if(A.getState().store){const i=await et.getState().fetchProducts({query:{product_id:t}});c(()=>({selectedProduct:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await et.getState().fetchProducts({query:{product_id:t}});c(()=>({selectedProduct:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async removeProduct(t){const n=A.getState().getHeaders();if(!n)return;const a=await(await fetch(`${H}/delete_product/${t}`,{method:"DELETE",headers:n.headers})).json();return Ae.getState().fetchStoreVar(),a==null?void 0:a.isDeleted},async createProduct(t){const n=A.getState().getHeaders();if(!n)return;t.index=t.index||0,t.is_dynamic_price=t.is_dynamic_price||!0;const s=new FormData,a=[];if(["images","model_images"].forEach(i=>{const r=t[i];if(r&&Object.keys(r).length>0){const l=[];Object.keys(r).sort((o,u)=>{var m,_;return(((m=r[o])==null?void 0:m.index)||0)-(((_=r[u])==null?void 0:_.index)||0)}).forEach(o=>{l.push(o),r[o].isLocal&&s.append(o,r[o].file)}),s.append(i,JSON.stringify(l))}else if(i=="images")return a.push(i+" is not defined")}),["title","description","stock","category_id","index","price","is_dynamic_price"].forEach(i=>{if(t[i]!=null)s.append(i,t[i]);else return a.push(i+" is not defined")}),a.length==0){const r=await(await fetch(`${H}/create_product`,{method:"POST",body:s,headers:n.headers})).json();if(!r||!r.id)return a.push("Server Error, Try Later"),a;c(()=>({selectedProduct:r})),Ae.getState().fetchStoreVar()}else return a},async updateProduct(t){if(!t.product_id)return console.log("Product_id required");const n=A.getState().getHeaders();if(!n)return;const s=new FormData;let a=!1;["images","model_images"].forEach(r=>{const l=t[r];if(l&&Object.keys(l)){a=!0;const o=[];Object.keys(l).sort((u,m)=>{var _,k;return(((_=l[u])==null?void 0:_.index)||0)-(((k=l[m])==null?void 0:k.index)||0)}).forEach(u=>{o.push(u),l[u].isLocal&&s.append(u,l[u].file)}),s.append(r,JSON.stringify(o))}}),s.append("product_id",t.product_id),["title","description","stock","category_id","status","index","price","is_dynamic_price"].forEach(r=>{t[r]&&(s.append(r,t[r]),a=!0)});let i=null;if(a&&(i=await fetch(`${H}/update_product`,{method:"PUT",body:s,headers:n.headers})),t.scene_dir){const r=new FormData;r.append("scene_dir",t.scene_dir),r.append("product_id",t.product_id),i=await fetch(`${H}/update_view_product`,{method:"PUT",body:r,headers:n.headers})}i&&(i=await i.json(),console.log("newProduct",i),c(()=>({selectedProduct:i})))},async fetchProducts(t){const n=A.getState().getHeaders();if(!n)return;t||(t={}),t.all_status=!0,t.store_id=n.store.id;const s=new URLSearchParams({});for(const r in t){const l=t[r];l&&s.set(r,l)}const i=await(await fetch(`${H}/get_products/?${s.toString()}`,{headers:n.headers})).json();if(!(!i||!i.list))return c(()=>({products:i})),i},async setSelectedProduct(t){c(()=>({selectedProduct:t}))}}));function Ys(){const{current:c,setAbsPath:t,qs:n,json:s}=ge(),{store:a}=A(),{fetchProducts:i,products:r,setSelectedProduct:l}=et(),[o,u]=x.useState({sortBy:"id",sortableColumns:["id","title","stock","price","date","status"],limit:r==null?void 0:r.limit,page:r==null?void 0:r.page,total:r==null?void 0:r.total,filter:{price:Je([0,1e5],[0,1e4]),stock:Je([0,1e4],[0,1e4]),status:kt(["PAUSE","TRASH","NEW"],[]),index:Et([0,100]),is_dynamic_price:tt(),hasScene:tt()}}),[m]=x.useState({});return m.json=s,m.filter=o,x.useEffect(()=>{Qs(m.filter,m.json)&&(console.log("diff",m.filter),u({...m.filter}))},[s,a]),x.useEffect(()=>{c("products")&&a&&i({...o,filter:void 0})},[a]),c("products")&&e.jsx("div",{className:"product-list",ref:Fe,children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:o,items_height:80,id:"product_list",datas:(r==null?void 0:r.list)||[],itemsMapper:{images:{getView(_,k,V,K){return X.ImageElement().getView(_,`${H}${k[0]}`,V,K)}},id:{getView(_,k,V,K){return e.jsxs("div",{ref:K,children:["#",k.split("-")[0]]},V.id)}},title:X.StringElement({size_interval:[50,200]}),status:it,stock:X.StringElement(),category_id:{getView(_,k,V,K){return e.jsxs("div",{ref:K,children:["#",k.split("-")[0]]},V.id)}},price:X.StringElement({size:200}),created_at:X.DateStringElement({size:200})},onItemsSelected:(_,k)=>{k.forEach(V=>{V.$itemRef&&(V.$itemRef.style.background="")}),_.forEach(V=>{V.$itemRef&&(V.$itemRef.style.background="#00f2")}),l(_[0]),n({product_id:_[0].id}).setAbsPath(["products","dash_product"])},onQuery:_=>{i(_)},top_height:40,canAddNew:!0,canPaginate:!0,onNewRequired:()=>{t(["products","new_product"])}})})})}function fs({placeholder:c,value:t,isCheckRequired:n,label:s,max:a,min:i,check:r,openEditor:l,prompt:o,editable:u,onChange:m}){const[_,k]=x.useState(t||""),[V,K]=x.useState(0),[z,g]=x.useState(""),[b,w]=x.useState(l||!1),[T,O]=x.useState(0),[p,S]=x.useState(0),ee=x.useRef(null),N=x.useRef(null),U=x.useRef(null),[P]=x.useState({validation:F=>(console.log(F,i&&F.length<i,F.length,i),g(""),F=F.toString().trim(),i&&F.length<i?(g(`Minimum length ${i}`),!1):a&&F.length>a?(g(`Maximum length ${a}`),!1):(m==null||m(F),!0))});x.useEffect(()=>{n&&P.validation(_)},[n]);const $=()=>{if(ee.current){const B=`${-10-ee.current.getBoundingClientRect().height}px`;ee.current.style.top=B}if(N.current){const B=`${-10-N.current.getBoundingClientRect().height}px`;N.current.style.top=B}};return e.jsxs("div",{className:"textarea-text textarea",children:[e.jsx("div",{className:"textarea-top",children:e.jsxs("div",{className:"left-side",children:[e.jsxs("div",{className:"label",children:[s," "]}),o&&e.jsx("div",{className:"textarea-info",onMouseEnter:F=>{if(F.target.className!=="textarea-info")return N.current.style.display="none";clearTimeout(T),N.current&&(N.current.style.display="block"),$()},onMouseLeave:()=>{O(setTimeout(()=>{N.current&&(N.current.style.display="none")},300))},children:e.jsx("div",{className:"promt",ref:N,children:o})}),u&&e.jsx("div",{className:"edit",style:{background:`no-repeat center/80% url(${b?"/src/res/x.png":"/src/res/pencil.png"})`},onClick:()=>{const F=!b;w(F==!1?!P.validation(_):!0),F&&setTimeout(()=>{var B;(B=U.current)==null||B.focus()}),$()},onMouseEnter:F=>{if(F.target.className!=="edit")return N.current.style.display="none";clearTimeout(p),ee.current&&(ee.current.style.display="block"),$()},onMouseLeave:()=>{S(setTimeout(()=>{ee.current&&(ee.current.style.display="none")},300))},children:e.jsx("div",{className:"promt",ref:F=>{ee.current=F,$()},children:b?"Close editor":"click here to edit value"})})]})}),!b&&e.jsx("div",{className:"value",children:_}),b&&e.jsxs("div",{className:"textarea-editor",children:[e.jsx("textarea",{ref:U,spellCheck:"false",rows:5,placeholder:c,value:_,onChange:F=>{let B=F.currentTarget.value;for(;B.includes("  ");)B=B.replace("  "," ");B.length>(a||Number.MAX_VALUE)||(k(B),g(""),K(B.length))},onBlur:()=>{r=="auto"&&P.validation(_)&&setTimeout(()=>{w(!1)},0)}}),e.jsxs("div",{className:"count",children:[" ",e.jsx("div",{className:"message",children:z}),a&&`${V}/${a}`]})]})]})}function gs({direction:c="",onClick:t}){return e.jsxs("div",{className:"preview-3d-model-card "+c,onClick:t,children:[e.jsx("div",{className:"image "+c,style:{backgroundImage:"url(/src/res/ert.avif)"}}),e.jsxs("div",{className:"text-side",children:[e.jsx("div",{className:"top",children:"PREVIEW 3D MODEL"}),e.jsxs("div",{className:"features",children:[3," FEATURE","S"]}),e.jsx("div",{className:"prompt",children:"Loader File is missing"})]})]})}function ea({}){return e.jsxs("div",{className:"statistic-card",children:[e.jsxs("div",{className:"text",children:[e.jsx("h1",{className:"title",children:"Product Statistic"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"title",children:[2e4.toLocaleString(),"  â‚½ "]}),e.jsxs("h2",{className:"description",children:["since ",new Date(Date.now()-1e3*60*60*24*30).toDateString()]})]})]}),e.jsx(ta,{})]})}const Ps={with:250,height:120,bars:[{value:80},{value:15},{value:25},{value:10},{value:15},{value:25},{value:15},{value:25},{value:90},{value:25},{value:30},{value:25},{value:30},{value:50},{value:100},{value:90},{value:80},{value:70},{value:60},{value:60},{value:70},{value:80}]};function ta(){return e.jsx("div",{className:"bar-chart",children:e.jsx("div",{className:"bars",children:Ps.bars.map((c,t)=>e.jsx("div",{className:"bar",children:e.jsx("div",{className:"level",style:{height:`${c.value/100*Ps.height}px`,background:`linear-gradient(rgb(0, 90, 180),rgb(23, 108, 194)${((c.value<35?35:c.value)-25)*.7}% , rgb(75, 165, 255)100%)`}})},t))})})}let sa=0;function ts({onChange:c,icon:t,ext:n,label:s,file_name:a}){const[i]=x.useState((Math.random()+sa++).toString()),[r,l]=x.useState(a||"");return e.jsxs("div",{className:"loader-img",children:[e.jsx("input",{type:"file",style:{display:"none"},accept:"application/zip",name:"img",id:i,onChange:o=>{var V;const u=(V=o.target.files)==null?void 0:V[0];if(!u)return;const m=u.name.toLowerCase(),_=m.lastIndexOf("."),k=m.substring(_+1,m.length);if(n&&!n.includes(k))return console.log({_ext:k,ext:n,n:m});l(u.name),c(u)}}),e.jsxs("label",{htmlFor:i,className:"loader-img-ctn",children:[e.jsx("div",{className:"back",children:e.jsx("div",{className:"icon",style:{background:t?`no-repeat center/50% url(${t})`:""}})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"label",children:s??"Upload file"}),e.jsx("div",{className:"prompt",children:r&&(r.length>25?r.substring(0,10)+"..."+r.substring(r.length-10,r.length):r)||"Add new File"})]}),e.jsx("div",{className:"load-icon"})]})]})}const vt=Ze(c=>({categories:void 0,selectedCategory:void 0,categoryProducts:void 0,async setCategoryById(t){const n=vt.getState().categories,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedCategory:s}));else if(A.getState().store){const i=await vt.getState().fetchCategories({query:{user_id:t}});c(()=>({selectedCategory:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await vt.getState().fetchCategories({query:{user_id:t}});c(()=>({selectedCategory:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async removeCategory(t){if(!t)return;const n=A.getState().getHeaders();if(!n)return;const a=await(await fetch(`${H}/delete_category/${t}`,{method:"DELETE",headers:n.headers})).json();return Ae.getState().fetchStoreVar(),a==null?void 0:a.isDeleted},async createCategory(t){const n=A.getState().getHeaders();if(!n)return;t.index=t.index||0;const s=new FormData,a=[];if(["label","description","catalog_id","index"].forEach(i=>{if(t[i]!=null)s.append(i,t[i]);else return a.push(i+" is not defined")}),a.length==0){const r=await(await fetch(`${H}/create_category`,{method:"POST",body:s,headers:n.headers})).json();if(console.log(r),!r||!r.id)return a.push("Server Error, Try Later"),a;c(()=>({selectedCategory:r})),Ae.getState().fetchStoreVar()}else return a},async fetchCategoryProducts(t){if(!(t!=null&&t.category_id))return;const n=A.getState().getHeaders();if(n)try{const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),s.category_id=t==null?void 0:t.category_id,s.all_status=!0,s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_products/?${a.toString()}`,{headers:n.headers})).json();if(!r||!r.list)return;c(()=>({categoryProducts:r}))}catch(s){return console.warn(s.message)}},setSelectedCategory(t){c(()=>({selectedCategory:t}))},async updateCategory(t){const n=A.getState().getHeaders();if(!n)return;const s=new FormData;let a=!1;s.append("category_id",t.category_id),["label","index","status","catalog_id","description"].forEach(r=>{t[r]&&(s.append(r,t[r]),a=!0)});let i=null;if(a&&(i=await fetch(`${H}/update_category`,{method:"PUT",body:s,headers:n.headers})),t.scene_dir){const r=new FormData;r.append("scene_dir",t.scene_dir),r.append("category_id",t.category_id),i=await fetch(`${H}/update_view_category`,{method:"PUT",body:r,headers:n.headers})}i&&(i=await i.json(),c(()=>({selectedCategory:i})))},async fetchCategories(t){const n=A.getState().getHeaders();if(n)try{const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),t!=null&&t.query.text&&(s.text=t.query.text),s.all_status=!0,s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_categories/?${a.toString()}`,{headers:n.headers})).json();return!r||!r.list?void 0:(c(()=>({categories:r})),r)}catch(s){console.warn(s.message);return}}}));function aa({onChange:c,category_id:t}){const{fetchCategories:n,categories:s}=vt(),[a,i]=x.useState(),[r,l]=x.useState("");return x.useEffect(()=>{n()},[]),x.useEffect(()=>{i(s==null?void 0:s.list.find(o=>o.id==t))},[s]),e.jsxs("div",{className:"choise-category",children:[e.jsxs("div",{className:"choise-ctn",onClick:()=>{l(r?"":"open")},children:[e.jsx("div",{className:"back",children:e.jsx("div",{className:"icon"})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"label",children:"Category"}),e.jsx("div",{className:"name",children:(a==null?void 0:a.label)||"select category"})]}),e.jsx("div",{className:"choise-icon",style:{transform:r?"rotate(180deg)":""}})]}),e.jsx("div",{className:"list-category "+r,style:{height:r?`${45*((s==null?void 0:s.list.length)||0)}px`:"0px"},children:s==null?void 0:s.list.map(o=>e.jsxs("div",{className:"item "+((a==null?void 0:a.id)==o.id?"selected":""),onClick:()=>{i(o),c==null||c(o.id)},children:[e.jsx("div",{className:"label",children:o.label}),e.jsxs("div",{className:"id",children:["#",o.id.split("-")[0]]})]},o.id))})]})}const St=Ze(c=>({features:void 0,selectedFeature:void 0,productsUseFeature:void 0,async setFeatureById(t){var s,a;const n=St.getState().selectedFeature||((s=St.getState().features)==null?void 0:s.list.find(i=>i.id==t));if(n)c(()=>({selectedFeature:n}));else{const i=(a=await St.getState().fetchFeatures({feature_id:t},!0))==null?void 0:a.list[0];c(()=>({selectedFeature:i&&{...i}}))}},async removeFeature(t){const n=A.getState().getHeaders();if(!n)return;const a=await(await fetch(`${H}/delete_feature/${t}`,{method:"DELETE",headers:n.headers})).json();return a==null?void 0:a.isDeleted},async fetchProductsUseFeature(t){c(()=>({productsUseFeature:et.getState().products}))},setSelectedFeature(t){c(()=>({selectedFeature:t}))},async createFeature(t){var i,r,l;const n=A.getState().getHeaders();if(!n)return console.log("not H");const s=new FormData;if(!(t.name=(i=t.name)==null?void 0:i.trim()))return console.log("not name");if(!["components","number","text","email","website","date","time","phone"].includes(t.view=(r=t.view)==null?void 0:r.trim()))return console.log("not View");if(!(t.icon||t.new_icon))return console.log("not icon");if(!t.product_id)return console.log("product_id must be defined");s.append("product_id",t.product_id),s.append("name",t.name),s.append("view",t.view),s.append("icon_0",t.new_icon),s.append("icon",JSON.stringify(["icon_0"]));for(const o of["required","placeholder","case","match","min","max","max_size"])t[o]!=null&&s.append(o,t[o]);(l=t.components)==null||l.forEach(o=>{var u,m,_;((m=((u=o.images)==null?void 0:u[0])&&o.images)==null?void 0:m[0])instanceof Blob&&(s.append(o.name+":images_0",(_=o.images)==null?void 0:_[0]),o.images=JSON.stringify([o.name+":images_0"]),o.distinct=o.name)}),t.components&&s.append("components",JSON.stringify(t.components));const a=await fetch(`${H}/create_feature`,{body:s,headers:n.headers,method:"POST"});try{const o=await a.json();return o!=null&&o.id?o:console.log("not ID")}catch(o){console.log(o)}},async updateFeature(t){var i,r,l;const n=A.getState().getHeaders();if(!n)return console.log("not H");const s=new FormData;if(!(t.name=(i=t.name)==null?void 0:i.trim()))return console.log("not name");if(!["components","number","text","email","website","date","time","phone"].includes(t.view=(r=t.view)==null?void 0:r.trim()))return console.log("not View");if(!(t.icon||t.new_icon))return console.log("not icon");t.product_id&&s.append("product_id",t.product_id),s.append("feature_id",t.id),s.append("store_id",n.store.id),s.append("name",t.name),s.append("view",t.view),t.new_icon&&s.append("icon_0",t.new_icon),s.append("icon",JSON.stringify(t.new_icon?["icon_0"]:t.icon));for(const o of["required","placeholder","case","match","min","max","max_size"])t[o]!=null&&s.append(o,t[o]);(l=t.components)==null||l.forEach(o=>{var u,m;((u=o.images)==null?void 0:u[0])instanceof Blob?(s.append(o.name+":images_0",(m=o.images)==null?void 0:m[0]),o.images=JSON.stringify([o.name+":images_0"]),o.distinct=o.name):o.images=JSON.stringify(o.images)}),t.components&&s.append("components",JSON.stringify(t.components));const a=await fetch(`${H}/update_feature`,{body:s,headers:n.headers,method:"PUT"});try{const o=await a.json();return o!=null&&o.id?(console.log(o),c(({features:u})=>({selectedFeature:o,features:u&&{...u,list:u.list.map(m=>m.id==o.id?o:m)}})),o):console.log("not ID")}catch{}},async fetchFeatures(t,n){var l,o,u;const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),(l=t==null?void 0:t.query)!=null&&l.text&&(s.text=(o=t.query)==null?void 0:o.text),t!=null&&t.feature_id&&(s.feature_id=t.feature_id),s.store_id=(u=A.getState().store)==null?void 0:u.id;const a=new URLSearchParams({});for(const m in s){const _=s[m];a.set(m,_)}const r=await(await fetch(`${H}/get_features/?${a.toString()}`)).json();if(!(!r||!r.list))return n||c(()=>({features:r})),console.log(r),r}}));function na({features:c,onEdit:t,onNew:n}){const{fetchFeatures:s,features:a}=St(),[i,r]=x.useState("");return x.useEffect(()=>{s()},[]),e.jsxs("div",{className:"choise-features",children:[e.jsxs("div",{className:"choise-ctn",children:[e.jsx("div",{className:"back",children:e.jsx("div",{className:"icon",style:{filter:gt("6500c4").result.filter}})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"Titile",children:"Features"}),e.jsxs("div",{className:"label",children:[" ( ",a==null?void 0:a.list.length," ) Avalaible"]})]}),e.jsxs("div",{className:"icons",children:[e.jsx("div",{className:"add",style:{transform:i?"rotate(180deg)":""},onClick:()=>{n==null||n()}}),e.jsx("div",{className:"i_open",style:{transform:i?"rotate(180deg)":""},onClick:()=>{r(i?"":"open")}})]})]}),e.jsx("div",{className:"list-features "+i,style:{height:i?`${85*((a==null?void 0:a.list.length)||0)}px`:"0px"},children:a==null?void 0:a.list.map(l=>{var o;return e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"edit",onClick:()=>t==null?void 0:t(l)}),e.jsx("div",{className:"icon",style:{background:Ke((o=l.icon)==null?void 0:o[0])}}),e.jsx("div",{className:"label",children:l.name})]},l.id)})})]})}function ia(){var ee;const{current:c,setAbsPath:t,qs:n,json:s,pathList:a}=ge(),{selectedProduct:i,setSelectedProduct:r,updateProduct:l,createProduct:o,removeProduct:u,setProductById:m,fectProductCommands:_}=et(),[k]=x.useState(!1),[V,K]=x.useState([]),[z,g]=x.useState(""),{setSelectedFeature:b}=St();x.useEffect(()=>{c("dash_product")&&b(void 0)},[a]),x.useEffect(()=>{s!=null&&s.product_id&&m(s==null?void 0:s.product_id)},[s]),x.useEffect(()=>{i&&_({limit:10,product_id:i.id}).then(N=>K((N==null?void 0:N.list)||[]))},[i]);const T=st().width<1e3?"wrap":"",[O]=x.useState({}),p=c("dash_product"),S=c("new_product");return(p||S)&&(!i&&p?e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}):e.jsxs("div",{className:"product-dash",ref:Fe,children:[e.jsxs("div",{className:"error-panel "+(z?"open":""),children:[e.jsxs("div",{className:"type",children:["ERROR ",e.jsx("span",{onClick:()=>{g("")}})]}),e.jsx("div",{className:"message",children:z})]}),e.jsx(yt,{terme:"white",deteleKey:(i==null?void 0:i.id)||"noga",mode:S?"create":"delete",title:"Product Information",onCreate:()=>{o(O).then(N=>{if(!N)return t(["products","dash_product"]);N.length&&g(N==null?void 0:N.toString())})},onDelete:()=>{i&&u(i.id).then(N=>{N&&r(void 0)})}}),e.jsxs("section",{className:"editor "+T,children:[e.jsxs("div",{className:"editor-left",children:[e.jsxs("div",{className:"editor-name",children:[p&&e.jsx(fe,{isCheckRequired:k,label:"Product Id",value:(i==null?void 0:i.id)||""}),e.jsx("div",{className:"product-title",children:e.jsx(fe,{editable:!0,prompt:"Product Title",isCheckRequired:k,min:3,check:"auto",max:50,label:"Title",placeholder:"Product Title",value:p&&((i==null?void 0:i.title)||""),onChange:N=>{p?i&&l({product_id:i.id,title:N}):O.title=N}})}),e.jsx("div",{className:"product-description",children:e.jsx(fs,{editable:!0,prompt:"Product Description",isCheckRequired:k,min:3,check:"auto",max:250,label:"Description",placeholder:"Product Description",value:p&&((i==null?void 0:i.description)||""),onChange:N=>{p?i&&l({product_id:i.id,description:N}):O.description=N}})})]}),e.jsx("div",{className:"editor-price",children:e.jsx(fe,{type:"number",editable:!0,prompt:"Product Price",isCheckRequired:k,min:0,check:"auto",label:"Price",placeholder:"Product Price",value:p&&((i==null?void 0:i.price)||""),onChange:N=>{p?i&&l({product_id:i.id,price:N}):O.price=N}})}),e.jsx("div",{className:"editor-stock",children:e.jsx(fe,{type:"number",editable:!0,prompt:"Product Stock",isCheckRequired:k,max:1e10,check:"auto",label:"Stock",placeholder:"Product Stock",value:p&&((i==null?void 0:i.stock)||""),onChange:N=>{p?i&&l({product_id:i.id,stock:N}):O.stock=N}})}),p&&e.jsx(ms,{status:(i==null?void 0:i.status)||"PAUSE",onChange:N=>{p?i&&l({product_id:i.id,status:N}):O.status=N}}),e.jsx("div",{className:"editor-category",children:e.jsx(aa,{category_id:p&&(i==null?void 0:i.category_id),onChange:N=>{p?i&&l({product_id:i.id,category_id:N}):O.category_id=N}})}),e.jsx("div",{className:"editor-features",children:e.jsx(na,{features:p&&((ee=i==null?void 0:i.features)==null?void 0:ee.list),onEdit:N=>{n({feature_id:N.id}).setAbsPath(["products","dash_features"])},onNew:()=>{i&&n({product_id:i.id}).setAbsPath(["products","new_feature"])}})})]}),e.jsxs("div",{className:"editor-right",children:[e.jsxs("div",{className:"editor-images",children:[e.jsx("h3",{children:"Product Images"}),e.jsx(Ot,{name:"images",images:p&&(i!=null&&i.images?i.images:[]),autosave:S,onSave:N=>{p?i&&l({product_id:i.id,images:N}):O.images=N}})]}),e.jsxs("div",{className:"editor-mmodel-images",children:[e.jsxs("h3",{children:["3d Model Images ",e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal"},children:"( optional )"})]}),e.jsx(Ot,{name:"model_images",images:p&&(i!=null&&i.images?i.model_images:[]),autosave:S,onSave:N=>{p?i&&l({product_id:i.id,model_images:N}):O.model_images=N}})]}),p&&e.jsx("div",{className:"editor-scene-file",children:e.jsx(ts,{file_name:i==null?void 0:i.scene_dir,ext:["zip"],label:"Upload Scene File",onChange:N=>{p?i&&l({product_id:i.id,scene_dir:N}):O.scene_dir=N}})})]})]}),p&&e.jsxs("div",{className:"product-dash-ctn",children:[e.jsxs("div",{className:"info",children:[e.jsx(Ft,{}),e.jsx(ea,{})]}),e.jsx(gs,{onClick:()=>{console.log("oo"),t(["products","dash_product","product_preview"])}})]}),p&&e.jsxs("div",{className:"orders",children:[e.jsxs("div",{className:"top",children:[e.jsx("h1",{className:"orders-title",children:"Recent Orders"}),e.jsx("h2",{className:"see-all",children:"SEE ALL"})]}),e.jsx("div",{className:"orders-ctn",children:V.map(N=>e.jsxs("div",{className:"order",children:[e.jsxs("div",{className:"id",children:["#",N.id.split("-")[0]]}),e.jsx("div",{className:"id",children:N.quantity}),e.jsx("div",{className:"date",children:N.updated_at.split("")}),e.jsxs("div",{className:"price",children:[N.price," ","$"]}),e.jsx("div",{className:"status "+N.status.toLocaleLowerCase(),children:N.status})]},N.id))})]})]}))}function ra(){const{current:c}=ge();return c("product_preview")&&e.jsx("div",{className:"product-preview"})}function oa(){return null}var ca=function(c){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return c[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=c,n.c=t,n.d=function(s,a,i){n.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:i})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,a){if(1&a&&(s=n(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var r in s)n.d(i,r,(function(l){return s[l]}).bind(null,r));return i},n.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(a,"a",a),a},n.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},n.p="",n(n.s=9)}([function(c,t){c.exports=x},function(c,t,n){var s;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var a={}.hasOwnProperty;function i(){for(var r=[],l=0;l<arguments.length;l++){var o=arguments[l];if(o){var u=typeof o;if(u==="string"||u==="number")r.push(o);else if(Array.isArray(o)&&o.length){var m=i.apply(null,o);m&&r.push(m)}else if(u==="object")for(var _ in o)a.call(o,_)&&o[_]&&r.push(_)}}return r.join(" ")}c.exports?(i.default=i,c.exports=i):(s=(function(){return i}).apply(t,[]))===void 0||(c.exports=s)})()},function(c,t,n){(function(s){var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,u=typeof s=="object"&&s&&s.Object===Object&&s,m=typeof self=="object"&&self&&self.Object===Object&&self,_=u||m||Function("return this")(),k=Object.prototype.toString,V=_.Symbol,K=V?V.prototype:void 0,z=K?K.toString:void 0;function g(O){if(typeof O=="string")return O;if(w(O))return z?z.call(O):"";var p=O+"";return p=="0"&&1/O==-1/0?"-0":p}function b(O){var p=typeof O;return!!O&&(p=="object"||p=="function")}function w(O){return typeof O=="symbol"||function(p){return!!p&&typeof p=="object"}(O)&&k.call(O)=="[object Symbol]"}function T(O){return O?(O=function(p){if(typeof p=="number")return p;if(w(p))return NaN;if(b(p)){var S=typeof p.valueOf=="function"?p.valueOf():p;p=b(S)?S+"":S}if(typeof p!="string")return p===0?p:+p;p=p.replace(a,"");var ee=r.test(p);return ee||l.test(p)?o(p.slice(2),ee?2:8):i.test(p)?NaN:+p}(O))===1/0||O===-1/0?17976931348623157e292*(O<0?-1:1):O==O?O:0:O===0?O:0}c.exports=function(O,p,S){var ee,N,U,P;return O=(ee=O)==null?"":g(ee),N=function($){var F=T($),B=F%1;return F==F?B?F-B:F:0}(S),U=0,P=O.length,N==N&&(P!==void 0&&(N=N<=P?N:P),U!==void 0&&(N=N>=U?N:U)),S=N,p=g(p),O.slice(S,S+p.length)==p}}).call(this,n(3))},function(c,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}c.exports=n},function(c,t,n){(function(s){var a=/^\[object .+?Constructor\]$/,i=typeof s=="object"&&s&&s.Object===Object&&s,r=typeof self=="object"&&self&&self.Object===Object&&self,l=i||r||Function("return this")(),o,u=Array.prototype,m=Function.prototype,_=Object.prototype,k=l["__core-js_shared__"],V=(o=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",K=m.toString,z=_.hasOwnProperty,g=_.toString,b=RegExp("^"+K.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=u.splice,T=$(l,"Map"),O=$(Object,"create");function p(I){var j=-1,E=I?I.length:0;for(this.clear();++j<E;){var G=I[j];this.set(G[0],G[1])}}function S(I){var j=-1,E=I?I.length:0;for(this.clear();++j<E;){var G=I[j];this.set(G[0],G[1])}}function ee(I){var j=-1,E=I?I.length:0;for(this.clear();++j<E;){var G=I[j];this.set(G[0],G[1])}}function N(I,j){for(var E,G,pe=I.length;pe--;)if((E=I[pe][0])===(G=j)||E!=E&&G!=G)return pe;return-1}function U(I){return!(!B(I)||(j=I,V&&V in j))&&(function(E){var G=B(E)?g.call(E):"";return G=="[object Function]"||G=="[object GeneratorFunction]"}(I)||function(E){var G=!1;if(E!=null&&typeof E.toString!="function")try{G=!!(E+"")}catch{}return G}(I)?b:a).test(function(E){if(E!=null){try{return K.call(E)}catch{}try{return E+""}catch{}}return""}(I));var j}function P(I,j){var E,G,pe=I.__data__;return((G=typeof(E=j))=="string"||G=="number"||G=="symbol"||G=="boolean"?E!=="__proto__":E===null)?pe[typeof j=="string"?"string":"hash"]:pe.map}function $(I,j){var E=function(G,pe){return G==null?void 0:G[pe]}(I,j);return U(E)?E:void 0}function F(I,j){if(typeof I!="function"||j&&typeof j!="function")throw new TypeError("Expected a function");var E=function(){var G=arguments,pe=j?j.apply(this,G):G[0],Ce=E.cache;if(Ce.has(pe))return Ce.get(pe);var W=I.apply(this,G);return E.cache=Ce.set(pe,W),W};return E.cache=new(F.Cache||ee),E}function B(I){var j=typeof I;return!!I&&(j=="object"||j=="function")}p.prototype.clear=function(){this.__data__=O?O(null):{}},p.prototype.delete=function(I){return this.has(I)&&delete this.__data__[I]},p.prototype.get=function(I){var j=this.__data__;if(O){var E=j[I];return E==="__lodash_hash_undefined__"?void 0:E}return z.call(j,I)?j[I]:void 0},p.prototype.has=function(I){var j=this.__data__;return O?j[I]!==void 0:z.call(j,I)},p.prototype.set=function(I,j){return this.__data__[I]=O&&j===void 0?"__lodash_hash_undefined__":j,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(I){var j=this.__data__,E=N(j,I);return!(E<0)&&(E==j.length-1?j.pop():w.call(j,E,1),!0)},S.prototype.get=function(I){var j=this.__data__,E=N(j,I);return E<0?void 0:j[E][1]},S.prototype.has=function(I){return N(this.__data__,I)>-1},S.prototype.set=function(I,j){var E=this.__data__,G=N(E,I);return G<0?E.push([I,j]):E[G][1]=j,this},ee.prototype.clear=function(){this.__data__={hash:new p,map:new(T||S),string:new p}},ee.prototype.delete=function(I){return P(this,I).delete(I)},ee.prototype.get=function(I){return P(this,I).get(I)},ee.prototype.has=function(I){return P(this,I).has(I)},ee.prototype.set=function(I,j){return P(this,I).set(I,j),this},F.Cache=ee,c.exports=F}).call(this,n(3))},function(c,t,n){(function(s){var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,u=typeof s=="object"&&s&&s.Object===Object&&s,m=typeof self=="object"&&self&&self.Object===Object&&self,_=u||m||Function("return this")(),k=Object.prototype.toString,V=Math.max,K=Math.min,z=function(){return _.Date.now()};function g(w){var T=typeof w;return!!w&&(T=="object"||T=="function")}function b(w){if(typeof w=="number")return w;if(function(p){return typeof p=="symbol"||function(S){return!!S&&typeof S=="object"}(p)&&k.call(p)=="[object Symbol]"}(w))return NaN;if(g(w)){var T=typeof w.valueOf=="function"?w.valueOf():w;w=g(T)?T+"":T}if(typeof w!="string")return w===0?w:+w;w=w.replace(a,"");var O=r.test(w);return O||l.test(w)?o(w.slice(2),O?2:8):i.test(w)?NaN:+w}c.exports=function(w,T,O){var p,S,ee,N,U,P,$=0,F=!1,B=!1,I=!0;if(typeof w!="function")throw new TypeError("Expected a function");function j(L){var y=p,q=S;return p=S=void 0,$=L,N=w.apply(q,y)}function E(L){return $=L,U=setTimeout(pe,T),F?j(L):N}function G(L){var y=L-P;return P===void 0||y>=T||y<0||B&&L-$>=ee}function pe(){var L=z();if(G(L))return Ce(L);U=setTimeout(pe,function(y){var q=T-(y-P);return B?K(q,ee-(y-$)):q}(L))}function Ce(L){return U=void 0,I&&p?j(L):(p=S=void 0,N)}function W(){var L=z(),y=G(L);if(p=arguments,S=this,P=L,y){if(U===void 0)return E(P);if(B)return U=setTimeout(pe,T),j(P)}return U===void 0&&(U=setTimeout(pe,T)),N}return T=b(T)||0,g(O)&&(F=!!O.leading,ee=(B="maxWait"in O)?V(b(O.maxWait)||0,T):ee,I="trailing"in O?!!O.trailing:I),W.cancel=function(){U!==void 0&&clearTimeout(U),$=0,p=P=S=U=void 0},W.flush=function(){return U===void 0?N:Ce(z())},W}}).call(this,n(3))},function(c,t,n){(function(s,a){var i="[object Arguments]",r="[object Map]",l="[object Object]",o="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/,_=/^\./,k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/\\(\\)?/g,K=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[i]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g[r]=g["[object Number]"]=g[l]=g["[object RegExp]"]=g[o]=g["[object String]"]=g["[object WeakMap]"]=!1;var b=typeof s=="object"&&s&&s.Object===Object&&s,w=typeof self=="object"&&self&&self.Object===Object&&self,T=b||w||Function("return this")(),O=t&&!t.nodeType&&t,p=O&&typeof a=="object"&&a&&!a.nodeType&&a,S=p&&p.exports===O&&b.process,ee=function(){try{return S&&S.binding("util")}catch{}}(),N=ee&&ee.isTypedArray;function U(d,f,C,R){var te=-1,se=d?d.length:0;for(R&&se&&(C=d[++te]);++te<se;)C=f(C,d[te],te,d);return C}function P(d,f){for(var C=-1,R=d?d.length:0;++C<R;)if(f(d[C],C,d))return!0;return!1}function $(d,f,C,R,te){return te(d,function(se,ce,Ne){C=R?(R=!1,se):f(C,se,ce,Ne)}),C}function F(d){var f=!1;if(d!=null&&typeof d.toString!="function")try{f=!!(d+"")}catch{}return f}function B(d){var f=-1,C=Array(d.size);return d.forEach(function(R,te){C[++f]=[te,R]}),C}function I(d){var f=-1,C=Array(d.size);return d.forEach(function(R){C[++f]=R}),C}var j,E,G,pe=Array.prototype,Ce=Function.prototype,W=Object.prototype,L=T["__core-js_shared__"],y=(j=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",q=Ce.toString,M=W.hasOwnProperty,h=W.toString,ie=RegExp("^"+q.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=T.Symbol,he=T.Uint8Array,le=W.propertyIsEnumerable,je=pe.splice,be=(E=Object.keys,G=Object,function(d){return E(G(d))}),we=bt(T,"DataView"),Te=bt(T,"Map"),De=bt(T,"Promise"),v=bt(T,"Set"),D=bt(T,"WeakMap"),J=bt(Object,"create"),re=mt(we),ne=mt(Te),oe=mt(De),de=mt(v),ye=mt(D),Z=ue?ue.prototype:void 0,ae=Z?Z.valueOf:void 0,me=Z?Z.toString:void 0;function Q(d){var f=-1,C=d?d.length:0;for(this.clear();++f<C;){var R=d[f];this.set(R[0],R[1])}}function Y(d){var f=-1,C=d?d.length:0;for(this.clear();++f<C;){var R=d[f];this.set(R[0],R[1])}}function ke(d){var f=-1,C=d?d.length:0;for(this.clear();++f<C;){var R=d[f];this.set(R[0],R[1])}}function Me(d){var f=-1,C=d?d.length:0;for(this.__data__=new ke;++f<C;)this.add(d[f])}function Re(d){this.__data__=new Y(d)}function qe(d,f){var C=ot(d)||Ss(d)?function(ce,Ne){for(var Ee=-1,xe=Array(ce);++Ee<ce;)xe[Ee]=Ne(Ee);return xe}(d.length,String):[],R=C.length,te=!!R;for(var se in d)!f&&!M.call(d,se)||te&&(se=="length"||ys(se,R))||C.push(se);return C}function Qe(d,f){for(var C=d.length;C--;)if(Ns(d[C][0],f))return C;return-1}Q.prototype.clear=function(){this.__data__=J?J(null):{}},Q.prototype.delete=function(d){return this.has(d)&&delete this.__data__[d]},Q.prototype.get=function(d){var f=this.__data__;if(J){var C=f[d];return C==="__lodash_hash_undefined__"?void 0:C}return M.call(f,d)?f[d]:void 0},Q.prototype.has=function(d){var f=this.__data__;return J?f[d]!==void 0:M.call(f,d)},Q.prototype.set=function(d,f){return this.__data__[d]=J&&f===void 0?"__lodash_hash_undefined__":f,this},Y.prototype.clear=function(){this.__data__=[]},Y.prototype.delete=function(d){var f=this.__data__,C=Qe(f,d);return!(C<0)&&(C==f.length-1?f.pop():je.call(f,C,1),!0)},Y.prototype.get=function(d){var f=this.__data__,C=Qe(f,d);return C<0?void 0:f[C][1]},Y.prototype.has=function(d){return Qe(this.__data__,d)>-1},Y.prototype.set=function(d,f){var C=this.__data__,R=Qe(C,d);return R<0?C.push([d,f]):C[R][1]=f,this},ke.prototype.clear=function(){this.__data__={hash:new Q,map:new(Te||Y),string:new Q}},ke.prototype.delete=function(d){return Mt(this,d).delete(d)},ke.prototype.get=function(d){return Mt(this,d).get(d)},ke.prototype.has=function(d){return Mt(this,d).has(d)},ke.prototype.set=function(d,f){return Mt(this,d).set(d,f),this},Me.prototype.add=Me.prototype.push=function(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},Me.prototype.has=function(d){return this.__data__.has(d)},Re.prototype.clear=function(){this.__data__=new Y},Re.prototype.delete=function(d){return this.__data__.delete(d)},Re.prototype.get=function(d){return this.__data__.get(d)},Re.prototype.has=function(d){return this.__data__.has(d)},Re.prototype.set=function(d,f){var C=this.__data__;if(C instanceof Y){var R=C.__data__;if(!Te||R.length<199)return R.push([d,f]),this;C=this.__data__=new ke(R)}return C.set(d,f),this};var ht,$e=(ht=function(d,f){return d&&_t(d,f,Vt)},function(d,f){if(d==null)return d;if(!ns(d))return ht(d,f);for(var C=d.length,R=-1,te=Object(d);++R<C&&f(te[R],R,te)!==!1;);return d}),_t=function(d){return function(f,C,R){for(var te=-1,se=Object(f),ce=R(f),Ne=ce.length;Ne--;){var Ee=ce[d?Ne:++te];if(C(se[Ee],Ee,se)===!1)break}return f}}();function Dt(d,f){for(var C=0,R=(f=Lt(f,d)?[f]:xs(f)).length;d!=null&&C<R;)d=d[zt(f[C++])];return C&&C==R?d:void 0}function ss(d,f){return d!=null&&f in Object(d)}function Pt(d,f,C,R,te){return d===f||(d==null||f==null||!Bt(d)&&!qt(f)?d!=d&&f!=f:function(se,ce,Ne,Ee,xe,ve){var Ve=ot(se),Ue=ot(ce),Pe="[object Array]",Ie="[object Array]";Ve||(Pe=(Pe=rt(se))==i?l:Pe),Ue||(Ie=(Ie=rt(ce))==i?l:Ie);var Le=Pe==l&&!F(se),pt=Ie==l&&!F(ce),ct=Pe==Ie;if(ct&&!Le)return ve||(ve=new Re),Ve||Vs(se)?js(se,ce,Ne,Ee,xe,ve):function(Se,_e,os,ft,Ut,ze,at){switch(os){case"[object DataView]":if(Se.byteLength!=_e.byteLength||Se.byteOffset!=_e.byteOffset)return!1;Se=Se.buffer,_e=_e.buffer;case"[object ArrayBuffer]":return!(Se.byteLength!=_e.byteLength||!ft(new he(Se),new he(_e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ns(+Se,+_e);case"[object Error]":return Se.name==_e.name&&Se.message==_e.message;case"[object RegExp]":case"[object String]":return Se==_e+"";case r:var lt=B;case o:var It=2&ze;if(lt||(lt=I),Se.size!=_e.size&&!It)return!1;var Ht=at.get(Se);if(Ht)return Ht==_e;ze|=1,at.set(Se,_e);var Nt=js(lt(Se),lt(_e),ft,Ut,ze,at);return at.delete(Se),Nt;case"[object Symbol]":if(ae)return ae.call(Se)==ae.call(_e)}return!1}(se,ce,Pe,Ne,Ee,xe,ve);if(!(2&xe)){var $t=Le&&M.call(se,"__wrapped__"),Cs=pt&&M.call(ce,"__wrapped__");if($t||Cs){var Hs=$t?se.value():se,Ws=Cs?ce.value():ce;return ve||(ve=new Re),Ne(Hs,Ws,Ee,xe,ve)}}return ct?(ve||(ve=new Re),function(Se,_e,os,ft,Ut,ze){var at=2&Ut,lt=Vt(Se),It=lt.length,Ht=Vt(_e).length;if(It!=Ht&&!at)return!1;for(var Nt=It;Nt--;){var dt=lt[Nt];if(!(at?dt in _e:M.call(_e,dt)))return!1}var ks=ze.get(Se);if(ks&&ze.get(_e))return ks==_e;var Wt=!0;ze.set(Se,_e),ze.set(_e,Se);for(var cs=at;++Nt<It;){dt=lt[Nt];var Gt=Se[dt],Kt=_e[dt];if(ft)var Es=at?ft(Kt,Gt,dt,_e,Se,ze):ft(Gt,Kt,dt,Se,_e,ze);if(!(Es===void 0?Gt===Kt||os(Gt,Kt,ft,Ut,ze):Es)){Wt=!1;break}cs||(cs=dt=="constructor")}if(Wt&&!cs){var Jt=Se.constructor,Zt=_e.constructor;Jt==Zt||!("constructor"in Se)||!("constructor"in _e)||typeof Jt=="function"&&Jt instanceof Jt&&typeof Zt=="function"&&Zt instanceof Zt||(Wt=!1)}return ze.delete(Se),ze.delete(_e),Wt}(se,ce,Ne,Ee,xe,ve)):!1}(d,f,Pt,C,R,te))}function Tt(d){return!(!Bt(d)||function(f){return!!y&&y in f}(d))&&(ws(d)||F(d)?ie:K).test(mt(d))}function zs(d){return typeof d=="function"?d:d==null?Us:typeof d=="object"?ot(d)?function(R,te){return Lt(R)&&_s(te)?bs(zt(R),te):function(se){var ce=function(Ne,Ee,xe){var ve=Ne==null?void 0:Dt(Ne,Ee);return ve===void 0?xe:ve}(se,R);return ce===void 0&&ce===te?function(Ne,Ee){return Ne!=null&&function(xe,ve,Ve){ve=Lt(ve,xe)?[ve]:xs(ve);for(var Ue,Pe=-1,Ie=ve.length;++Pe<Ie;){var Le=zt(ve[Pe]);if(!(Ue=xe!=null&&Ve(xe,Le)))break;xe=xe[Le]}return Ue||!!(Ie=xe?xe.length:0)&&is(Ie)&&ys(Le,Ie)&&(ot(xe)||Ss(xe))}(Ne,Ee,ss)}(se,R):Pt(te,ce,void 0,3)}}(d[0],d[1]):function(R){var te=function(se){for(var ce=Vt(se),Ne=ce.length;Ne--;){var Ee=ce[Ne],xe=se[Ee];ce[Ne]=[Ee,xe,_s(xe)]}return ce}(R);return te.length==1&&te[0][2]?bs(te[0][0],te[0][1]):function(se){return se===R||function(ce,Ne,Ee,xe){var ve=Ee.length,Ve=ve,Ue=!xe;if(ce==null)return!Ve;for(ce=Object(ce);ve--;){var Pe=Ee[ve];if(Ue&&Pe[2]?Pe[1]!==ce[Pe[0]]:!(Pe[0]in ce))return!1}for(;++ve<Ve;){var Ie=(Pe=Ee[ve])[0],Le=ce[Ie],pt=Pe[1];if(Ue&&Pe[2]){if(Le===void 0&&!(Ie in ce))return!1}else{var ct=new Re;if(xe)var $t=xe(Le,pt,Ie,ce,Ne,ct);if(!($t===void 0?Pt(pt,Le,xe,3,ct):$t))return!1}}return!0}(se,R,te)}}(d):Lt(f=d)?(C=zt(f),function(R){return R==null?void 0:R[C]}):function(R){return function(te){return Dt(te,R)}}(f);var f,C}function Bs(d){if(C=(f=d)&&f.constructor,R=typeof C=="function"&&C.prototype||W,f!==R)return be(d);var f,C,R,te=[];for(var se in Object(d))M.call(d,se)&&se!="constructor"&&te.push(se);return te}function xs(d){return ot(d)?d:qs(d)}function js(d,f,C,R,te,se){var ce=2&te,Ne=d.length,Ee=f.length;if(Ne!=Ee&&!(ce&&Ee>Ne))return!1;var xe=se.get(d);if(xe&&se.get(f))return xe==f;var ve=-1,Ve=!0,Ue=1&te?new Me:void 0;for(se.set(d,f),se.set(f,d);++ve<Ne;){var Pe=d[ve],Ie=f[ve];if(R)var Le=ce?R(Ie,Pe,ve,f,d,se):R(Pe,Ie,ve,d,f,se);if(Le!==void 0){if(Le)continue;Ve=!1;break}if(Ue){if(!P(f,function(pt,ct){if(!Ue.has(ct)&&(Pe===pt||C(Pe,pt,R,te,se)))return Ue.add(ct)})){Ve=!1;break}}else if(Pe!==Ie&&!C(Pe,Ie,R,te,se)){Ve=!1;break}}return se.delete(d),se.delete(f),Ve}function Mt(d,f){var C,R,te=d.__data__;return((R=typeof(C=f))=="string"||R=="number"||R=="symbol"||R=="boolean"?C!=="__proto__":C===null)?te[typeof f=="string"?"string":"hash"]:te.map}function bt(d,f){var C=function(R,te){return R==null?void 0:R[te]}(d,f);return Tt(C)?C:void 0}var rt=function(d){return h.call(d)};function ys(d,f){return!!(f=f??9007199254740991)&&(typeof d=="number"||z.test(d))&&d>-1&&d%1==0&&d<f}function Lt(d,f){if(ot(d))return!1;var C=typeof d;return!(C!="number"&&C!="symbol"&&C!="boolean"&&d!=null&&!rs(d))||m.test(d)||!u.test(d)||f!=null&&d in Object(f)}function _s(d){return d==d&&!Bt(d)}function bs(d,f){return function(C){return C!=null&&C[d]===f&&(f!==void 0||d in Object(C))}}(we&&rt(new we(new ArrayBuffer(1)))!="[object DataView]"||Te&&rt(new Te)!=r||De&&rt(De.resolve())!="[object Promise]"||v&&rt(new v)!=o||D&&rt(new D)!="[object WeakMap]")&&(rt=function(d){var f=h.call(d),C=f==l?d.constructor:void 0,R=C?mt(C):void 0;if(R)switch(R){case re:return"[object DataView]";case ne:return r;case oe:return"[object Promise]";case de:return o;case ye:return"[object WeakMap]"}return f});var qs=as(function(d){var f;d=(f=d)==null?"":function(R){if(typeof R=="string")return R;if(rs(R))return me?me.call(R):"";var te=R+"";return te=="0"&&1/R==-1/0?"-0":te}(f);var C=[];return _.test(d)&&C.push(""),d.replace(k,function(R,te,se,ce){C.push(se?ce.replace(V,"$1"):te||R)}),C});function zt(d){if(typeof d=="string"||rs(d))return d;var f=d+"";return f=="0"&&1/d==-1/0?"-0":f}function mt(d){if(d!=null){try{return q.call(d)}catch{}try{return d+""}catch{}}return""}function as(d,f){if(typeof d!="function"||f&&typeof f!="function")throw new TypeError("Expected a function");var C=function(){var R=arguments,te=f?f.apply(this,R):R[0],se=C.cache;if(se.has(te))return se.get(te);var ce=d.apply(this,R);return C.cache=se.set(te,ce),ce};return C.cache=new(as.Cache||ke),C}function Ns(d,f){return d===f||d!=d&&f!=f}function Ss(d){return function(f){return qt(f)&&ns(f)}(d)&&M.call(d,"callee")&&(!le.call(d,"callee")||h.call(d)==i)}as.Cache=ke;var ot=Array.isArray;function ns(d){return d!=null&&is(d.length)&&!ws(d)}function ws(d){var f=Bt(d)?h.call(d):"";return f=="[object Function]"||f=="[object GeneratorFunction]"}function is(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991}function Bt(d){var f=typeof d;return!!d&&(f=="object"||f=="function")}function qt(d){return!!d&&typeof d=="object"}function rs(d){return typeof d=="symbol"||qt(d)&&h.call(d)=="[object Symbol]"}var Vs=N?function(d){return function(f){return d(f)}}(N):function(d){return qt(d)&&is(d.length)&&!!g[h.call(d)]};function Vt(d){return ns(d)?qe(d):Bs(d)}function Us(d){return d}a.exports=function(d,f,C){var R=ot(d)?U:$,te=arguments.length<3;return R(d,zs(f),C,te,$e)}}).call(this,n(3),n(7)(c))},function(c,t){c.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(c,t){String.prototype.padEnd||(String.prototype.padEnd=function(n,s){return n>>=0,s=String(s!==void 0?s:" "),this.length>n?String(this):((n-=this.length)>s.length&&(s+=s.repeat(n/s.length)),String(this)+s.slice(0,n))})},function(c,t,n){function s(W,L,y){return L in W?Object.defineProperty(W,L,{value:y,enumerable:!0,configurable:!0,writable:!0}):W[L]=y,W}function a(W){if(Symbol.iterator in Object(W)||Object.prototype.toString.call(W)==="[object Arguments]")return Array.from(W)}function i(W){return function(L){if(Array.isArray(L)){for(var y=0,q=new Array(L.length);y<L.length;y++)q[y]=L[y];return q}}(W)||a(W)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(W){if(Array.isArray(W))return W}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(W,L){if(!(W instanceof L))throw new TypeError("Cannot call a class as a function")}function u(W,L){for(var y=0;y<L.length;y++){var q=L[y];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(W,q.key,q)}}function m(W){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(W)}function _(W){return(_=typeof Symbol=="function"&&m(Symbol.iterator)==="symbol"?function(L){return m(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":m(L)})(W)}function k(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function V(W){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(W)}function K(W,L){return(K=Object.setPrototypeOf||function(y,q){return y.__proto__=q,y})(W,L)}n.r(t);var z=n(0),g=n.n(z),b=n(5),w=n.n(b),T=n(4),O=n.n(T),p=n(6),S=n.n(p),ee=n(2),N=n.n(ee),U=n(1),P=n.n(U);n(8);function $(W,L){return r(W)||function(y,q){var M=[],h=!0,ie=!1,ue=void 0;try{for(var he,le=y[Symbol.iterator]();!(h=(he=le.next()).done)&&(M.push(he.value),!q||M.length!==q);h=!0);}catch(je){ie=!0,ue=je}finally{try{h||le.return==null||le.return()}finally{if(ie)throw ue}}return M}(W,L)||l()}var F=[["Afghanistan",["asia"],"af","93"],["Albania",["europe"],"al","355"],["Algeria",["africa","north-africa"],"dz","213"],["Andorra",["europe"],"ad","376"],["Angola",["africa"],"ao","244"],["Antigua and Barbuda",["america","carribean"],"ag","1268"],["Argentina",["america","south-america"],"ar","54","(..) ........",0,["11","221","223","261","264","2652","280","2905","291","2920","2966","299","341","342","343","351","376","379","381","3833","385","387","388"]],["Armenia",["asia","ex-ussr"],"am","374",".. ......"],["Aruba",["america","carribean"],"aw","297"],["Australia",["oceania"],"au","61","(..) .... ....",0,["2","3","4","7","8","02","03","04","07","08"]],["Austria",["europe","eu-union"],"at","43"],["Azerbaijan",["asia","ex-ussr"],"az","994","(..) ... .. .."],["Bahamas",["america","carribean"],"bs","1242"],["Bahrain",["middle-east"],"bh","973"],["Bangladesh",["asia"],"bd","880"],["Barbados",["america","carribean"],"bb","1246"],["Belarus",["europe","ex-ussr"],"by","375","(..) ... .. .."],["Belgium",["europe","eu-union"],"be","32","... .. .. .."],["Belize",["america","central-america"],"bz","501"],["Benin",["africa"],"bj","229"],["Bhutan",["asia"],"bt","975"],["Bolivia",["america","south-america"],"bo","591"],["Bosnia and Herzegovina",["europe","ex-yugos"],"ba","387"],["Botswana",["africa"],"bw","267"],["Brazil",["america","south-america"],"br","55","(..) ........."],["British Indian Ocean Territory",["asia"],"io","246"],["Brunei",["asia"],"bn","673"],["Bulgaria",["europe","eu-union"],"bg","359"],["Burkina Faso",["africa"],"bf","226"],["Burundi",["africa"],"bi","257"],["Cambodia",["asia"],"kh","855"],["Cameroon",["africa"],"cm","237"],["Canada",["america","north-america"],"ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde",["africa"],"cv","238"],["Caribbean Netherlands",["america","carribean"],"bq","599","",1],["Central African Republic",["africa"],"cf","236"],["Chad",["africa"],"td","235"],["Chile",["america","south-america"],"cl","56"],["China",["asia"],"cn","86","..-........."],["Colombia",["america","south-america"],"co","57","... ... ...."],["Comoros",["africa"],"km","269"],["Congo",["africa"],"cd","243"],["Congo",["africa"],"cg","242"],["Costa Rica",["america","central-america"],"cr","506","....-...."],["CÃ´te dâ€™Ivoire",["africa"],"ci","225",".. .. .. .."],["Croatia",["europe","eu-union","ex-yugos"],"hr","385"],["Cuba",["america","carribean"],"cu","53"],["CuraÃ§ao",["america","carribean"],"cw","599","",0],["Cyprus",["europe","eu-union"],"cy","357",".. ......"],["Czech Republic",["europe","eu-union"],"cz","420","... ... ..."],["Denmark",["europe","eu-union","baltic"],"dk","45",".. .. .. .."],["Djibouti",["africa"],"dj","253"],["Dominica",["america","carribean"],"dm","1767"],["Dominican Republic",["america","carribean"],"do","1","",2,["809","829","849"]],["Ecuador",["america","south-america"],"ec","593"],["Egypt",["africa","north-africa"],"eg","20"],["El Salvador",["america","central-america"],"sv","503","....-...."],["Equatorial Guinea",["africa"],"gq","240"],["Eritrea",["africa"],"er","291"],["Estonia",["europe","eu-union","ex-ussr","baltic"],"ee","372",".... ......"],["Ethiopia",["africa"],"et","251"],["Fiji",["oceania"],"fj","679"],["Finland",["europe","eu-union","baltic"],"fi","358",".. ... .. .."],["France",["europe","eu-union"],"fr","33",". .. .. .. .."],["French Guiana",["america","south-america"],"gf","594"],["French Polynesia",["oceania"],"pf","689"],["Gabon",["africa"],"ga","241"],["Gambia",["africa"],"gm","220"],["Georgia",["asia","ex-ussr"],"ge","995"],["Germany",["europe","eu-union","baltic"],"de","49",".... ........"],["Ghana",["africa"],"gh","233"],["Greece",["europe","eu-union"],"gr","30"],["Grenada",["america","carribean"],"gd","1473"],["Guadeloupe",["america","carribean"],"gp","590","",0],["Guam",["oceania"],"gu","1671"],["Guatemala",["america","central-america"],"gt","502","....-...."],["Guinea",["africa"],"gn","224"],["Guinea-Bissau",["africa"],"gw","245"],["Guyana",["america","south-america"],"gy","592"],["Haiti",["america","carribean"],"ht","509","....-...."],["Honduras",["america","central-america"],"hn","504"],["Hong Kong",["asia"],"hk","852",".... ...."],["Hungary",["europe","eu-union"],"hu","36"],["Iceland",["europe"],"is","354","... ...."],["India",["asia"],"in","91",".....-....."],["Indonesia",["asia"],"id","62"],["Iran",["middle-east"],"ir","98","... ... ...."],["Iraq",["middle-east"],"iq","964"],["Ireland",["europe","eu-union"],"ie","353",".. ......."],["Israel",["middle-east"],"il","972","... ... ...."],["Italy",["europe","eu-union"],"it","39","... .......",0],["Jamaica",["america","carribean"],"jm","1876"],["Japan",["asia"],"jp","81",".. .... ...."],["Jordan",["middle-east"],"jo","962"],["Kazakhstan",["asia","ex-ussr"],"kz","7","... ...-..-..",1,["310","311","312","313","315","318","321","324","325","326","327","336","7172","73622"]],["Kenya",["africa"],"ke","254"],["Kiribati",["oceania"],"ki","686"],["Kosovo",["europe","ex-yugos"],"xk","383"],["Kuwait",["middle-east"],"kw","965"],["Kyrgyzstan",["asia","ex-ussr"],"kg","996","... ... ..."],["Laos",["asia"],"la","856"],["Latvia",["europe","eu-union","ex-ussr","baltic"],"lv","371",".. ... ..."],["Lebanon",["middle-east"],"lb","961"],["Lesotho",["africa"],"ls","266"],["Liberia",["africa"],"lr","231"],["Libya",["africa","north-africa"],"ly","218"],["Liechtenstein",["europe"],"li","423"],["Lithuania",["europe","eu-union","ex-ussr","baltic"],"lt","370"],["Luxembourg",["europe","eu-union"],"lu","352"],["Macau",["asia"],"mo","853"],["Macedonia",["europe","ex-yugos"],"mk","389"],["Madagascar",["africa"],"mg","261"],["Malawi",["africa"],"mw","265"],["Malaysia",["asia"],"my","60","..-....-...."],["Maldives",["asia"],"mv","960"],["Mali",["africa"],"ml","223"],["Malta",["europe","eu-union"],"mt","356"],["Marshall Islands",["oceania"],"mh","692"],["Martinique",["america","carribean"],"mq","596"],["Mauritania",["africa"],"mr","222"],["Mauritius",["africa"],"mu","230"],["Mexico",["america","central-america"],"mx","52","... ... ....",0,["55","81","33","656","664","998","774","229"]],["Micronesia",["oceania"],"fm","691"],["Moldova",["europe"],"md","373","(..) ..-..-.."],["Monaco",["europe"],"mc","377"],["Mongolia",["asia"],"mn","976"],["Montenegro",["europe","ex-yugos"],"me","382"],["Morocco",["africa","north-africa"],"ma","212"],["Mozambique",["africa"],"mz","258"],["Myanmar",["asia"],"mm","95"],["Namibia",["africa"],"na","264"],["Nauru",["africa"],"nr","674"],["Nepal",["asia"],"np","977"],["Netherlands",["europe","eu-union"],"nl","31",".. ........"],["New Caledonia",["oceania"],"nc","687"],["New Zealand",["oceania"],"nz","64","...-...-...."],["Nicaragua",["america","central-america"],"ni","505"],["Niger",["africa"],"ne","227"],["Nigeria",["africa"],"ng","234"],["North Korea",["asia"],"kp","850"],["Norway",["europe","baltic"],"no","47","... .. ..."],["Oman",["middle-east"],"om","968"],["Pakistan",["asia"],"pk","92","...-......."],["Palau",["oceania"],"pw","680"],["Palestine",["middle-east"],"ps","970"],["Panama",["america","central-america"],"pa","507"],["Papua New Guinea",["oceania"],"pg","675"],["Paraguay",["america","south-america"],"py","595"],["Peru",["america","south-america"],"pe","51"],["Philippines",["asia"],"ph","63",".... ......."],["Poland",["europe","eu-union","baltic"],"pl","48","...-...-..."],["Portugal",["europe","eu-union"],"pt","351"],["Puerto Rico",["america","carribean"],"pr","1","",3,["787","939"]],["Qatar",["middle-east"],"qa","974"],["RÃ©union",["africa"],"re","262"],["Romania",["europe","eu-union"],"ro","40"],["Russia",["europe","asia","ex-ussr","baltic"],"ru","7","(...) ...-..-..",0],["Rwanda",["africa"],"rw","250"],["Saint Kitts and Nevis",["america","carribean"],"kn","1869"],["Saint Lucia",["america","carribean"],"lc","1758"],["Saint Vincent and the Grenadines",["america","carribean"],"vc","1784"],["Samoa",["oceania"],"ws","685"],["San Marino",["europe"],"sm","378"],["SÃ£o TomÃ© and PrÃ­ncipe",["africa"],"st","239"],["Saudi Arabia",["middle-east"],"sa","966"],["Senegal",["africa"],"sn","221"],["Serbia",["europe","ex-yugos"],"rs","381"],["Seychelles",["africa"],"sc","248"],["Sierra Leone",["africa"],"sl","232"],["Singapore",["asia"],"sg","65","....-...."],["Slovakia",["europe","eu-union"],"sk","421"],["Slovenia",["europe","eu-union","ex-yugos"],"si","386"],["Solomon Islands",["oceania"],"sb","677"],["Somalia",["africa"],"so","252"],["South Africa",["africa"],"za","27"],["South Korea",["asia"],"kr","82","... .... ...."],["South Sudan",["africa","north-africa"],"ss","211"],["Spain",["europe","eu-union"],"es","34","... ... ..."],["Sri Lanka",["asia"],"lk","94"],["Sudan",["africa"],"sd","249"],["Suriname",["america","south-america"],"sr","597"],["Swaziland",["africa"],"sz","268"],["Sweden",["europe","eu-union","baltic"],"se","46","(...) ...-..."],["Switzerland",["europe"],"ch","41",".. ... .. .."],["Syria",["middle-east"],"sy","963"],["Taiwan",["asia"],"tw","886"],["Tajikistan",["asia","ex-ussr"],"tj","992"],["Tanzania",["africa"],"tz","255"],["Thailand",["asia"],"th","66"],["Timor-Leste",["asia"],"tl","670"],["Togo",["africa"],"tg","228"],["Tonga",["oceania"],"to","676"],["Trinidad and Tobago",["america","carribean"],"tt","1868"],["Tunisia",["africa","north-africa"],"tn","216"],["Turkey",["europe"],"tr","90","... ... .. .."],["Turkmenistan",["asia","ex-ussr"],"tm","993"],["Tuvalu",["asia"],"tv","688"],["Uganda",["africa"],"ug","256"],["Ukraine",["europe","ex-ussr"],"ua","380","(..) ... .. .."],["United Arab Emirates",["middle-east"],"ae","971"],["United Kingdom",["europe","eu-union"],"gb","44",".... ......"],["United States",["america","north-america"],"us","1","(...) ...-....",0,["907","205","251","256","334","479","501","870","480","520","602","623","928","209","213","310","323","408","415","510","530","559","562","619","626","650","661","707","714","760","805","818","831","858","909","916","925","949","951","303","719","970","203","860","202","302","239","305","321","352","386","407","561","727","772","813","850","863","904","941","954","229","404","478","706","770","912","808","319","515","563","641","712","208","217","309","312","618","630","708","773","815","847","219","260","317","574","765","812","316","620","785","913","270","502","606","859","225","318","337","504","985","413","508","617","781","978","301","410","207","231","248","269","313","517","586","616","734","810","906","989","218","320","507","612","651","763","952","314","417","573","636","660","816","228","601","662","406","252","336","704","828","910","919","701","308","402","603","201","609","732","856","908","973","505","575","702","775","212","315","516","518","585","607","631","716","718","845","914","216","330","419","440","513","614","740","937","405","580","918","503","541","215","412","570","610","717","724","814","401","803","843","864","605","423","615","731","865","901","931","210","214","254","281","325","361","409","432","512","713","806","817","830","903","915","936","940","956","972","979","435","801","276","434","540","703","757","804","802","206","253","360","425","509","262","414","608","715","920","304","307"]],["Uruguay",["america","south-america"],"uy","598"],["Uzbekistan",["asia","ex-ussr"],"uz","998",".. ... .. .."],["Vanuatu",["oceania"],"vu","678"],["Vatican City",["europe"],"va","39",".. .... ....",1],["Venezuela",["america","south-america"],"ve","58"],["Vietnam",["asia"],"vn","84"],["Yemen",["middle-east"],"ye","967"],["Zambia",["africa"],"zm","260"],["Zimbabwe",["africa"],"zw","263"]],B=[["American Samoa",["oceania"],"as","1684"],["Anguilla",["america","carribean"],"ai","1264"],["Bermuda",["america","north-america"],"bm","1441"],["British Virgin Islands",["america","carribean"],"vg","1284"],["Cayman Islands",["america","carribean"],"ky","1345"],["Cook Islands",["oceania"],"ck","682"],["Falkland Islands",["america","south-america"],"fk","500"],["Faroe Islands",["europe"],"fo","298"],["Gibraltar",["europe"],"gi","350"],["Greenland",["america"],"gl","299"],["Jersey",["europe","eu-union"],"je","44",".... ......"],["Montserrat",["america","carribean"],"ms","1664"],["Niue",["asia"],"nu","683"],["Norfolk Island",["oceania"],"nf","672"],["Northern Mariana Islands",["oceania"],"mp","1670"],["Saint BarthÃ©lemy",["america","carribean"],"bl","590","",1],["Saint Helena",["africa"],"sh","290"],["Saint Martin",["america","carribean"],"mf","590","",2],["Saint Pierre and Miquelon",["america","north-america"],"pm","508"],["Sint Maarten",["america","carribean"],"sx","1721"],["Tokelau",["oceania"],"tk","690"],["Turks and Caicos Islands",["america","carribean"],"tc","1649"],["U.S. Virgin Islands",["america","carribean"],"vi","1340"],["Wallis and Futuna",["oceania"],"wf","681"]];function I(W,L,y,q,M){return!y||M?W+"".padEnd(L.length,".")+" "+q:W+"".padEnd(L.length,".")+" "+y}function j(W,L,y,q,M){var h,ie,ue=[];return ie=L===!0,[(h=[]).concat.apply(h,i(W.map(function(he){var le={name:he[0],regions:he[1],iso2:he[2],countryCode:he[3],dialCode:he[3],format:I(y,he[3],he[4],q,M),priority:he[5]||0},je=[];return he[6]&&he[6].map(function(be){var we=function(Te){for(var De=1;De<arguments.length;De++){var v=arguments[De]!=null?arguments[De]:{},D=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(D=D.concat(Object.getOwnPropertySymbols(v).filter(function(J){return Object.getOwnPropertyDescriptor(v,J).enumerable}))),D.forEach(function(J){s(Te,J,v[J])})}return Te}({},le);we.dialCode=he[3]+be,we.isAreaCode=!0,we.areaCodeLength=be.length,je.push(we)}),je.length>0?(le.mainCode=!0,ie||L.constructor.name==="Array"&&L.includes(he[2])?(le.hasAreaCodes=!0,[le].concat(je)):(ue=ue.concat(je),[le])):[le]}))),ue]}function E(W,L,y,q){if(y!==null){var M=Object.keys(y),h=Object.values(y);M.forEach(function(ie,ue){if(q)return W.push([ie,h[ue]]);var he=W.findIndex(function(je){return je[0]===ie});if(he===-1){var le=[ie];le[L]=h[ue],W.push(le)}else W[he][L]=h[ue]})}}function G(W,L){return L.length===0?W:W.map(function(y){var q=L.findIndex(function(h){return h[0]===y[2]});if(q===-1)return y;var M=L[q];return M[1]&&(y[4]=M[1]),M[3]&&(y[5]=M[3]),M[2]&&(y[6]=M[2]),y})}var pe=function W(L,y,q,M,h,ie,ue,he,le,je,be,we,Te,De){o(this,W),this.filterRegions=function(Z,ae){if(typeof Z=="string"){var me=Z;return ae.filter(function(Q){return Q.regions.some(function(Y){return Y===me})})}return ae.filter(function(Q){return Z.map(function(Y){return Q.regions.some(function(ke){return ke===Y})}).some(function(Y){return Y})})},this.sortTerritories=function(Z,ae){var me=[].concat(i(Z),i(ae));return me.sort(function(Q,Y){return Q.name<Y.name?-1:Q.name>Y.name?1:0}),me},this.getFilteredCountryList=function(Z,ae,me){return Z.length===0?ae:me?Z.map(function(Q){var Y=ae.find(function(ke){return ke.iso2===Q});if(Y)return Y}).filter(function(Q){return Q}):ae.filter(function(Q){return Z.some(function(Y){return Y===Q.iso2})})},this.localizeCountries=function(Z,ae,me){for(var Q=0;Q<Z.length;Q++)ae[Z[Q].iso2]!==void 0?Z[Q].localName=ae[Z[Q].iso2]:ae[Z[Q].name]!==void 0&&(Z[Q].localName=ae[Z[Q].name]);return me||Z.sort(function(Y,ke){return Y.localName<ke.localName?-1:Y.localName>ke.localName?1:0}),Z},this.getCustomAreas=function(Z,ae){for(var me=[],Q=0;Q<ae.length;Q++){var Y=JSON.parse(JSON.stringify(Z));Y.dialCode+=ae[Q],me.push(Y)}return me},this.excludeCountries=function(Z,ae){return ae.length===0?Z:Z.filter(function(me){return!ae.includes(me.iso2)})};var v=function(Z,ae,me){var Q=[];return E(Q,1,Z,!0),E(Q,3,ae),E(Q,2,me),Q}(he,le,je),D=G(JSON.parse(JSON.stringify(F)),v),J=G(JSON.parse(JSON.stringify(B)),v),re=$(j(D,L,we,Te,De),2),ne=re[0],oe=re[1];if(y){var de=$(j(J,L,we,Te,De),2),ye=de[0];de[1],ne=this.sortTerritories(ye,ne)}q&&(ne=this.filterRegions(q,ne)),this.onlyCountries=this.localizeCountries(this.excludeCountries(this.getFilteredCountryList(M,ne,ue.includes("onlyCountries")),ie),be,ue.includes("onlyCountries")),this.preferredCountries=h.length===0?[]:this.localizeCountries(this.getFilteredCountryList(h,ne,ue.includes("preferredCountries")),be,ue.includes("preferredCountries")),this.hiddenAreaCodes=this.excludeCountries(this.getFilteredCountryList(M,oe),ie)},Ce=function(W){function L(M){var h;o(this,L),(h=function(v,D){return!D||_(D)!=="object"&&typeof D!="function"?k(v):D}(this,V(L).call(this,M))).getProbableCandidate=O()(function(v){return v&&v.length!==0?h.state.onlyCountries.filter(function(D){return N()(D.name.toLowerCase(),v.toLowerCase())},k(k(h)))[0]:null}),h.guessSelectedCountry=O()(function(v,D,J,re){var ne;if(h.props.enableAreaCodes===!1&&(re.some(function(ye){if(N()(v,ye.dialCode))return J.some(function(Z){if(ye.iso2===Z.iso2&&Z.mainCode)return ne=Z,!0}),!0}),ne))return ne;var oe=J.find(function(ye){return ye.iso2==D});if(v.trim()==="")return oe;var de=J.reduce(function(ye,Z){return N()(v,Z.dialCode)&&(Z.dialCode.length>ye.dialCode.length||Z.dialCode.length===ye.dialCode.length&&Z.priority<ye.priority)?Z:ye},{dialCode:"",priority:10001},k(k(h)));return de.name?de:oe}),h.updateCountry=function(v){var D,J=h.state.onlyCountries;(D=v.indexOf(0)>="0"&&v.indexOf(0)<="9"?J.find(function(re){return re.dialCode==+v}):J.find(function(re){return re.iso2==v}))&&D.dialCode&&h.setState({selectedCountry:D,formattedNumber:h.props.disableCountryCode?"":h.formatNumber(D.dialCode,D)})},h.scrollTo=function(v,D){if(v){var J=h.dropdownRef;if(J&&document.body){var re=J.offsetHeight,ne=J.getBoundingClientRect().top+document.body.scrollTop,oe=ne+re,de=v,ye=de.getBoundingClientRect(),Z=de.offsetHeight,ae=ye.top+document.body.scrollTop,me=ae+Z,Q=ae-ne+J.scrollTop,Y=re/2-Z/2;if(h.props.enableSearch?ae<ne+32:ae<ne)D&&(Q-=Y),J.scrollTop=Q;else if(me>oe){D&&(Q+=Y);var ke=re-Z;J.scrollTop=Q-ke}}}},h.scrollToTop=function(){var v=h.dropdownRef;v&&document.body&&(v.scrollTop=0)},h.formatNumber=function(v,D){if(!D)return v;var J,re=D.format,ne=h.props,oe=ne.disableCountryCode,de=ne.enableAreaCodeStretch,ye=ne.enableLongNumbers,Z=ne.autoFormat;if(oe?((J=re.split(" ")).shift(),J=J.join(" ")):de&&D.isAreaCode?((J=re.split(" "))[1]=J[1].replace(/\.+/,"".padEnd(D.areaCodeLength,".")),J=J.join(" ")):J=re,!v||v.length===0)return oe?"":h.props.prefix;if(v&&v.length<2||!J||!Z)return oe?v:h.props.prefix+v;var ae,me=S()(J,function(Q,Y){if(Q.remainingText.length===0)return Q;if(Y!==".")return{formattedText:Q.formattedText+Y,remainingText:Q.remainingText};var ke,Me=r(ke=Q.remainingText)||a(ke)||l(),Re=Me[0],qe=Me.slice(1);return{formattedText:Q.formattedText+Re,remainingText:qe}},{formattedText:"",remainingText:v.split("")});return(ae=ye?me.formattedText+me.remainingText.join(""):me.formattedText).includes("(")&&!ae.includes(")")&&(ae+=")"),ae},h.cursorToEnd=function(){var v=h.numberInputRef;if(document.activeElement===v){v.focus();var D=v.value.length;v.value.charAt(D-1)===")"&&(D-=1),v.setSelectionRange(D,D)}},h.getElement=function(v){return h["flag_no_".concat(v)]},h.getCountryData=function(){return h.state.selectedCountry?{name:h.state.selectedCountry.name||"",dialCode:h.state.selectedCountry.dialCode||"",countryCode:h.state.selectedCountry.iso2||"",format:h.state.selectedCountry.format||""}:{}},h.handleFlagDropdownClick=function(v){if(v.preventDefault(),h.state.showDropdown||!h.props.disabled){var D=h.state,J=D.preferredCountries,re=D.onlyCountries,ne=D.selectedCountry,oe=h.concatPreferredCountries(J,re).findIndex(function(de){return de.dialCode===ne.dialCode&&de.iso2===ne.iso2});h.setState({showDropdown:!h.state.showDropdown,highlightCountryIndex:oe},function(){h.state.showDropdown&&h.scrollTo(h.getElement(h.state.highlightCountryIndex))})}},h.handleInput=function(v){var D=v.target.value,J=h.props,re=J.prefix,ne=J.onChange,oe=h.props.disableCountryCode?"":re,de=h.state.selectedCountry,ye=h.state.freezeSelection;if(!h.props.countryCodeEditable){var Z=re+(de.hasAreaCodes?h.state.onlyCountries.find(function($e){return $e.iso2===de.iso2&&$e.mainCode}).dialCode:de.dialCode);if(D.slice(0,Z.length)!==Z)return}if(D===re)return ne&&ne("",h.getCountryData(),v,""),h.setState({formattedNumber:""});if(!(D.replace(/\D/g,"").length>15&&(h.props.enableLongNumbers===!1||typeof h.props.enableLongNumbers=="number"&&D.replace(/\D/g,"").length>h.props.enableLongNumbers))&&D!==h.state.formattedNumber){v.preventDefault?v.preventDefault():v.returnValue=!1;var ae=h.props.country,me=h.state,Q=me.onlyCountries,Y=me.selectedCountry,ke=me.hiddenAreaCodes;if(ne&&v.persist(),D.length>0){var Me=D.replace(/\D/g,"");(!h.state.freezeSelection||Y&&Y.dialCode.length>Me.length)&&(de=h.props.disableCountryGuess?Y:h.guessSelectedCountry(Me.substring(0,6),ae,Q,ke)||Y,ye=!1),oe=h.formatNumber(Me,de),de=de.dialCode?de:Y}var Re=v.target.selectionStart,qe=v.target.selectionStart,Qe=h.state.formattedNumber,ht=oe.length-Qe.length;h.setState({formattedNumber:oe,freezeSelection:ye,selectedCountry:de},function(){ht>0&&(qe-=ht),oe.charAt(oe.length-1)==")"?h.numberInputRef.setSelectionRange(oe.length-1,oe.length-1):qe>0&&Qe.length>=oe.length?h.numberInputRef.setSelectionRange(qe,qe):Re<Qe.length&&h.numberInputRef.setSelectionRange(Re,Re),ne&&ne(oe.replace(/[^0-9]+/g,""),h.getCountryData(),v,oe)})}},h.handleInputClick=function(v){h.setState({showDropdown:!1}),h.props.onClick&&h.props.onClick(v,h.getCountryData())},h.handleDoubleClick=function(v){var D=v.target.value.length;v.target.setSelectionRange(0,D)},h.handleFlagItemClick=function(v,D){var J=h.state.selectedCountry,re=h.state.onlyCountries.find(function(ye){return ye==v});if(re){var ne=h.state.formattedNumber.replace(" ","").replace("(","").replace(")","").replace("-",""),oe=ne.length>1?ne.replace(J.dialCode,re.dialCode):re.dialCode,de=h.formatNumber(oe.replace(/\D/g,""),re);h.setState({showDropdown:!1,selectedCountry:re,freezeSelection:!0,formattedNumber:de,searchValue:""},function(){h.cursorToEnd(),h.props.onChange&&h.props.onChange(de.replace(/[^0-9]+/g,""),h.getCountryData(),D,de)})}},h.handleInputFocus=function(v){h.numberInputRef&&h.numberInputRef.value===h.props.prefix&&h.state.selectedCountry&&!h.props.disableCountryCode&&h.setState({formattedNumber:h.props.prefix+h.state.selectedCountry.dialCode},function(){h.props.jumpCursorToEnd&&setTimeout(h.cursorToEnd,0)}),h.setState({placeholder:""}),h.props.onFocus&&h.props.onFocus(v,h.getCountryData()),h.props.jumpCursorToEnd&&setTimeout(h.cursorToEnd,0)},h.handleInputBlur=function(v){v.target.value||h.setState({placeholder:h.props.placeholder}),h.props.onBlur&&h.props.onBlur(v,h.getCountryData())},h.handleInputCopy=function(v){if(h.props.copyNumbersOnly){var D=window.getSelection().toString().replace(/[^0-9]+/g,"");v.clipboardData.setData("text/plain",D),v.preventDefault()}},h.getHighlightCountryIndex=function(v){var D=h.state.highlightCountryIndex+v;return D<0||D>=h.state.onlyCountries.length+h.state.preferredCountries.length?D-v:h.props.enableSearch&&D>h.getSearchFilteredCountries().length?0:D},h.searchCountry=function(){var v=h.getProbableCandidate(h.state.queryString)||h.state.onlyCountries[0],D=h.state.onlyCountries.findIndex(function(J){return J==v})+h.state.preferredCountries.length;h.scrollTo(h.getElement(D),!0),h.setState({queryString:"",highlightCountryIndex:D})},h.handleKeydown=function(v){var D=h.props.keys,J=v.target.className;if(J.includes("selected-flag")&&v.which===D.ENTER&&!h.state.showDropdown)return h.handleFlagDropdownClick(v);if(J.includes("form-control")&&(v.which===D.ENTER||v.which===D.ESC))return v.target.blur();if(h.state.showDropdown&&!h.props.disabled&&(!J.includes("search-box")||v.which===D.UP||v.which===D.DOWN||v.which===D.ENTER||v.which===D.ESC&&v.target.value==="")){v.preventDefault?v.preventDefault():v.returnValue=!1;var re=function(ne){h.setState({highlightCountryIndex:h.getHighlightCountryIndex(ne)},function(){h.scrollTo(h.getElement(h.state.highlightCountryIndex),!0)})};switch(v.which){case D.DOWN:re(1);break;case D.UP:re(-1);break;case D.ENTER:h.props.enableSearch?h.handleFlagItemClick(h.getSearchFilteredCountries()[h.state.highlightCountryIndex]||h.getSearchFilteredCountries()[0],v):h.handleFlagItemClick([].concat(i(h.state.preferredCountries),i(h.state.onlyCountries))[h.state.highlightCountryIndex],v);break;case D.ESC:case D.TAB:h.setState({showDropdown:!1},h.cursorToEnd);break;default:(v.which>=D.A&&v.which<=D.Z||v.which===D.SPACE)&&h.setState({queryString:h.state.queryString+String.fromCharCode(v.which)},h.state.debouncedQueryStingSearcher)}}},h.handleInputKeyDown=function(v){var D=h.props,J=D.keys,re=D.onEnterKeyPress,ne=D.onKeyDown;v.which===J.ENTER&&re&&re(v),ne&&ne(v)},h.handleClickOutside=function(v){h.dropdownRef&&!h.dropdownContainerRef.contains(v.target)&&h.state.showDropdown&&h.setState({showDropdown:!1})},h.handleSearchChange=function(v){var D=v.currentTarget.value,J=h.state,re=J.preferredCountries,ne=J.selectedCountry,oe=0;if(D===""&&ne){var de=h.state.onlyCountries;oe=h.concatPreferredCountries(re,de).findIndex(function(ye){return ye==ne}),setTimeout(function(){return h.scrollTo(h.getElement(oe))},100)}h.setState({searchValue:D,highlightCountryIndex:oe})},h.concatPreferredCountries=function(v,D){return v.length>0?i(new Set(v.concat(D))):D},h.getDropdownCountryName=function(v){return v.localName||v.name},h.getSearchFilteredCountries=function(){var v=h.state,D=v.preferredCountries,J=v.onlyCountries,re=v.searchValue,ne=h.props.enableSearch,oe=h.concatPreferredCountries(D,J),de=re.trim().toLowerCase().replace("+","");if(ne&&de){if(/^\d+$/.test(de))return oe.filter(function(ae){var me=ae.dialCode;return["".concat(me)].some(function(Q){return Q.toLowerCase().includes(de)})});var ye=oe.filter(function(ae){var me=ae.iso2;return["".concat(me)].some(function(Q){return Q.toLowerCase().includes(de)})}),Z=oe.filter(function(ae){var me=ae.name,Q=ae.localName;return ae.iso2,["".concat(me),"".concat(Q||"")].some(function(Y){return Y.toLowerCase().includes(de)})});return h.scrollToTop(),i(new Set([].concat(ye,Z)))}return oe},h.getCountryDropdownList=function(){var v=h.state,D=v.preferredCountries,J=v.highlightCountryIndex,re=v.showDropdown,ne=v.searchValue,oe=h.props,de=oe.disableDropdown,ye=oe.prefix,Z=h.props,ae=Z.enableSearch,me=Z.searchNotFound,Q=Z.disableSearchIcon,Y=Z.searchClass,ke=Z.searchStyle,Me=Z.searchPlaceholder,Re=Z.autocompleteSearch,qe=h.getSearchFilteredCountries().map(function($e,_t){var Dt=J===_t,ss=P()({country:!0,preferred:$e.iso2==="us"||$e.iso2==="gb",active:$e.iso2==="us",highlight:Dt}),Pt="flag ".concat($e.iso2);return g.a.createElement("li",Object.assign({ref:function(Tt){return h["flag_no_".concat(_t)]=Tt},key:"flag_no_".concat(_t),"data-flag-key":"flag_no_".concat(_t),className:ss,"data-dial-code":"1",tabIndex:de?"-1":"0","data-country-code":$e.iso2,onClick:function(Tt){return h.handleFlagItemClick($e,Tt)},role:"option"},Dt?{"aria-selected":!0}:{}),g.a.createElement("div",{className:Pt}),g.a.createElement("span",{className:"country-name"},h.getDropdownCountryName($e)),g.a.createElement("span",{className:"dial-code"},$e.format?h.formatNumber($e.dialCode,$e):ye+$e.dialCode))}),Qe=g.a.createElement("li",{key:"dashes",className:"divider"});D.length>0&&(!ae||ae&&!ne.trim())&&qe.splice(D.length,0,Qe);var ht=P()(s({"country-list":!0,hide:!re},h.props.dropdownClass,!0));return g.a.createElement("ul",{ref:function($e){return!ae&&$e&&$e.focus(),h.dropdownRef=$e},className:ht,style:h.props.dropdownStyle,role:"listbox",tabIndex:"0"},ae&&g.a.createElement("li",{className:P()(s({search:!0},Y,Y))},!Q&&g.a.createElement("span",{className:P()(s({"search-emoji":!0},"".concat(Y,"-emoji"),Y)),role:"img","aria-label":"Magnifying glass"},"ðŸ”Ž"),g.a.createElement("input",{className:P()(s({"search-box":!0},"".concat(Y,"-box"),Y)),style:ke,type:"search",placeholder:Me,autoFocus:!0,autoComplete:Re?"on":"off",value:ne,onChange:h.handleSearchChange})),qe.length>0?qe:g.a.createElement("li",{className:"no-entries-message"},g.a.createElement("span",null,me)))};var ie,ue=new pe(M.enableAreaCodes,M.enableTerritories,M.regions,M.onlyCountries,M.preferredCountries,M.excludeCountries,M.preserveOrder,M.masks,M.priority,M.areaCodes,M.localization,M.prefix,M.defaultMask,M.alwaysDefaultMask),he=ue.onlyCountries,le=ue.preferredCountries,je=ue.hiddenAreaCodes,be=M.value?M.value.replace(/\D/g,""):"";ie=M.disableInitialCountryGuess?0:be.length>1?h.guessSelectedCountry(be.substring(0,6),M.country,he,je)||0:M.country&&he.find(function(v){return v.iso2==M.country})||0;var we,Te=be.length<2&&ie&&!N()(be,ie.dialCode)?ie.dialCode:"";we=be===""&&ie===0?"":h.formatNumber((M.disableCountryCode?"":Te)+be,ie.name?ie:void 0);var De=he.findIndex(function(v){return v==ie});return h.state={showDropdown:M.showDropdown,formattedNumber:we,onlyCountries:he,preferredCountries:le,hiddenAreaCodes:je,selectedCountry:ie,highlightCountryIndex:De,queryString:"",freezeSelection:!1,debouncedQueryStingSearcher:w()(h.searchCountry,250),searchValue:""},h}var y,q;return function(M,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(h&&h.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),h&&K(M,h)}(L,W),y=L,(q=[{key:"componentDidMount",value:function(){document.addEventListener&&this.props.enableClickOutside&&document.addEventListener("mousedown",this.handleClickOutside),this.props.onMount&&this.props.onMount(this.state.formattedNumber.replace(/[^0-9]+/g,""),this.getCountryData(),this.state.formattedNumber)}},{key:"componentWillUnmount",value:function(){document.removeEventListener&&this.props.enableClickOutside&&document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(M,h,ie){M.country!==this.props.country?this.updateCountry(this.props.country):M.value!==this.props.value&&this.updateFormattedNumber(this.props.value)}},{key:"updateFormattedNumber",value:function(M){if(M===null)return this.setState({selectedCountry:0,formattedNumber:""});var h=this.state,ie=h.onlyCountries,ue=h.selectedCountry,he=h.hiddenAreaCodes,le=this.props,je=le.country,be=le.prefix;if(M==="")return this.setState({selectedCountry:ue,formattedNumber:""});var we,Te,De=M.replace(/\D/g,"");if(ue&&N()(M,be+ue.dialCode))Te=this.formatNumber(De,ue),this.setState({formattedNumber:Te});else{var v=(we=this.props.disableCountryGuess?ue:this.guessSelectedCountry(De.substring(0,6),je,ie,he)||ue)&&N()(De,be+we.dialCode)?we.dialCode:"";Te=this.formatNumber((this.props.disableCountryCode?"":v)+De,we||void 0),this.setState({selectedCountry:we,formattedNumber:Te})}}},{key:"render",value:function(){var M,h,ie,ue=this,he=this.state,le=he.onlyCountries,je=he.selectedCountry,be=he.showDropdown,we=he.formattedNumber,Te=he.hiddenAreaCodes,De=this.props,v=De.disableDropdown,D=De.renderStringAsFlag,J=De.isValid,re=De.defaultErrorMessage,ne=De.specialLabel;if(typeof J=="boolean")h=J;else{var oe=J(we.replace(/\D/g,""),je,le,Te);typeof oe=="boolean"?(h=oe)===!1&&(ie=re):(h=!1,ie=oe)}var de=P()((s(M={},this.props.containerClass,!0),s(M,"react-tel-input",!0),M)),ye=P()({arrow:!0,up:be}),Z=P()(s({"form-control":!0,"invalid-number":!h,open:be},this.props.inputClass,!0)),ae=P()({"selected-flag":!0,open:be}),me=P()(s({"flag-dropdown":!0,"invalid-number":!h,open:be},this.props.buttonClass,!0)),Q="flag ".concat(je&&je.iso2);return g.a.createElement("div",{className:"".concat(de," ").concat(this.props.className),style:this.props.style||this.props.containerStyle,onKeyDown:this.handleKeydown},ne&&g.a.createElement("div",{className:"special-label"},ne),ie&&g.a.createElement("div",{className:"invalid-number-message"},ie),g.a.createElement("input",Object.assign({className:Z,style:this.props.inputStyle,onChange:this.handleInput,onClick:this.handleInputClick,onDoubleClick:this.handleDoubleClick,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onCopy:this.handleInputCopy,value:we,onKeyDown:this.handleInputKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,type:"tel"},this.props.inputProps,{ref:function(Y){ue.numberInputRef=Y,typeof ue.props.inputProps.ref=="function"?ue.props.inputProps.ref(Y):typeof ue.props.inputProps.ref=="object"&&(ue.props.inputProps.ref.current=Y)}})),g.a.createElement("div",{className:me,style:this.props.buttonStyle,ref:function(Y){return ue.dropdownContainerRef=Y}},D?g.a.createElement("div",{className:ae},D):g.a.createElement("div",{onClick:v?void 0:this.handleFlagDropdownClick,className:ae,title:je?"".concat(je.localName||je.name,": + ").concat(je.dialCode):"",tabIndex:v?"-1":"0",role:"button","aria-haspopup":"listbox","aria-expanded":!!be||void 0},g.a.createElement("div",{className:Q},!v&&g.a.createElement("div",{className:ye}))),be&&this.getCountryDropdownList()))}}])&&u(y.prototype,q),L}(g.a.Component);Ce.defaultProps={country:"",value:"",onlyCountries:[],preferredCountries:[],excludeCountries:[],placeholder:"1 (702) 123-4567",searchPlaceholder:"search",searchNotFound:"No entries to show",flagsImagePath:"./flags.png",disabled:!1,containerStyle:{},inputStyle:{},buttonStyle:{},dropdownStyle:{},searchStyle:{},containerClass:"",inputClass:"",buttonClass:"",dropdownClass:"",searchClass:"",className:"",autoFormat:!0,enableAreaCodes:!1,enableTerritories:!1,disableCountryCode:!1,disableDropdown:!1,enableLongNumbers:!1,countryCodeEditable:!0,enableSearch:!1,disableSearchIcon:!1,disableInitialCountryGuess:!1,disableCountryGuess:!1,regions:"",inputProps:{},localization:{},masks:null,priority:null,areaCodes:null,preserveOrder:[],defaultMask:"... ... ... ... ..",alwaysDefaultMask:!1,prefix:"+",copyNumbersOnly:!0,renderStringAsFlag:"",autocompleteSearch:!1,jumpCursorToEnd:!0,enableAreaCodeStretch:!1,enableClickOutside:!0,showDropdown:!1,isValid:!0,defaultErrorMessage:"",specialLabel:"Phone",onEnterKeyPress:null,keys:{UP:38,DOWN:40,RIGHT:39,LEFT:37,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9}},t.default=Ce}]);const la=Ks(ca);function da(){var P,$,F;const{current:c,json:t,pathList:n,navBack:s}=ge(),{selectedProduct:a}=et(),{user:i}=A(),{selectedFeature:r,createFeature:l,updateFeature:o,setSelectedFeature:u,removeFeature:m,setFeatureById:_,fetchFeatures:k}=St(),[V,K]=x.useState(!1),[z,g]=x.useState(!1),[b,w]=x.useState("components"),T=c("new_feature"),O=c("dash_features"),[p,S]=x.useState(O?r||{}:{});x.useEffect(()=>{r&&(S(r),w(r.view||"components"))},[r]),x.useEffect(()=>{T&&S({}),O&&(t!=null&&t.feature_id)&&i&&_(t.feature_id)},[i,t,n]);const N=st().width<1e3?"wrap":"";p.is_new=T;const U={components:e.jsx(ha,{canAdd:!0,setCollected:B=>S({...p,components:B}),collected:p}),number:e.jsx(ma,{collected:p}),text:e.jsx(ls,{type:"text",collected:p}),email:e.jsx(ls,{type:"email",collected:p}),website:e.jsx(ls,{type:"url",collected:p}),date:e.jsx(Ts,{type:"date",collected:p}),time:e.jsx(Ts,{type:"time",collected:p}),phone:e.jsx(ua,{collected:p})};return(O||T)&&(!r&&O?e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}):e.jsxs("div",{className:"dash-feature",ref:Fe,children:[e.jsx(yt,{deteleKey:(r==null?void 0:r.id.trim())||"noga",mode:T?"create":"delete",title:"Product Information",onCreate:()=>{z||(g(!0),l({...p,view:b,product_id:(r==null?void 0:r.id)||(t==null?void 0:t.product_id)}).then(B=>{if(g(!1),B!=null&&B.id)return k(),u(void 0),S({}),s();console.error("res",B)}))},onDelete:()=>{z||(g(!0),r&&m(r.id).then(B=>{if(g(!1),B)return k().then(()=>_(r.id)),S({}),u(void 0),s()}))}}),e.jsxs("section",{className:"editor "+N,children:[e.jsxs("div",{className:"right-side",children:[e.jsx("h3",{children:"Preview Feature"}),e.jsxs("div",{className:"feature-infos",children:[e.jsxs("div",{className:"edit-infos",children:[e.jsxs("label",{className:"s-icon",htmlFor:"s-icon",children:[e.jsx("div",{className:"label",children:(P=p.icon)!=null&&P[0]||p.new_icon?"Change Image":"Add Image"}),e.jsx("input",{accept:"image/*",style:{display:"none"},type:"file",name:"s-icon",id:"s-icon",onChange:B=>{var I;return S({...p,new_icon:((I=B.currentTarget.files)==null?void 0:I[0])||p.new_icon})}})]}),e.jsxs("label",{className:"s-name",htmlFor:"s-name",children:[e.jsx("div",{className:"label",children:"Name"}),e.jsx("input",{id:"s-name",value:p.name||"",type:"text",placeholder:"Feature Name",onChange:B=>S({...p,name:B.currentTarget.value||""})})]})]}),e.jsxs("div",{className:"feature",style:{background:"#358f2733"},onClick:()=>{},children:[e.jsx("label",{htmlFor:"s-icon",className:"icon",style:{background:p.new_icon?p.new_icon&&Ke(URL.createObjectURL(p.new_icon)):(($=p.icon)==null?void 0:$[0])&&Ke(p.icon[0])},children:!(p.icon||p.new_icon)&&"+ add Image"}),e.jsx("label",{htmlFor:"s-name",style:{filter:((F=gt("#358f27"))==null?void 0:F.result.filter)||""},className:"label _limit-text",children:p.name?Ge(p.name,10):".."})]})]}),e.jsx("h3",{className:"setting",children:"Setting"}),e.jsxs("div",{className:"setting-ctn",children:[e.jsxs("div",{className:"s-required",onClick:()=>S({...p,required:p.required?void 0:"true"}),children:[e.jsxs("div",{className:"box "+(p.required?"active":""),children:[" ",e.jsx("span",{style:{filter:gt("#fff").result.filter}})]}),"Required"]}),b!="phone"&&b!="time"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"s-min",children:[e.jsx("div",{className:"label",children:"Min"}),e.jsx("input",{id:"s-min",value:p.min||"",min:b=="components"||b=="text"||b=="email"||b=="website"?0:void 0,type:b=="date"?"date":"number",placeholder:"Min "+(b=="components"?"Selected":b=="text"||b=="email"||b=="website"?"Length":"value"),onChange:B=>{console.log(B.currentTarget.value),S({...p,min:b=="date"?new Date(B.currentTarget.value).getTime():B.currentTarget.value||parseFloat(B.currentTarget.value)})}})]}),e.jsxs("label",{htmlFor:"s-max",children:[e.jsx("div",{className:"label",children:"Max"}),e.jsx("input",{id:"s-max",value:p.max||"",min:b=="components"||b=="text"||b=="email"||b=="website"?0:void 0,type:b=="date"?"date":"number",placeholder:"Max "+(b=="components"?"Selected":b=="text"||b=="email"||b=="website"?"Length":"value"),onChange:B=>{console.log(B.currentTarget.value),S({...p,max:b=="date"?new Date(B.currentTarget.value).getTime():B.currentTarget.value||parseFloat(B.currentTarget.value)})}})]})]}),(b=="number"||b=="text"||b=="email"||b=="website")&&e.jsxs("label",{htmlFor:"s-placeholder",children:[e.jsx("div",{className:"label",children:"Placeholder"}),e.jsx("input",{id:"s-placeholder",type:"text",value:p.placeholder||"",placeholder:"Placeholder",onChange:B=>S({...p,placeholder:B.currentTarget.value})})]}),(b=="text"||b=="email"||b=="website")&&e.jsxs("label",{htmlFor:"s-match",children:[e.jsx("div",{className:"label",children:"RegExp"}),e.jsx("input",{id:"s-match",type:"text",placeholder:"RegExp",value:p.match||"",onChange:B=>S({...p,match:B.currentTarget.value})})]}),b=="text"&&e.jsxs("div",{className:"s-cases",children:[e.jsx("div",{className:"lowercase "+(p.case=="lowercase"?"active":""),onClick:()=>S({...p,case:p.case=="lowercase"?void 0:"lowercase"})}),e.jsx("div",{className:"uppercase "+(p.case=="uppercase"?"active":""),onClick:()=>S({...p,case:p.case=="uppercase"?void 0:"uppercase"})}),e.jsx("div",{className:"capitalize "+(p.case=="capitalize"?"active":""),onClick:()=>S({...p,case:p.case=="capitalize"?void 0:"capitalize"})})]})]})]}),e.jsxs("div",{className:"left-side",children:[O&&e.jsxs("div",{className:"feautre_id-update",children:[e.jsx(fe,{label:"Feature Id",value:r==null?void 0:r.id}),e.jsxs("div",{className:"update "+(z?"loading":""),onClick:()=>{z||(g(!0),o(p).then(B=>{g(!1),B!=null&&B.id}))},children:[e.jsx("span",{style:{filter:gt("#0012ff").result.filter}})," ",!z&&"Update"]})]}),e.jsxs("label",{htmlFor:"feature.product_id",children:[e.jsx("h2",{className:"labele",children:"Product Id"}),e.jsx("input",{type:"text",value:T?(a==null?void 0:a.id)||(t==null?void 0:t.product_id):p.product_id||"",onChange:B=>S({...p,product_id:B.currentTarget.value})})]}),e.jsx("h3",{children:"Choise Feature Type"}),e.jsxs("div",{className:"choise-view",children:[e.jsxs("div",{className:"choised",onClick:()=>K(!0),children:["View : ",e.jsx("span",{className:"view",children:p.view||b})," ",e.jsx("span",{className:"open"})]}),e.jsx("div",{className:"datas "+(V?"open":""),onClick:()=>K(!1),children:e.jsxs("div",{className:"input-datas",children:[e.jsx("div",{className:"d-components "+(b=="components"?"active":""),onClick:()=>{S({...p,view:"components",match:""}),w("components")},children:"Components"}),e.jsx("div",{className:"d-number "+(b=="number"?"active":""),onClick:()=>{S({...p,view:"number",match:""}),w("number")},children:"Number"}),e.jsx("div",{className:"d-text "+(b=="text"?"active":""),onClick:()=>{S({...p,view:"text",match:""}),w("text")},children:"Text"}),e.jsx("div",{className:"d-email "+(b=="email"?"active":""),onClick:()=>{w("email"),S({...p,view:"email",match:'^(([^<>()[]\\.,;:s@"]+(.[^<>()[]\\.,;:s@"]+)*)|(".+"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$'})},children:"Email"}),e.jsx("div",{className:"d-website "+(b=="website"?"active":""),onClick:()=>{w("website"),S({...p,view:"website",match:"(https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9]+.[^s]{2,}|www.[a-zA-Z0-9]+.[^s]{2,})"})},children:"Web Site"}),e.jsx("div",{className:"d-date "+(b=="date"?"active":""),onClick:()=>{S({...p,view:"date",match:""}),w("date")},children:"Date"}),e.jsx("div",{className:"d-time "+(b=="time"?"active":""),onClick:()=>{S({...p,view:"time",match:""}),w("time")},children:"Time"}),e.jsx("div",{className:"d-phone "+(b=="phone"?"active":""),onClick:()=>{S({...p,view:"phone",match:""}),w("phone")},children:"Phone"})]})}),e.jsx("div",{className:"ctn-view",children:U[b]})]})]})]})]}))}function Ts({collected:c,type:t}){const[n,s]=x.useState(""),[a,i]=x.useState(c.default_value||"");return e.jsxs("label",{htmlFor:"v-text",children:[e.jsxs("div",{className:"label",children:[c.name||"Input Date"," ",e.jsx("span",{children:n})]}),e.jsx("input",{id:"v-text",type:t,placeholder:c.placeholder,value:a||"",onChange:r=>{const l=r.currentTarget.value;c.min!=null&&l.length<c.min?s("Minimum Lenght is "+c.min):c.max!=null&&l.length>c.max?s("Maximum Lenght is "+c.max):s(""),i(l)}})]})}function ua({collected:c}){const[t,n]=x.useState(c.default_value||"");return e.jsx(la,{country:"us",value:t,onChange:s=>n(s)})}function ha({collected:c,setCollected:t,canAdd:n}){var i,r;const[s]=x.useState(""),{openChild:a}=Ae();return x.useEffect(()=>{},[c]),e.jsxs("div",{className:"components",children:[e.jsxs("div",{className:"comp-top",children:["( ",(i=c.components)==null?void 0:i.length," ) Avalaible",n&&e.jsxs("div",{className:"add-btn",onClick:()=>{const l={};a(e.jsx($s,{onCreate:o=>{var u;return t((u=c.components)==null?void 0:u.map(m=>m.name==o.name?o:m).filter(m=>l[m.name]?!1:l[m.name]=!0))}}),!1,"#3455",{overlay:!0})},children:[e.jsx("span",{}),"Add New"]}),e.jsx("span",{children:s})]}),e.jsx("div",{className:"comp-list "+(n?"can-add":""),children:(r=c.components)==null?void 0:r.map(l=>{var o,u,m,_,k,V;return e.jsxs("div",{className:"component _limit-text"+((o=l.images)!=null&&o[0]?" icon":"not-icon"),onClick:()=>{a(e.jsx($s,{component:l,onCreate:K=>{var z;return t((z=c.components)==null?void 0:z.map(g=>g.name==l.name?K:g).filter(g=>g.name==K.name?g.id==K.id:!0))}}),!1,"#3455",{overlay:!0})},children:[((u=l.images)==null?void 0:u[0])&&e.jsx("div",{className:"icon",style:{background:typeof((m=l.images)==null?void 0:m[0])=="string"?Ke((_=l.images)==null?void 0:_[0]):((k=l.images)==null?void 0:k[0])&&Ke(URL.createObjectURL(l.images[0]))}}),e.jsx("div",{style:{filter:((V=gt("#358f27"))==null?void 0:V.result.filter)||""},className:"label _limit-text",children:l.name&&Ge(l.name,10)}),n&&e.jsx("div",{className:"remove",onClick:K=>{K.preventDefault(),K.stopPropagation(),t(c.components.filter(z=>z.name!=l.name))}})]},l.name)})})]})}function $s({onCreate:c,component:t}){const{openChild:n}=Ae(),[s,a]=x.useState({description:"",scene_code:"",scene:null,price:0,unity:"",images:[],...t,name:(t==null?void 0:t.name)||""});return e.jsx("div",{className:"new-component",onClick:i=>{i.currentTarget==i.target&&n(void 0)},children:e.jsxs("div",{className:"ctn",children:[e.jsx("div",{className:"close",onClick:()=>n(void 0)}),e.jsx("h1",{children:"New Component"}),e.jsxs("label",{htmlFor:"new-comp-name",className:"name",children:[e.jsx("div",{className:"label",children:"Name"}),e.jsx("input",{id:"new-comp-name",type:"text",value:s.name||"",onChange:i=>a({...s,name:i.currentTarget.value})})]}),e.jsxs("label",{htmlFor:"new-comp-image",style:{background:typeof s.images[0]=="string"?Ke(s.images[0]):s.images[0]instanceof Blob&&Ke(URL.createObjectURL(s.images[0]))||""},className:"new-comp-image",children:[!s.images[0]&&"+ Add Image",e.jsxs("div",{className:"label",children:["Image ",e.jsx("span",{children:"( optional )"})]}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"new-comp-image",name:"new-comp-image",type:"file",onChange:i=>a({...s,images:i.currentTarget.files||s.images})})]}),e.jsxs("div",{className:"is-default "+(s.is_default?"default":""),onClick:()=>a({...s,is_default:!s.is_default}),children:[e.jsx("div",{className:"check",children:e.jsx("span",{})}),"Is Default"]}),e.jsxs("label",{htmlFor:"new-comp-description",className:"description",children:[e.jsxs("div",{className:"label",children:["Description ",e.jsx("span",{children:"( optional )"})]}),e.jsx("input",{id:"new-comp-description",type:"text",value:s.description||"",onChange:i=>a({...s,description:i.currentTarget.value})})]}),e.jsxs("label",{htmlFor:"new-comp-price",className:"price",children:[e.jsxs("div",{className:"label",children:["Price Impact ",e.jsx("span",{children:"( optional )"})]}),e.jsx("input",{id:"new-comp-price",type:"number",value:s.price||"",onChange:i=>a({...s,price:parseFloat(i.currentTarget.value)})})]}),e.jsxs("label",{htmlFor:"new-comp-scene-code",className:"scene-code",children:[e.jsxs("div",{className:"label",children:["Scene Code ",e.jsx("span",{children:"( optional )"})]}),e.jsx("input",{id:"new-comp-scene-code",type:"text",value:s.scene_code||"",onChange:i=>a({...s,scene_code:i.currentTarget.value})})]}),e.jsxs("div",{className:"label",children:["Scene File ",e.jsx("span",{children:"( optional )"})]}),e.jsx(ts,{onChange:i=>a({...s,scene:i})}),e.jsxs("div",{className:"btm",children:[e.jsx("div",{className:"cancel",onClick:()=>n(void 0),children:"Cancel"}),e.jsx("div",{className:"create",onClick:()=>{s.name.trim()&&(c(s),n(void 0))},children:t?"Edit":"Create"})]})]})})}function ls({collected:c,color:t,type:n}){const[s,a]=x.useState("");let i,r=n||"text";if(c.match)try{i=new RegExp(c.match,"i")}catch{}const[l,o]=x.useState(c.default_value||"");return e.jsxs("label",{htmlFor:"v-text",children:[c.icon&&e.jsx("div",{className:"icon",style:{background:Ke(c.icon[0]),filter:t&&gt(t).result.filter}}),e.jsxs("div",{className:"label",children:[c.name||"Input "+r,e.jsx("span",{children:s})]}),e.jsx("input",{id:"v-text",type:r,placeholder:c.placeholder,value:l||"",onChange:u=>{const m=u.currentTarget.value;i?i.test(m)?a(""):a("inValid "+r):c.min&&m.length<c.min?a("Minimum Lenght is "+c.min):c.max&&m.length>c.max?a("Maximum Lenght is "+c.max):a(""),c.max?o(m.substring(0,c.max)):o(m)}})]})}function ma({collected:c,color:t}){const[n,s]=x.useState(""),[a,i]=x.useState(c.min||0),[r,l]=x.useState(0);return e.jsxs("label",{htmlFor:"v-text",children:[c.icon&&e.jsx("div",{className:"icon",style:{background:Ke(c.icon[0]),filter:t&&gt(t).result.filter}}),e.jsxs("div",{className:"label",children:[c.name||"Input Number",e.jsx("span",{children:n})]}),e.jsx("input",{id:"v-text",type:"number",placeholder:c.placeholder,value:a||"",onChange:o=>{let u=o.currentTarget.value;if(c.min!=null&&u<c.min){s("Minimum Value is "+c.min),clearTimeout(r);const m=setTimeout(()=>{s("")},2e3);l(m)}else if(c.max!=null&&u>c.max){s("Maximum Value is "+c.max);const m=setTimeout(()=>{s("")},2e3);l(m)}else s("");i(u)}})]})}const pa=[{label:"products",value:"23",url:"/src/res/package.png",path:["products"]},{label:"categories",value:"15",url:"/src/res/application.png",path:["categories"]},{label:"catalogs",value:"15",url:"/src/res/catalog.png",path:["catalogs"]}];function vs({active:c,setActive:t}){const{storeVar:n}=Ae();return e.jsx("div",{className:"products-list-accessor",children:pa.map((s,a)=>e.jsxs("div",{className:"top-card "+(s.label==c?"active":""),onClick:()=>{t(s)},children:[e.jsx("h2",{className:"label",children:s.label.toUpperCase()}),e.jsx("h2",{className:"value",children:n==null?void 0:n[s.label]}),e.jsx("h2",{className:"icon",style:{backgroundImage:`url(${s.url})`}})]},a))})}function fa(){const{check:c,setAbsPath:t,current:n}=ge();return e.jsx(e.Fragment,{children:c("products")&&e.jsxs("div",{className:"page-product",children:[n("products","dash_product","new_product")&&e.jsx(vs,{active:"products",setActive:s=>t(s.path)}),e.jsx(da,{}),e.jsx(ia,{}),e.jsx(Ys,{}),e.jsx(ra,{}),e.jsx(oa,{})]})})}const ut=Ze(c=>({clients:void 0,selectedClient:void 0,clientCommands:void 0,clientVisites:void 0,async setClientById(t){const n=ut.getState().clients,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedClient:s}));else if(A.getState().store){const i=await ut.getState().fetchClients({query:{user_id:t}});c(()=>({selectedClient:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await ut.getState().fetchClients({query:{user_id:t}});c(()=>({selectedClient:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async fetchClientCommands(t){if(!(t!=null&&t.user_id))return;const n=await et.getState().fectProductCommands({...t});if(console.log(n),!(n!=null&&n.list))return c(()=>({clientCommands:void 0}));c(()=>({clientCommands:n}))},async fetchClientVisites({after_date:t,before_date:n,client_id:s,product_id:a,limit:i,page:r}){const l=A.getState().getHeaders();if(!l)return;const o={};o.store_id=l.store.id,o.product_id=a||"",o.client_id=s||"",o.limit=i||25,o.page=r||1,o.after_date=t||"",o.before_date=n||"",o.from_dash=!0;const u=new URLSearchParams({});for(const k in o){const V=o[k];u.set(k,V)}const _=await(await fetch(`${H}/get_client_visited/?${u.toString()}`,{headers:l.headers})).json();!_||!_.list||c(()=>({clientVisites:_}))},async setSelectedClient(t){c(()=>({selectedClient:t}))},async fetchClients(t){const n=A.getState().getHeaders();if(!n)return;const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.order_by&&(s.order_by=t.order_by),t!=null&&t.query.text&&(s.text=t.query.text),t!=null&&t.query.user_id&&(s.user_id=t.query.user_id),t!=null&&t.query.phone&&(s.phone=t.query.phone),s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_store_clients/?${a.toString()}`,{headers:n.headers})).json();if(console.log("clients",r),!(!r||!r.list))return c(()=>({clients:r})),r},async banClient(){}}));function ga(){const{current:c,qs:t}=ge(),{clients:n,setSelectedClient:s,fetchClients:a}=ut(),{store:i}=A();return x.useEffect(()=>{c("clients")&&i&&a()},[i]),c("clients")&&e.jsx("div",{className:"client-list",ref:Fe,children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","title","stock","price","date","status"],limit:n==null?void 0:n.limit,page:n==null?void 0:n.page,total:n==null?void 0:n.total,filter:{price:Je([0,1e5],[0,1e4]),stock:Je([0,1e4],[0,1e4]),status:kt(["PAUSE","TRASH","NEW"],[]),index:Et([0,100]),is_dynamic_price:tt(),hasScene:tt()}},items_height:80,id:"client_list",datas:(n==null?void 0:n.list)||[],itemsMapper:{photos:{getView(r,l,o,u){return X.ImageElement().getView(r,`${l[0].startsWith("/")?H:""}${l[0]}`,o,u)}},id:{getView(r,l,o,u){return e.jsxs("div",{ref:u,children:["#",l.split("-")[0]]},o.id)}},name:X.StringElement({size_interval:[50,200]}),status:{getView(r,l,o,u){return it.getView(r,"VISIBLE",o,u)}},created_at:X.DateStringElement({size:200})},onItemsSelected:(r,l)=>{l.forEach(o=>{o.$itemRef&&(o.$itemRef.style.background="")}),r.forEach(o=>{o.$itemRef&&(o.$itemRef.style.background="#00f2")}),s(r[0]),t({client_id:r[0].id}).setAbsPath(["clients","client_profile"])},onQuery:r=>{a(r)},top_height:40,canPaginate:!0})})})}function va(){const{current:c,setAbsPath:t,json:n,qs:s}=ge(),{selectedClient:a,setClientById:i,clientCommands:r,fetchClientVisites:l,fetchClientCommands:o,clientVisites:u}=ut(),[m,_]=x.useState("commands"),[k]=x.useState(!1),K=st().width<1e3?"wrap":"";return x.useEffect(()=>{n!=null&&n.client_id&&i(n==null?void 0:n.client_id)},[n]),x.useEffect(()=>{a&&o({limit:5,user_id:a.id}),a&&l({limit:5,client_id:a.id})},[a]),c("client_profile")&&(a?e.jsxs("div",{className:"client-profile",ref:Fe,children:[e.jsx("h1",{children:"Client Information"}),e.jsxs("section",{className:"editor "+K,children:[e.jsx("div",{className:"left-right",children:e.jsx(Ot,{name:"client_profile",images:a.photos||[],cannotEdit:!0})}),e.jsxs("div",{className:"left-side",children:[e.jsx(fe,{isCheckRequired:k,label:"Client Id",value:(a==null?void 0:a.id)||""}),e.jsx(fe,{prompt:"Client Name",isCheckRequired:k,min:3,check:"auto",max:50,label:"Name",placeholder:"Catalog Label",value:a==null?void 0:a.name}),e.jsx(fe,{prompt:"Client Email",isCheckRequired:k,min:3,check:"auto",max:50,label:"Email",placeholder:"Catalog Label",value:a==null?void 0:a.email}),e.jsx(fe,{label:"created At",value:a==null?void 0:a.created_at}),e.jsx(fe,{label:"Join Store At",value:a==null?void 0:a.join_at}),e.jsx(ps,{user:a,channel:"sessions"})]})]}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"btm-list",children:[e.jsx("h1",{children:"Products That Use This Catalog"}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"btn "+(m=="commands"?"active":""),onClick:()=>{_("commands")},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Commands"})]}),e.jsxs("div",{className:"btn "+(m=="visites"?"active":""),onClick:()=>{_("visites")},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Visites"})]})]}),e.jsx("h2",{className:"see-all",onClick:()=>{m=="visites"?t(["products"]):t(["command"])},children:"SEE ALL"})]}),m=="commands"&&e.jsx(X,{disableFilterBar:!0,items_height:80,id:"product-use-catalog_list",datas:(r==null?void 0:r.list)||[],itemsMapper:{images:{getView(z,g,b,w){return X.ImageElement().getView(z,`${H}${g[0]}`,b,w)}},id:{getView(z,g,b,w){return e.jsxs("div",{ref:w,children:["#",g.split("-")[0]]},b.id)}},stock:X.StringElement(),price:X.StringElement({size:200}),status:it,created_at:X.DateStringElement({size:200})},onItemsSelected:()=>{}}),m=="visites"&&e.jsx(X,{disableFilterBar:!0,items_height:80,id:"product-use-catalog_list",datas:(u==null?void 0:u.list)||[],itemsMapper:{images:{getView(z,g,b,w){return X.ImageElement().getView(z,`${H}${g[0]}`,b,w)}},id:{getView(z,g,b,w){return e.jsxs("div",{ref:w,children:["#",g.split("-")[0]]},b.id)}},title:X.StringElement({size:200}),visited_at:X.DateStringElement({size:200})},onItemsSelected:z=>{s({product_id:z[0].id}).setAbsPath(["products","dash_product"])}})]})]}):e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}))}function xa(){const{check:c,current:t,setAbsPath:n}=ge();return c("clients")&&e.jsxs("div",{className:"client-page",children:[t("clients","client_profile")&&e.jsx(Yt,{active:"clients",setActive:s=>n(s.path)}),e.jsx(ga,{}),e.jsx(va,{})]})}const ds="new_discussion";let At;const Qt=[],Oe=Ze(c=>({discussion:void 0,discussions:void 0,messages:void 0,setDiscussion(t){c(()=>({discussion:t}))},async setDiscussionByOtherId({other_id:t,for_moderator:n,findOther:s}){var u,m,_;const a=A.getState().getHeaders();if(!a)return;const i=(u=Oe.getState().discussions)==null?void 0:u.list,r=i==null?void 0:i.find(k=>k.other.id==t&&(n?!Xe(a.store.id,k):!!Xe(a.store.id,k)));if(r){if(((m=Oe.getState().messages)==null?void 0:m.list[0].table_id)==r.id)return;const k=await We.getState().fetchMessages(r.id,"discussions");c(()=>({discussion:r,messages:k}));return}const l=(_=await Oe.getState().fetchDiscussions({no_save:!0,other_id:t,for_moderator:n}))==null?void 0:_.list[0];if(console.log("exist Discussion",l,n),l){const k=await We.getState().fetchMessages(l.id,"discussions");c(()=>({discussion:l,messages:k}));return}const o=await s(t,!!n);o&&Oe.getState().addDiscussion({other:o,for_moderator:n})},async openDiscussionMessages(t){const n=await We.getState().fetchMessages(t,"discussions");c(()=>({messages:n}))},async unBlockDiscussion(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/unblock_discussion/${t.id}`,{method:"PUT",headers:n.headers});try{const a=await s.json();return console.log("unblock_discussion ",a),a!=null&&a.id?(c(({discussions:i})=>({discussions:i&&{...i,list:((i==null?void 0:i.list)||[]).map(r=>r.id==a.id?{...r,...a}:r)}})),a):void 0}catch(a){console.log(a)}},async blockDiscussion(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/block_discussion/${t.id}`,{method:"PUT",headers:n.headers});try{const a=await s.json();return console.log("unblock_discussion ",a),a!=null&&a.id?(c(({discussions:i})=>({discussions:i&&{...i,list:((i==null?void 0:i.list)||[]).map(r=>r.id==a.id?{...r,...a}:r)}})),a):void 0}catch(a){console.log(a)}},async deleteDiscussion(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/delete_discussion/${t.id}`,{method:"DELETE",headers:n.headers});try{const a=await s.json();return console.log("deleteDiscussion ",a),a!=null&&a.deleted?(c(({discussions:i,messages:r,discussion:l})=>({discussions:i&&{...i,list:((i==null?void 0:i.list)||[]).filter(o=>o.id!==t.id)},messages:(l==null?void 0:l.id)==t.id?void 0:r})),!0):void 0}catch(a){console.log(a)}},async createDiscussion({other_id:t,for_moderator:n}){const s=A.getState().getHeaders();if(!s)return;const a=new FormData;a.append("receiver_id",t),a.append("from_id",s.store.id),!n&&a.append("to_id",s.store.id);const i=await fetch(`${H}/create_discussion`,{headers:s.headers,body:a,method:"POST"});try{const r=await i.json();return console.log("createDiscussion",r),r!=null&&r.id?r:void 0}catch(r){console.log(r)}},async addDiscussion({other:t,for_moderator:n}){var o,u;const s=A.getState().getHeaders();if(!s||t.id==s.user.id)return;const a=(o=Oe.getState().discussions)==null?void 0:o.list,i=a==null?void 0:a.find(m=>m.other.id==t.id&&(n?!Xe(s.store.id,m):!!Xe(s.store.id,m)));if(console.log("addDiscussion",{exist:i}),i){const m=await We.getState().fetchMessages(i.id,"discussions");return c(()=>({discussion:i,messages:m})),i}const r=(u=Oe.getState().discussions)==null?void 0:u.list.filter(m=>m.id.startsWith(ds)?(m.receiver_id==t.id||m.creator_id==t.id)&&(n?!Xe(void 0,m):!!Xe(void 0,m)):!1);if(r!=null&&r[0]){console.log("@@@@@@@@@@@@@@@@@@@@@@@"),c(({discussions:m})=>({discussions:m&&{...m}}));return}const l={id:ds+Date.now(),creator_id:s.user.id,receiver_id:t.id,deleted:"",blocked:"",unchecked_count:0,creator_opened_at:"2024-05-09 12:30:15",receiver_opened_at:"",created_at:"",updated_at:"2024-05-09 13:46:04",other:t,from_id:s.store.id,to_id:n?void 0:s.store.id,last_message:void 0,other_att:"creator"};return c(({discussions:m})=>({messages:{list:[],limit:25,page:1,total:0},discussion:l,discussions:m&&{...m,list:[l,...m.list]}})),console.log("NEW DISCUSSION",l),l},async fetchDiscussions({discussion_id:t,no_save:n,other_id:s}){const a=A.getState().getHeaders();if(!a)return;const i=new URLSearchParams({});i.set("from_id",a.store.id),t&&i.set("discussion_id",t),s&&i.set("other_id",s);const l=await(await fetch(`${H}/get_discussions?${i}`,{headers:a.headers})).json();if(console.log("fetch Discussions",l),!l)return;At=c,l.list.forEach(async u=>{Is(u)});const o=`${a.user.id}/${a.store.id}`;if(!Qt.includes(o)){Qt.push(o);const u=es.subscription(o);await u.create(),u.onMessage(async m=>{var _;if(m.new_discussion){console.log("new_discussion ==>  ",m.new_discussion),Is(m.new_discussion);const k=m.new_discussion,V=k.receiver.id!=a.user.id?"receiver":"creator";k.other_att=V,k.other=k[V];const K=(_=Oe.getState().discussions)==null?void 0:_.list.filter(z=>z.id.startsWith(ds)?!(z.other.id==k.other.id&&(z.from_id||null)==(k.from_id||null)&&(z.to_id||null)==(k.to_id||null)):!0);c(({discussions:z})=>({discussions:z&&{...z,list:[k,...K||[]]}}))}m.reload_discussion&&(console.log("reload_discussion ==>  "),Oe.getState().fetchDiscussions({}))})}return n||c(({discussions:u})=>({discussions:{...l,list:[...((u==null?void 0:u.list)||[]).filter(m=>m.id.startsWith("new_")),...l.list]}})),l}}));async function Is(c){if(!A.getState().getHeaders()||Qt.includes(c.id))return;Qt.push(c.id);const n=es.subscription(c.id);await n.create(),n.onMessage(async s=>{var i,r;if(!At)return;const a=Oe.getState().discussion;if(s.reload){const l=(i=Oe.getState().discussions)==null?void 0:i.list,o=(r=await Oe.getState().fetchDiscussions({discussion_id:c.id,no_save:!0}))==null?void 0:r.list;if(console.log("reload Discussion ___________ ",o==null?void 0:o.length),!(o!=null&&o[0].id))return;const u=[...(l==null?void 0:l.map(m=>m.id==c.id?o==null?void 0:o[0]:m))||[]];At(({discussions:m})=>({discussions:m&&{...m,list:u}})),(a==null?void 0:a.id)==(o==null?void 0:o[0].id)&&At(()=>({discussion:{...o==null?void 0:o[0]}}))}if(s.reloadMessage&&(a==null?void 0:a.id)==c.id){console.log("reload Message___________",a);const l=await We.getState().fetchMessages(c.id,"discussions");At(()=>({messages:l,discussion:{...c}}))}})}const ja="new_discussion",ya="new_session",We=Ze(c=>({async fetchEditMessage(t){const n=A.getState().getHeaders();if(!n)return;const s=new FormData;s.append("message_id",t.message_id),s.append("text",t.text);const a=await fetch(`${H}/edit_message`,{method:"PUT",headers:n.headers,body:s});try{const i=await a.json();return console.log("edit_message ",i),i!=null&&i.id?i:void 0}catch(i){console.log(i)}},async fetchDeleteMessageBoth(t){const n=A.getState().getHeaders();if(!n)return;console.log("$$$$$$$$");const s=await fetch(`${H}/delete_message/${t}`,{method:"DELETE",headers:n.headers});try{const a=await s.json();return console.log("fetchDeleteMessageBoth",a),a==null?void 0:a.deleted}catch(a){console.log(a)}},async fetchDeleteMessageMe(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/delete_message/${t}`,{method:"DELETE",headers:n.headers});try{const a=await s.json();return console.log("fetchDeleteMessageMe",a),a==null?void 0:a.deleted}catch(a){console.log(a)}},async fetchSendMessage({context:t,context_name:n,files:s,text:a}){if(!t||!t.id)return;if(t.id.startsWith(ja)){const o=await Oe.getState().createDiscussion({other_id:t.other.id,for_moderator:t.to_id==null});if(console.log("D"),!o||!o.id)return;t=o,Oe.getState().setDiscussion(o)}else if(t.id.startsWith(ya)){const o=await Be.getState().fetchCreateSession(t.other.id,a||"");if(console.log("S",o),!o)return;t=o,Be.getState().setSession(o)}const i=A.getState().getHeaders();if(!i)return;const r=new FormData;if(!a&&!s)return;if(s)for(let o=0;o<s.length;o++){const u=s[o];r.append("files_"+o,u)}if(r.append("context_id",t.id),r.append("context_name",n),a&&r.append("text",a),s)for(let o=0;o<s.length;++o){const u=s[o];r.append("files_"+o,u)}const l=await fetch(`${H}/send_message`,{headers:i.headers,body:r,method:"POST"});try{const o=await l.json();return console.log("fetchSendMessage",o),o!=null&&o.id?o:void 0}catch(o){console.log(o)}},async fetchMessages(t,n){if(t.toLowerCase().startsWith("new_"))return;const s=A.getState().getHeaders();if(!s)return;const a=await fetch(`${H}/get_messages/?context_id=${t}&context_name=${n}`,{headers:s.headers});try{const i=await a.json();return i!=null&&i.list?{...i,list:i.list.reverse()}:void 0}catch{}}})),_a="new_session";let Rt;const Xt=[],Be=Ze(c=>({session:void 0,sessions:void 0,messages:void 0,setSession(t){c(()=>({session:t}))},async setSessionByClientId(t){setTimeout(async()=>{var a,i;const n=Be.getState().sessions,s=n==null?void 0:n.find(r=>r.other.id==t);if(console.log("current Session",t,s),s){const r=await We.getState().fetchMessages(s.id,"sessions");c(()=>({session:s,messages:r}))}else{const r=A.getState().getHeaders();if(!r)return;const o=(await(await fetch(`${H}/get_sessions?collaborator_id=${t}&store_id=${r.store.id}`,{headers:r.headers})).json())[0];if(console.log("exist Session",o),o){const u=await We.getState().fetchMessages(o.id,"sessions");c(()=>({session:o,messages:u}))}else{const u=((a=ut.getState().clients)==null?void 0:a.list.find(m=>m.id==t))||((i=await ut.getState().fetchClients({query:{user_id:t}}))==null?void 0:i.list[0]);console.log("collabo",u),u&&Be.getState().addSession(u)}}})},async openSessionMessages(t){const n=await We.getState().fetchMessages(t,"sessions");c(()=>({messages:n}))},async openSession(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/open_session/${t.id}`,{method:"PUT",headers:n.headers});try{const a=await s.json();if(console.log("open_session ",a),!(a!=null&&a.id))return}catch(a){console.log(a)}},async closeSession(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/close_session/${t.id}`,{method:"PUT",headers:n.headers});try{const a=await s.json();if(console.log("close_session ",a),!(a!=null&&a.id))return}catch(a){console.log(a)}},async asReadSession(t){},async deleteSession(t){const n=A.getState().getHeaders();if(!n)return;const s=await fetch(`${H}/delete_session/${t.id}`,{method:"DELETE",headers:n.headers});try{const a=await s.json();if(console.log("deleteSession",a),!a.deleted)return;c(()=>({session:void 0})),Be.getState().fetchSessions()}catch(a){console.log(a)}},async fetchCreateSession(t,n){if(!n)return;const s=A.getState().getHeaders();if(!s)return;const a=new FormData;a.append("receiver_id",t),a.append("store_id",s.store.id),a.append("title",n);const i=await fetch(`${H}/create_session`,{headers:s.headers,body:a,method:"POST"});try{const r=await i.json();return console.log("fetchCreateSession",r),r!=null&&r.id?(Be.getState().fetchSessions(),c(()=>({session:r})),r):void 0}catch(r){console.log(r)}},async addSession(t){var i;const n=(i=Be.getState().sessions)==null?void 0:i.find(r=>r.other.id==t.id);if(n){c(()=>({session:n}));const r=await We.getState().fetchMessages(n.id,"sessions");return c(()=>({messages:r}))}const s=A.getState().user;if(!s)return;const a={id:_a+Date.now(),creator_id:s.id,title:"",receiver_id:t.id,deleted:"",other_att:"creator",closed:"",blocked:"",unchecked_count:0,creator_opened_at:"2024-05-09 12:30:15",receiver_opened_at:"",created_at:"",updated_at:"2024-05-09 13:46:04",other:t};c(({sessions:r})=>({messages:{list:[],limit:25,page:1,total:0},session:a,sessions:[...r||[],a]}))},async fetchSessions(t="all"){const n=A.getState().getHeaders();if(!n)return;console.log(n.store.id);const a=await(await fetch(`${H}/get_sessions?store_id=${n.store.id}&open=${t}`,{headers:n.headers})).json();if(console.log("session",a),!!Array.isArray(a)&&(Rt=c,a.forEach(async i=>{As(i)}),c(()=>({sessions:a})),!Xt.includes(n.user.id))){Xt.push(n.user.id);const i=es.subscription(n.user.id);await i.create(),i.onMessage(async r=>{var l;if(r.new_session){As(r.new_session);const o=r.new_session,u=o.receiver.id!=n.user.id?"receiver":"creator";o.other_att=u,o.other=o[u];const m=(l=Be.getState().sessions)==null?void 0:l.filter(_=>_.id!=(o==null?void 0:o.id));c(()=>({sessions:[...m||[],o]}))}r.reload_session&&Be.getState().fetchSessions()})}}}));async function As(c){const t=A.getState().getHeaders();if(!t||Xt.includes(c.id))return;Xt.push(c.id);const n=es.subscription(c.id);await n.create(),n.onMessage(async s=>{if(!Rt)return;console.log("data_session",s);const a=Be.getState().session;if(s.reload){const i=Be.getState().sessions,l=await(await fetch(`${H}/get_sessions?session_id=${c.id}&store_id=${t.store.id}&blocked=all`,{headers:t.headers})).json();if(console.log("reload Session ___________ ",l.length),!(l!=null&&l[0]))return;const o=[...(i==null?void 0:i.map(u=>u.id==c.id?l==null?void 0:l[0]:u))||[]];Rt(()=>({sessions:o})),(a==null?void 0:a.id)==(l==null?void 0:l[0].id)&&Rt(()=>({session:{...l==null?void 0:l[0]}}))}if(s.reloadMessage&&(a==null?void 0:a.id)==c.id){console.log("reload Message___________",a);const i=await We.getState().fetchMessages(c.id,"sessions");Rt(()=>({messages:i,session:{...c}}))}})}function ba({}){var U;const{openChild:c}=Ae(),{json:t,qs:n,check:s,pathList:a,setAbsPath:i}=ge(),r=(U=a[3])==null?void 0:U.split("_")[1],[l,o]=x.useState(r||"opened"),{addSession:u,asReadSession:m,closeSession:_,openSession:k,deleteSession:V,fetchSessions:K,session:z,sessions:g,setSessionByClientId:b}=Be(),{user:w,store:T}=A(),{fetchClients:O}=ut();if(x.useEffect(()=>{s("chat")&&!g&&T&&K()},[T]),x.useEffect(()=>{t!=null&&t.client_id&&b(t==null?void 0:t.client_id)},[t]),x.useEffect(()=>{o(r||"opened")},[a]),x.useEffect(()=>{var P;(P=z==null?void 0:z.closed)!=null&&P.includes((w==null?void 0:w.id)||"")&&o("closed")},[z]),!w)return;const p=g==null?void 0:g.filter(P=>{var $;return!(($=P.closed)!=null&&$.includes(w.id))}),S=g==null?void 0:g.filter(P=>{var $;return($=P.closed)==null?void 0:$.includes(w.id)}),ee=g==null?void 0:g.filter(P=>P.unchecked_count>0);let N=[];return l=="opened"?N=p:l=="closed"?N=S:N=ee,e.jsxs("div",{className:"session-nav",children:[e.jsxs("div",{className:"title",children:[e.jsx("div",{className:"label",children:"Sessions "}),e.jsxs("div",{className:"add-new",onClick:()=>{c(e.jsx(Os,{user:w,openChild:c,fetchUsers:O,setUser:P=>{u(P)}}),!0,"#0002")},children:[" ",e.jsx("span",{})]})]}),e.jsxs("div",{className:"options",children:[e.jsx("div",{className:"option",onClick:()=>{i(["chat","sessions","sessions_opened"])},children:e.jsxs("div",{className:l=="opened"?"active":"",children:["Open",((p==null?void 0:p.length)||0)>0?e.jsx("span",{}):void 0]})}),e.jsx("div",{className:"option",onClick:()=>{i(["chat","sessions","sessions_closed"])},children:e.jsxs("div",{className:l=="closed"?"active":"",children:["Closed ",((S==null?void 0:S.length)||0)>0?e.jsx("span",{}):void 0]})}),e.jsx("div",{className:"option",onClick:()=>{i(["chat","sessions","sessions_new"])},children:e.jsxs("div",{className:l=="new"?"active":"",children:["New  ",((ee==null?void 0:ee.length)||0)>0?e.jsx("span",{}):void 0]})})]}),e.jsx("div",{className:"search",children:e.jsxs("div",{className:"input",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{type:"text",placeholder:"Search"})]})}),e.jsx("div",{className:"sessions",children:N==null?void 0:N.map(P=>{var F,B;let $="";return((F=P.last_message)==null?void 0:F.user_id)==w.id&&(P[`${P.other_att}_opened_at`]?new Date(P[`${P.other_att}_opened_at`])<new Date(((B=P.last_message)==null?void 0:B.created_at)||"")?$="one":$="double":$="one"),e.jsxs("div",{className:"session "+((z==null?void 0:z.id)==P.id?"active":""),onClick:I=>{console.log(P.other,w),n({client_id:P.other.id,nav:document.querySelector(".back-close.nav").getBoundingClientRect().width==0?void 0:"min"}).setAbsPath(["chat","sessions"]);const j=I.currentTarget.querySelector(".count");j.style.display="none"},onContextMenu:I=>{I.preventDefault(),c(e.jsx(Na,{closed:!!(S!=null&&S.includes(P)),x:I.clientX,y:I.clientY,onClose:j=>{j?(_(P),o("closed")):(k(P),o("opened"))},onAsRead:()=>{m(P)},onDelete:()=>{V(P)}}))},children:[e.jsx("div",{className:"photo",style:{background:Ke(P.other.photos[0])}}),e.jsxs("div",{className:"right",children:[e.jsxs("div",{className:"top-ctn",children:[e.jsx("div",{className:"name",children:Ge(P.other.name,16)}),e.jsx("div",{className:"date",children:P.last_message&&Ct(P.last_message.created_at)})]}),e.jsx("i",{className:"center-ctn",children:Ge(P.title,20)}),e.jsxs("div",{className:"btm",children:[e.jsx("div",{className:"checked "+$}),e.jsx("div",{className:"text",children:P.last_message?Ge(P.last_message.text,24):"New Session"}),e.jsx("div",{className:"count",style:{display:(z==null?void 0:z.id)==P.id?"none":P.unchecked_count>0?"flex":"none"},children:P.unchecked_count})]})]})]},P.id)})})]})}function Na({x:c,y:t,onClose:n,onAsRead:s,onDelete:a,closed:i}){const r=x.useRef(null);return x.useEffect(()=>{r.current&&jt(r.current)}),e.jsxs("div",{ref:r,className:"discussion-popu",style:{top:`${t}px`,left:`${c}px`},children:[e.jsxs("div",{className:"as-read",onClick:s,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Mark as read"})]}),e.jsxs("div",{className:"block",onClick:()=>n(!i),children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:i?"Open":"Close"})]}),e.jsxs("div",{className:"delete",onClick:a,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Delete chat"})]})]})}const nt=Ze(c=>({collaborators:void 0,selectedCollaborator:void 0,async updateCollaborator(t){},async change_collaborator_role(t){var i;const n=A.getState().getHeaders();if(!n)return;t.store_id=(i=A.getState().store)==null?void 0:i.id;const s=new FormData,a=[];["store_id","new_role_id","collaborator_id"].forEach(r=>{if(t[r]!=null)s.append(r,t[r]||"");else return a.push(r+" is not defined")});{const l=await(await fetch(`${H}/change_collaborator_role`,{method:"PUT",body:s,headers:n.headers})).json();if(!l||!l.id)return a.push("Server Error, Try Later"),a}},async addCollaborator(t){console.log(t);const n=A.getState().store;if(!n)return;let s=A.getState().user;if(!s)return;t.store_id=n.id;const a=new FormData,i=[];["store_id","role_id","email"].forEach(l=>{if(t[l]!=null)a.append(l,t[l]);else return i.push(l+" is not defined")});const r=new Headers;r.append("Authorization",`Bearer ${s.token}`);{const o=await(await fetch(`${H}/add_collaborator`,{method:"POST",body:a,headers:r})).json();if(!o||!o.id)return i.push("Server Error, Try Later"),i;c(()=>({selectedCollaborator:o})),Ae.getState().fetchUsersVar(),ge.getState().setAbsPath(["collaborators","collaborator_profile"])}},async setSelectedCollaborator(t){c(()=>({selectedCollaborator:t}))},async setCollaboratorById(t){const n=nt.getState().collaborators,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedCollaborator:s}));else if(A.getState().store){const i=await nt.getState().fetchCollaborators({query:{user_id:t}});c(()=>({selectedCollaborator:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await nt.getState().fetchCollaborators({query:{user_id:t}});c(()=>({selectedCollaborator:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async removeCollaborator(t){let n=A.getState().getHeaders();if(!n)return;const s=new FormData;s.append("store_id",n.store.id),s.append("collaborator_id",t);const a={method:"DELETE",headers:n.headers,body:s},r=await(await fetch(`${H}/remove_collaborator`,a)).json();Ae.getState().fetchUsersVar(),r.deleted&&c(()=>({selectedCollaborator:void 0}))},async fetchCollaborators(t){var l,o,u,m,_,k,V;let n=A.getState().getHeaders();if(!n)return;const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.order_by&&(s.order_by=t.order_by),(l=t==null?void 0:t.query)!=null&&l.text&&(s.text=(o=t.query)==null?void 0:o.text),(u=t==null?void 0:t.query)!=null&&u.user_id&&(s.user_id=(m=t.query)==null?void 0:m.user_id),(_=t==null?void 0:t.query)!=null&&_.phone&&(s.phone=(k=t.query)==null?void 0:k.phone),s.store_id=(V=n.store)==null?void 0:V.id;const a=new URLSearchParams({});for(const K in s){const z=s[K];a.set(K,z)}const r=await(await fetch(`${H}/get_store_collaborators/?${a.toString()}`,{headers:n.headers})).json();if(!(!r||!r.list))return c(()=>({collaborators:r})),r},async banCollaborator(t){}})),xt=Ze(c=>({moderators:void 0,selectedModerator:void 0,moderatorCommands:void 0,moderatorVisites:void 0,async setModeratorById(t){const n=xt.getState().moderators,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedModerator:s}));else{const a=await xt.getState().fetchModerators({query:{user_id:t}});c(()=>({selectedModerator:a==null?void 0:a.list.find(i=>i.id==t)}))}},async setSelectedModerator(t){c(()=>({selectedModerator:t}))},async fetchModerators(t){var l,o,u;const n=A.getState().getHeaders();if(!n)return;const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.order_by&&(s.order_by=t.order_by),(l=t==null?void 0:t.query)!=null&&l.text&&(s.text=t.query.text),(o=t==null?void 0:t.query)!=null&&o.user_id&&(s.user_id=t.query.user_id),(u=t==null?void 0:t.query)!=null&&u.phone&&(s.phone=t.query.phone),s.store_id=n.store.id;const a=new URLSearchParams({});for(const m in s){const _=s[m];a.set(m,_)}const r=await(await fetch(`${H}/get_moderators/?${a.toString()}`,{headers:n.headers})).json();if(!(!r||!r.list))return c(()=>({moderators:r})),r},async banModerator(){}}));function us(){var P;const{discussion:c,discussions:t,fetchDiscussions:n,addDiscussion:s,blockDiscussion:a,deleteDiscussion:i,unBlockDiscussion:r,setDiscussionByOtherId:l}=Oe(),{check:o,json:u,pathList:m,qs:_,setAbsPath:k}=ge(),V=(P=m[3])==null?void 0:P.split("_")[1],[K,z]=x.useState(V||"all"),{openChild:g}=Ae(),{user:b,store:w}=A(),{fetchCollaborators:T}=nt(),{fetchModerators:O}=xt();if(x.useEffect(()=>{(u!=null&&u.collaborator_id||u!=null&&u.moderator_id)&&l({other_id:(u==null?void 0:u.collaborator_id)||(u==null?void 0:u.moderator_id),for_moderator:!!(u!=null&&u.moderator_id),async findOther($,F){var B,I,j,E;return F?((B=xt.getState().moderators)==null?void 0:B.list.find(G=>G.id==$))||((I=await xt.getState().fetchModerators({query:{user_id:$}}))==null?void 0:I.list[0]):((j=nt.getState().collaborators)==null?void 0:j.list.find(G=>G.id==$))||((E=await nt.getState().fetchCollaborators({query:{user_id:$}}))==null?void 0:E.list[0])}}),o("chat")&&!t&&w&&n({}),z(V||"all")},[u,w]),x.useEffect(()=>{z(V||"all")},[m]),!b)return;const p=t==null?void 0:t.list.filter($=>{var F;return!((F=$.blocked)!=null&&F.includes(b.id))&&!!Xe((w==null?void 0:w.id)||"",$)}),S=t==null?void 0:t.list.filter($=>{var F;return(F=$.blocked)==null?void 0:F.includes(b.id)}),ee=t==null?void 0:t.list.filter($=>{var F;return $.unchecked_count>0&&!((F=$.blocked)!=null&&F.includes(b.id))}),N=t==null?void 0:t.list.filter($=>!Xe((w==null?void 0:w.id)||"",$));let U=[];return K=="admin"?U=N:K=="new"?U=ee:K=="blocked"?U=S:U=p,e.jsxs("div",{className:"discussion-nav",children:[e.jsxs("div",{className:"title",children:[e.jsx("div",{className:"label",children:"Chats "}),e.jsxs("div",{className:"add-new",onClick:()=>{g(e.jsx(Os,{fetchUsers:T,openChild:g,user:b,setUser:($,F)=>{console.log({discMode:F}),s({other:$,for_moderator:F=="moderators"}),F=="moderators"&&k(["chat","discussions","discussions_admin"])},selector:{list:[{name:"collaborators",fetch:T},{name:"moderators",fetch:O}]}}),!0,"#0002")},children:[" ",e.jsx("span",{})]})]}),e.jsxs("div",{className:"options",children:[e.jsx("div",{className:"option",onClick:()=>{_(u||{}).setAbsPath(["chat","discussions","discussions_all"])},children:e.jsxs("div",{className:K=="all"?"active":"",children:["All",((p==null?void 0:p.length)||0)>0?e.jsx("span",{}):void 0]})}),e.jsx("div",{className:"option",onClick:()=>{_(u||{}).setAbsPath(["chat","discussions","discussions_new"])},children:e.jsxs("div",{className:K=="new"?"active":"",children:["New ",((ee==null?void 0:ee.length)||0)>0?e.jsx("span",{}):void 0]})}),e.jsx("div",{className:"option",onClick:()=>{_(u||{}).setAbsPath(["chat","discussions","discussions_blocked"])},children:e.jsxs("div",{className:K=="blocked"?"active":"",children:["Blocked  ",((S==null?void 0:S.length)||0)>0?e.jsx("span",{}):void 0]})}),e.jsx("div",{className:"option",onClick:()=>{_(u||{}).setAbsPath(["chat","discussions","discussions_admin"])},children:e.jsxs("div",{className:K=="admin"?"active":"",children:["Admin  ",((N==null?void 0:N.length)||0)>0?e.jsx("span",{}):void 0]})})]}),e.jsx("div",{className:"search",children:e.jsxs("div",{className:"input",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{type:"text",placeholder:"Search"})]})}),e.jsx("div",{className:"discussions",children:U==null?void 0:U.map($=>{var B;let F="";return((B=$.last_message)==null?void 0:B.user_id)==b.id&&($[`${$.other_att}_opened_at`]?new Date($[`${$.other_att}_opened_at`])<new Date($.last_message.created_at)?F="one":F="double":F="one"),e.jsxs("div",{className:"discussion "+((c==null?void 0:c.id)==$.id?"active":""),onClick:I=>{$.unchecked_count=0,w&&_({[Xe(w.id,$)?"collaborator_id":"moderator_id"]:$.other.id,nav:document.querySelector(".back-close.nav").getBoundingClientRect().width==0?void 0:"min"}).setAbsPath(["chat","discussions","discussions_"+(K||"_all")]);const j=I.currentTarget.querySelector(".count");j.style.display="none"},onContextMenu:I=>{I.preventDefault(),g(e.jsx(Sa,{canBlock:!!Xe(w==null?void 0:w.id,$),blocked:!!(S!=null&&S.includes($)),x:I.clientX,y:I.clientY,onBlock:j=>{j?(a($),_(u||{}).setAbsPath(["chat","discussions","discussions_blocked"])):(r($),_(u||{}).setAbsPath(["chat","discussions","discussions_all"]))},onAsRead:()=>{},onDelete:()=>{i($)}}))},children:[e.jsx("div",{className:"photo",style:{background:Ke($.other.photos[0])}}),e.jsxs("div",{className:"right",children:[e.jsxs("div",{className:"top-ctn",children:[e.jsx("div",{className:"name",children:Ge($.other.name,16)}),e.jsx("div",{className:"date",children:$.last_message&&Ct($.last_message.created_at)})]}),e.jsxs("div",{className:"btm",children:[e.jsx("div",{className:"checked "+F}),e.jsx("div",{className:"text",children:$.last_message?Ge($.last_message.text,24):"New Discussion"}),e.jsx("div",{className:"count",style:{display:(c==null?void 0:c.id)==$.id?"none":$.unchecked_count>0?"flex":"none"},children:$.unchecked_count})]})]})]},$.id)})})]})}function Sa({x:c,y:t,onBlock:n,onAsRead:s,onDelete:a,blocked:i,canBlock:r}){const l=x.useRef(null);return x.useEffect(()=>{l.current&&jt(l.current)}),e.jsxs("div",{ref:l,className:"discussion-popu",style:{top:`${t}px`,left:`${c}px`},children:[e.jsxs("div",{className:"as-read",onClick:s,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Mark as read"})]}),r&&e.jsxs("div",{className:"block",onClick:()=>n(!i),children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:i?"Unblock":"Bolck"})]}),e.jsxs("div",{className:"delete",onClick:a,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Delete chat"})]})]})}function hs(){var I;const{discussion:c,messages:t}=Oe(),{fetchSendMessage:n,fetchDeleteMessageBoth:s,fetchDeleteMessageMe:a,fetchEditMessage:i}=We(),{user:r}=A(),{openChild:l}=Ae(),{qs:o,json:u,navBack:m}=ge(),[_,k]=x.useState(!1),[V,K]=x.useState(1),[z,g]=x.useState(!1),b=x.useRef(null),w=x.useRef(null),[T,O]=x.useState(null),[p]=x.useState(Date.now()+""),[S,ee]=x.useState({top:0,bottom:0,height:0,isOpen:!1,lastid:0}),N=st(),U=()=>{if(!w.current)return;const j=w.current,E=Math.ceil(j.scrollHeight/(j.getBoundingClientRect().height||20)),G=Math.ceil(j.scrollHeight/20),pe=j.value.split(`
`).length;let Ce=Math.max(E,pe,G);Ce=Ce>10?10:Ce-1>=1?Ce-1:1,K(Ce)};x.useEffect(()=>{U()},[N]),x.useEffect(()=>{window.addEventListener("click",()=>{z&&g(!1)})},[]),x.useEffect(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[t]);const P=c==null?void 0:c.other.photos[0],$=(j,E)=>j.list[E].user_id==(r==null?void 0:r.id)?"right":"left",F=(j,E)=>j.list[E-1]&&j.list[E-1].user_id==(r==null?void 0:r.id)?"right":"left",B=(j,E)=>j.list[E+1]&&(j.list[E+1].user_id==(r==null?void 0:r.id)?"right":"left");return e.jsxs("div",{className:"discussion-center",children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"open-nonav",onClick:()=>{m()}}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"profile",style:{background:`no-repeat center/cover url(${P!=null&&P.startsWith("/")?H:""}${P})`},onClick:()=>{u!=null&&u.moderator_id?o({moderator_id:c.other.id}).setAbsPath(["moderators","moderator_profile"]):o({collaborator_id:c.other.id}).setAbsPath(["collaborators","collaborator_profile"])}}),e.jsxs("div",{className:"ctn-name",children:[e.jsx("div",{className:"name",children:Ge(c.other.name,50)}),c[`${c.other_att}_opened_at`]&&e.jsxs("div",{className:"last-time",children:["Last seen ",Ct(c[`${c.other_att}_opened_at`])]})]}),e.jsx("div",{className:"option",children:e.jsx("div",{className:"more",onClick:He()})})]})]}),!c&&e.jsx("div",{className:"no-discussion",children:e.jsx("div",{className:"label",children:"Select a chat to start messaging"})}),c&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"messages",ref:j=>{b.current=j,_||(b.current&&b.current.scrollTo({top:b.current.scrollHeight}),k(!0))},onScroll:j=>{const E=j.currentTarget;clearInterval(S.lastid);const G=setTimeout(()=>{const pe={isOpen:!1,height:E.scrollHeight,bottom:E.scrollHeight-(E.scrollTop+E.getBoundingClientRect().height),top:E.scrollTop,onProcess:!1,lastid:G};pe.bottom>150&&(pe.isOpen=!0),ee(pe),console.log(G)},100);S.lastid=G},children:(I=t==null?void 0:t.list)==null?void 0:I.map((j,E)=>{var L;const G=$(t,E),pe=F(t,E),Ce=B(t,E);let W="";return G==pe?Ce&&pe==Ce&&(W="mid"):Ce&&G==Ce&&(W="start"),e.jsx("div",{className:"message",children:e.jsxs("div",{className:"ctn "+G+" "+W,onContextMenu:y=>{y.preventDefault(),l(e.jsx(wa,{forMe:r.id==j.user_id,x:y.clientX,y:y.clientY,onDeleteBoth:()=>{s(j.id)},onDeleteMe:()=>{a(j.id)},onEdit:()=>{l(e.jsx(Ca,{x:y.clientX,y:y.clientY,text:j.text,onEdit:q=>{l(void 0),i({message_id:j.id,text:q})}}),!0)},other:c.other}))},children:[e.jsx("div",{className:"text",children:j.text&&j.text.split(" ").map((y,q)=>y.split(`
`).map((M,h)=>M?e.jsx("span",{style:{marginRight:"4px"},children:M},q+"+"+h):e.jsx("div",{style:{width:"100%",height:"1em"}},q+"~"+h)))}),e.jsx("div",{className:"files",children:(L=j.files)==null?void 0:L.map(y=>e.jsxs("div",{className:"message-file",onClick:()=>{window.open(`${y.startsWith("/")?H:""}${y}`,void 0)},children:[e.jsx("div",{className:"save"}),e.jsx("div",{className:"lable",children:y.length>35?Ge(y,25)+y.substring(y.length-8,y.length):y})]},y))}),e.jsxs("div",{className:"info",children:[j.created_at!=j.updated_at&&e.jsx("div",{className:"edited"}),e.jsx("div",{className:"date",children:Ct(j.created_at)})]})]})},j.id)})}),e.jsxs("div",{className:"sender",children:[S.isOpen&&e.jsx("div",{className:"down-btn",onClick:()=>{b.current&&b.current.scrollTo({behavior:"smooth",top:S.height})}}),z&&e.jsx("div",{className:"emoji-list",onClick:j=>{j.preventDefault(),j.stopPropagation()},children:Ms.map(j=>e.jsx("span",{onClick:E=>{E.preventDefault(),E.stopPropagation(),w.current&&(w.current.value+=j.char)},children:j.char},j.char))}),e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"left",children:[e.jsx("input",{multiple:!0,type:"file",style:{display:"none"},name:"message_file",id:p+"message_file",onChange:j=>{if(!j.currentTarget.files)return;const E=[];for(let G=0;G<j.currentTarget.files.length;G++){const pe=j.currentTarget.files[G];E.push(pe)}O(E.length>0?T?[...T,...E]:E:null)}}),e.jsx("label",{htmlFor:p+"message_file",className:"add-file",onClick:He()}),e.jsx("div",{className:"emoji-min",onClick:j=>{j.preventDefault(),j.stopPropagation(),He()(j),g(!z)}})]}),e.jsxs("div",{className:"sender_center",children:[e.jsx("div",{className:"files",children:T&&T.map(j=>e.jsxs("div",{className:"file",children:[e.jsx("div",{className:"remove",onClick:()=>{T&&O(T.filter(E=>E!==j))}}),e.jsx("div",{className:"text",children:j.name})]},j.name))}),e.jsx("textarea",{autoFocus:!0,ref:w,name:"discussion_sender",placeholder:"Type a message here..",id:"discussion_sender",style:{height:`${V*20}px`},cols:30,rows:10,onChange:j=>{U()},onKeyDown:()=>{g(!1)}})]}),e.jsx("div",{className:"right",children:e.jsx("div",{className:"send",onClick:j=>{var E;He()(j),n({context:c,context_name:"discussions",files:T,text:(E=w.current)==null?void 0:E.value}),O(null),w.current&&(w.current.value="")},children:e.jsx("div",{className:"icon"})})})]})]})]})]})}function wa({x:c,y:t,onEdit:n,onDeleteBoth:s,onDeleteMe:a,other:i,forMe:r}){const l=x.useRef(null);return x.useEffect(()=>{l.current&&jt(l.current)}),e.jsxs("div",{ref:l,className:"message-popu",style:{top:`${t}px`,left:`${c}px`},children:[r&&e.jsxs("div",{className:"edit",onClick:o=>{o.preventDefault(),o.stopPropagation(),n()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Edit message"})]}),e.jsxs("div",{className:"delete-me",onClick:a,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Delete for me"})]}),r&&e.jsxs("div",{className:"delete-both",onClick:s,children:[e.jsx("div",{className:"icon"}),e.jsxs("div",{className:"label",children:["Delete also for ",i.name," "]})]})]})}function Ca({x:c,y:t,onEdit:n,text:s}){const a=x.useRef(null),[i,r]=x.useState(s);return x.useEffect(()=>{a.current&&jt(a.current)}),e.jsxs("div",{ref:a,className:"message-edit-popu",style:{top:`${t}px`,left:`${c}px`},onClick:l=>{l.stopPropagation(),l.preventDefault()},children:[e.jsx("div",{className:"title",children:"Edit message"}),e.jsxs("div",{className:"input",children:[e.jsx("textarea",{value:i,onChange:l=>{r(l.currentTarget.value)}}),e.jsx("div",{className:"save",onClick:()=>{n(i)},children:e.jsxs("div",{className:"save-ctn",children:[e.jsx("div",{className:"label",children:"Save"}),e.jsx("div",{className:"icon"})]})})]})]})}const ka=250,Ls=c=>c.split(" ").map((t,n)=>t.includes(`
`)?t.split(`
`).map((s,a)=>e.jsxs("div",{children:[e.jsx("span",{style:{marginRight:"4px"},children:s}),e.jsx("br",{})]},n+"_"+a)):e.jsx("span",{style:{marginRight:"4px"},children:t},n));function Ea(){var G,pe,Ce,W,L;const{session:c,messages:t,fetchCreateSession:n}=Be(),{fetchSendMessage:s,fetchDeleteMessageBoth:a,fetchDeleteMessageMe:i,fetchEditMessage:r}=We(),{user:l}=A(),{openChild:o}=Ae(),{qs:u,navBack:m}=ge(),[_,k]=x.useState(!1),[V,K]=x.useState(1),[z,g]=x.useState(!1),b=x.useRef(null),w=x.useRef(null),[T,O]=x.useState(""),[p,S]=x.useState(null),[ee]=x.useState(Date.now()+""),[N,U]=x.useState({top:0,bottom:0,height:0,isOpen:!1,lastid:0}),P=st(),$=()=>{if(!w.current)return;const y=w.current,q=Math.ceil(y.scrollHeight/(y.getBoundingClientRect().height||20)),M=Math.ceil(y.scrollHeight/20),h=y.value.split(`
`).length;let ie=Math.max(q,h,M);ie=ie>10?10:ie-1>=1?ie-1:1,K(ie),console.log(ie)};x.useEffect(()=>{$()},[P]),x.useEffect(()=>{window.addEventListener("click",()=>{g(!1)})},[]);const F=c==null?void 0:c.other.photos[0],B=(y,q)=>y.list[q].user_id==(l==null?void 0:l.id)?"right":"left",I=(y,q)=>y.list[q-1]&&y.list[q-1].user_id==(l==null?void 0:l.id)?"right":"left",j=(y,q)=>y.list[q+1]&&(y.list[q+1].user_id==(l==null?void 0:l.id)?"right":"left"),E=!(c!=null&&c.title);return e.jsxs("div",{className:"session-center",children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"open-nonav",onClick:()=>{m()}}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"profile",style:{background:`no-repeat center/cover url(${F!=null&&F.startsWith("/")?H:""}${F})`},onClick:()=>{u({client_id:c.other.id}).setAbsPath(["clients","client_profile"])}}),e.jsxs("div",{className:"ctn-name",children:[e.jsx("div",{className:"name",children:Ge(c.other.name,50)}),c[`${c.other_att}_opened_at`]&&e.jsxs("div",{className:"last-time",children:["Last seen ",Ct(c[`${c.other_att}_opened_at`])]})]}),e.jsx("div",{className:"option",children:e.jsx("div",{className:"more",onClick:He()})})]})]}),!c&&e.jsx("div",{className:"no-discussion",children:e.jsx("div",{className:"label",children:"Select a chat to start messaging"})}),c&&l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"top-title",onClick:y=>{o(e.jsx(Pa,{x:y.clientX,y:y.clientY,text:c.title}))},children:[e.jsx("div",{className:"ctn-title",children:e.jsx("div",{className:"text-title",children:Ge(c.title,50)})}),e.jsxs("div",{className:"option",children:[e.jsx("div",{className:"img",style:{background:`no-repeat center/cover url(${l.photos[0].startsWith("/")?H:""}${l.photos[0]})`}}),e.jsx("div",{className:"img",style:{background:`no-repeat center/cover url(${c.other.photos[0].startsWith("/")?H:""}${c.other.photos[0]})`}}),e.jsx("div",{className:"status",onClick:He(),children:(G=c.closed)!=null&&G.includes(l.id)&&((pe=c.closed)!=null&&pe.includes(c.other.id))||(Ce=c.closed)!=null&&Ce.includes(l.id)?"Closed":((W=c.closed)!=null&&W.includes(c.other.id),"Open")})]})]}),E&&e.jsx("div",{className:"title",children:e.jsxs("div",{className:"ctn",children:[e.jsx("h1",{className:"label",children:"New Session Title"}),e.jsx("div",{className:"text",children:Ls(T)})]})}),e.jsx("div",{className:"messages",style:{display:E?"none":""},ref:y=>{b.current=y,_||(b.current&&b.current.scrollTo({top:b.current.scrollHeight}),k(!0))},onScroll:y=>{const q=y.currentTarget;clearInterval(N.lastid);const M=setTimeout(()=>{const h={isOpen:!1,height:q.scrollHeight,bottom:q.scrollHeight-(q.scrollTop+q.getBoundingClientRect().height),top:q.scrollTop,onProcess:!1,lastid:M};h.bottom>150&&(h.isOpen=!0),U(h)},100);N.lastid=M},children:(L=t==null?void 0:t.list)==null?void 0:L.map((y,q)=>{var he;const M=B(t,q),h=I(t,q),ie=j(t,q);let ue="";return M==h?ie&&h==ie&&(ue="mid"):ie&&M==ie&&(ue="start"),e.jsx("div",{className:"message",children:e.jsxs("div",{className:"ctn "+M+" "+ue,onContextMenu:le=>{le.preventDefault(),o(e.jsx(Da,{forMe:l.id==y.user_id,x:le.clientX,y:le.clientY,onDeleteBoth:()=>{a(y.id)},onDeleteMe:()=>{i(y.id)},onEdit:()=>{o(e.jsx(Ta,{x:le.clientX,y:le.clientY,text:y.text,onEdit:je=>{o(void 0),r({message_id:y.id,text:je})}}),!0)},other:c.other}))},children:[e.jsx("div",{className:"text",children:y.text&&y.text.split(" ").map((le,je)=>le.split(`
`).map((be,we)=>be?e.jsx("span",{style:{marginRight:"4px"},children:be},je+"+"+we):e.jsx("div",{style:{width:"100%",height:"1em"}},je+"~"+we)))}),e.jsx("div",{className:"files",children:(he=y.files)==null?void 0:he.map(le=>e.jsxs("div",{className:"message-file",onClick:()=>{window.open(`${le.startsWith("/")?H:""}${le}`,void 0)},children:[e.jsx("div",{className:"save"}),e.jsx("div",{className:"lable",children:le.length>35?Ge(le,25)+le.substring(le.length-8,le.length):le})]},le))}),e.jsxs("div",{className:"info",children:[y.created_at!=y.updated_at&&e.jsx("div",{className:"edited"}),e.jsx("div",{className:"date",children:Ct(y.created_at)})]})]})},y.id)})}),e.jsxs("div",{className:"sender",children:[N.isOpen&&e.jsx("div",{className:"down-btn",onClick:()=>{b.current&&b.current.scrollTo({behavior:"smooth",top:N.height})}}),z&&e.jsx("div",{className:"emoji-list",onClick:y=>{y.preventDefault(),y.stopPropagation()},children:Ms.map(y=>e.jsx("span",{onClick:q=>{q.preventDefault(),q.stopPropagation(),O(T+y.char)},children:y.char},y.char))}),e.jsxs("div",{className:"ctn",children:[e.jsxs("div",{className:"left",children:[!E&&e.jsxs(e.Fragment,{children:[e.jsx("input",{multiple:!0,type:"file",style:{display:"none"},name:"message_file",id:ee+"message_file",onChange:y=>{if(!y.currentTarget.files)return;const q=[];for(let M=0;M<y.currentTarget.files.length;M++){const h=y.currentTarget.files[M];q.push(h)}S(q.length>0?p?[...p,...q]:q:null)}}),e.jsx("label",{htmlFor:ee+"message_file",className:"add-file",onClick:He()}),e.jsx("div",{className:"emoji-min",onClick:y=>{y.preventDefault(),y.stopPropagation(),He()(y),g(!z)}})]})," ",E&&e.jsxs("div",{className:"text-length",children:[T.length,E?"/"+ka:""]})]}),e.jsxs("div",{className:"sender_center",children:[e.jsx("div",{className:"files",style:{display:E?"none":""},children:p&&p.map(y=>e.jsxs("div",{className:"file",children:[e.jsx("div",{className:"remove",onClick:()=>{p&&S(p.filter(q=>q!==y))}}),e.jsx("div",{className:"text",children:y.name})]},y.name))}),e.jsx("textarea",{autoFocus:!0,ref:w,name:"session_sender",placeholder:"Type a message here..",id:"session_sender",style:{height:`${V*20}px`},cols:30,rows:10,onChange:y=>{$()},onKeyDown:()=>{g(!1)}})]}),e.jsx("div",{className:"right",children:e.jsx("div",{className:"send",onClick:y=>{He()(y),E?n(c.other.id,T):s({context:c,context_name:"sessions",files:p,text:T}),S(null),O("")},children:e.jsx("div",{className:"icon"})})})]})]})]})]})}function Da({x:c,y:t,onEdit:n,onDeleteBoth:s,onDeleteMe:a,other:i,forMe:r}){const l=x.useRef(null);return x.useEffect(()=>{l.current&&jt(l.current)}),e.jsxs("div",{ref:l,className:"message-popu",style:{top:`${t}px`,left:`${c}px`},children:[r&&e.jsxs("div",{className:"edit",onClick:o=>{o.preventDefault(),o.stopPropagation(),n()},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Edit message"})]}),e.jsxs("div",{className:"delete-me",onClick:a,children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Delete for me"})]}),r&&e.jsxs("div",{className:"delete-both",onClick:s,children:[e.jsx("div",{className:"icon"}),e.jsxs("div",{className:"label",children:["Delete also for ",i.name," "]})]})]})}function Pa({x:c,y:t,text:n}){const s=x.useRef(null);return x.useEffect(()=>{s.current&&jt(s.current)}),e.jsx("p",{ref:s,className:"title-popup",style:{top:`${t}px`,left:`${c}px`},children:Ls(n||"")})}function Ta({x:c,y:t,onEdit:n,text:s}){const a=x.useRef(null),[i,r]=x.useState(s);return x.useEffect(()=>{a.current&&jt(a.current)}),e.jsxs("div",{ref:a,className:"message-edit-popu",style:{top:`${t}px`,left:`${c}px`},onClick:l=>{l.stopPropagation(),l.preventDefault()},children:[e.jsx("div",{className:"title",children:"Edit message"}),e.jsxs("div",{className:"input",children:[e.jsx("textarea",{value:i,onChange:l=>{r(l.currentTarget.value)}}),e.jsx("div",{className:"save",onClick:()=>{n(i)},children:e.jsxs("div",{className:"save-ctn",children:[e.jsx("div",{className:"label",children:"Save"}),e.jsx("div",{className:"icon"})]})})]})]})}function $a(){const{check:c,qs:t,pathList:n,json:s}=ge(),{user:a}=A(),i={discussions:e.jsx(us,{}),groups:e.jsx(us,{}),sessions:e.jsx(ba,{}),surveys:e.jsx(us,{})},r={discussions:e.jsx(hs,{}),groups:e.jsx(hs,{}),sessions:e.jsx(Ea,{}),surveys:e.jsx(hs,{})},l=(n==null?void 0:n[2])||"discussions",o=(s==null?void 0:s.nav)||"max";return c("chat")&&a&&e.jsxs("div",{className:"page-chat",children:[e.jsx("div",{className:"back-close nav",style:{display:o=="min"?"none":""},onClick:u=>{u.currentTarget==u.target&&t({...s,nav:"min"}).apply()}}),e.jsxs("div",{className:"chat-nav "+o,children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"nav-size "+o,onClick:u=>{He(.4)(u),t({...s,nav:o=="min"?"max":"min"}).apply()}}),e.jsx("div",{className:"icon discussions-icon "+(l=="discussions"?"active":""),onClick:u=>{He(.4)(u),t({nav:o}).setAbsPath(["chat","discussions"])}}),e.jsx("div",{className:"icon sessions "+(l=="sessions"?"active":""),onClick:u=>{He(.4)(u),t({nav:o}).setAbsPath(["chat","sessions"])}}),e.jsx("div",{className:"icon profile",style:{background:`no-repeat center/cover url(${a.photos[0].startsWith("/")?H:""}${a.photos[0]})`},onClick:()=>{t({nav:o}).setAbsPath(["profile"])}})]}),o=="max"&&e.jsx("div",{className:"nav-ctn",children:i[l]})]}),e.jsx("div",{className:"chat-center",children:r[l]})]})}function Ia(){return e.jsx("div",{className:"page-interface"})}function Aa(){const{current:c,setAbsPath:t,qs:n}=ge(),{fetchCategories:s,categories:a,setSelectedCategory:i}=vt(),{store:r}=A();return x.useEffect(()=>{c("categories")&&r&&s()},[r]),c("categories")&&e.jsx("div",{className:"category-list",children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","label","description","catalog_id","index","status","created_at","total_products"],limit:a==null?void 0:a.limit,page:a==null?void 0:a.page,total:a==null?void 0:a.total,filter:{index:Et([0,100]),status:kt(["PAUSE","TRASH","NEW"],[]),total_products:Je([0,1e3],[0,1e3])}},items_height:80,id:"category_list",datas:(a==null?void 0:a.list)||[],itemsMapper:{id:{getView(l,o,u,m){return e.jsxs("div",{ref:m,children:["#",o.split("-")[0]]},u.id)}},label:X.StringElement({size_interval:[50,200]}),status:it,total_products:{getView(l,o,u,m){return X.StringElement().getView(l,o||0,u,m)}},catalog_id:{getView(l,o,u,m){return e.jsxs("div",{ref:m,children:["#",o.split("-")[0]]},u.id)}},created_at:X.DateStringElement({size:500})},onItemsSelected:(l,o)=>{o.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="")}),l.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="#00f2")}),i(l[0]),n({category_id:l[0].id}).setAbsPath(["categories","dash_categories"])},onQuery:l=>{s(l)},top_height:40,canAddNew:!0,canPaginate:!0,onNewRequired:()=>{t(["categories","new_category"])}})})})}const wt=Ze(c=>({catalogs:void 0,selectedCatalog:void 0,catalogProducts:void 0,catalogCategories:void 0,async setCatalogById(t){const n=wt.getState().catalogs,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedCatalog:s}));else if(A.getState().store){const i=await wt.getState().fetchCatalogs({query:{user_id:t}});c(()=>({selectedCatalog:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await wt.getState().fetchCatalogs({query:{user_id:t}});c(()=>({selectedCatalog:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async removeCatalog(t){const n=A.getState().getHeaders();if(!n)return;const a=await(await fetch(`${H}/delete_catalog/${t}`,{method:"DELETE",headers:n.headers})).json();return Ae.getState().fetchStoreVar(),a==null?void 0:a.isDeleted},async createCatalog(t){const n=A.getState().getHeaders();if(!n)return;t.index=t.index||0,t.store_id=n.store.id;const s=new FormData,a=[];if(["label","description","store_id","index"].forEach(i=>{if(t[i]!=null)s.append(i,t[i]);else return a.push(i+" is not defined")}),console.log(a,t),a.length==0){const r=await(await fetch(`${H}/create_catalog`,{method:"POST",body:s,headers:n.headers})).json();if(!r||!r.id)return a.push("Server Error, Try Later"),a;c(()=>({selectedCatalog:r})),Ae.getState().fetchStoreVar()}else return a},async fetchCatalogCategories(t){if(!(t!=null&&t.catalog_id))return;const n=A.getState().getHeaders();if(n)try{const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),s.catalog_id=t.catalog_id,s.all_status=!0,s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_categories/?${a.toString()}`,{headers:n.headers})).json();if(!r||!r.list)return;c(()=>({catalogCategories:r}))}catch(s){return console.warn(s.message)}},async fetchCatalogProducts(t){if(!(t!=null&&t.catalog_id))return;const n=A.getState().getHeaders();if(n)try{const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),s.catalog_id=t.catalog_id,s.all_status=!0,s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_products/?${a.toString()}`,{headers:n.headers})).json();if(!r||!r.list)return;c(()=>({catalogProducts:r}))}catch(s){return console.warn(s.message)}},async updateCatalog(t){if(!t.catalog_id)return;const n=A.getState().getHeaders();if(!n)return;let s=!1;const a=new FormData;a.append("catalog_id",t.catalog_id),["label","index","status","description"].forEach(r=>{t[r]&&(a.append(r,t[r]),s=!0)});let i=null;if(s&&(i=await fetch(`${H}/update_catalog`,{method:"PUT",body:a,headers:n.headers})),t.scene_dir){const r=new FormData;r.append("scene_dir",t.scene_dir),r.append("catalog_id",t.catalog_id),i=await fetch(`${H}/update_view_catalog`,{method:"PUT",body:r,headers:n.headers})}i&&(i=await i.json(),c(()=>({catalogProducts:i})))},setSelectedCatalog(t){c(()=>({selectedCatalog:t}))},async fetchCatalogs(t){const n=A.getState().getHeaders();if(n)try{const s={};t!=null&&t.page&&(s.page=Number(t.page)),t!=null&&t.limit&&(s.limit=Number(t.limit)),t!=null&&t.sortBy&&(s.order_by=t.sortBy),t!=null&&t.query.text&&(s.text=t.query.text),s.all_status=!0,s.store_id=n.store.id;const a=new URLSearchParams({});for(const l in s){const o=s[l];a.set(l,o)}const r=await(await fetch(`${H}/get_catalogs/?${a.toString()}`,{headers:n.headers})).json();return!r||!r.list?void 0:(c(()=>({catalogs:r})),r)}catch(s){console.warn(s.message);return}}}));function Ra({onChange:c,catalog_id:t}){const{fetchCatalogs:n,catalogs:s}=wt(),[a,i]=x.useState(),[r,l]=x.useState("");return x.useEffect(()=>{n()},[]),x.useEffect(()=>{i(s==null?void 0:s.list.find(o=>o.id==t))},[s]),e.jsxs("div",{className:"choise-catalog",children:[e.jsxs("div",{className:"choise-ctn",onClick:()=>{l(r?"":"open")},children:[e.jsx("div",{className:"back",children:e.jsx("div",{className:"icon"})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"label",children:"Catalog"}),e.jsx("div",{className:"name",children:(a==null?void 0:a.label)||"Select Catalog"})]}),e.jsx("div",{className:"choise-icon",style:{transform:r?"rotate(180deg)":""}})]}),e.jsx("div",{className:"list-catalog "+r,style:{height:r?`${45*((s==null?void 0:s.list.length)||0)}px`:"0px"},children:s==null?void 0:s.list.map(o=>e.jsxs("div",{className:"item "+((a==null?void 0:a.id)==o.id?"selected":""),onClick:()=>{i(o),c==null||c(o.id)},children:[e.jsx("div",{className:"label",children:o.label}),e.jsxs("div",{className:"id",children:["#",o.id.split("-")[0]]})]},o.id))})]})}function Oa(){const{current:c,setAbsPath:t,json:n}=ge(),{selectedCategory:s,setSelectedCategory:a,setCategoryById:i,fetchCategoryProducts:r,categoryProducts:l,updateCategory:o,createCategory:u,removeCategory:m}=vt(),[_]=x.useState({}),{setSelectedProduct:k}=et(),[V]=x.useState(!1),z=st().width<1e3?"wrap":"";x.useEffect(()=>{s&&r({category_id:s.id})},[s]),x.useEffect(()=>{n!=null&&n.category_id&&i(n==null?void 0:n.category_id)},[n]);const g=c("dash_categories"),b=c("new_category"),w=e.jsxs(e.Fragment,{children:[g&&e.jsxs(e.Fragment,{children:[e.jsx(ms,{status:(s==null?void 0:s.status)||"PAUSE",onChange:T=>{g?s&&o({category_id:s.id,status:T}):_.status=T}}),e.jsx("div",{className:"editor-scene-file",children:e.jsx(ts,{file_name:s==null?void 0:s.scene_dir,ext:["zip"],label:"Upload Scene File",onChange:T=>{g?s&&o({category_id:s.id,scene_dir:T}):_.scene_dir=T}})})]}),e.jsx("div",{className:"editor-category",children:e.jsx(Ra,{catalog_id:g&&(s==null?void 0:s.catalog_id),onChange:T=>{g?s&&o({category_id:s.id,catalog_id:T}):_.catalog_id=T}})})]});return(g||b)&&(!s&&g?e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}):e.jsxs("div",{className:"category-dash",ref:Fe,children:[e.jsx(yt,{terme:"white",deteleKey:(s==null?void 0:s.id)||"noga",mode:b?"create":"delete",title:"Category Information",onCreate:()=>{u(_).then(T=>{if(!T)return t(["categories","dash_categories"])})},onDelete:()=>{m(s==null?void 0:s.id).then(T=>{T&&a(void 0)})}}),e.jsxs("section",{className:"editor "+z,children:[e.jsxs("div",{className:"left-side",children:[g&&e.jsx(fe,{isCheckRequired:V,label:"Category Id",value:(s==null?void 0:s.id)||""}),e.jsx("div",{className:"category-title",children:e.jsx(fe,{editable:!0,prompt:"Category Label",isCheckRequired:V,min:3,check:"auto",max:50,label:"Label",placeholder:"Catalog Label",value:g&&((s==null?void 0:s.label)||""),onChange:T=>{g?o({category_id:s==null?void 0:s.id,label:T}):_.label=T}})}),e.jsx("div",{className:"category-description",children:e.jsx(fs,{editable:!0,prompt:"Category Description",isCheckRequired:V,min:3,check:"auto",max:250,label:"Description",placeholder:"Catalog Description",value:g&&((s==null?void 0:s.description)||""),onChange:T=>{g?o({category_id:s==null?void 0:s.id,description:T}):_.description=T}})}),g&&w]}),e.jsxs("div",{className:"right-side",children:[g&&e.jsxs(e.Fragment,{children:[e.jsx(Ft,{}),e.jsx(gs,{onClick:()=>{},direction:"horizontal"})]}),b&&w]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"btm-list",children:[e.jsx("h1",{className:"",children:"Products That Use This Category"}),e.jsx("h2",{className:"see-all",onClick:()=>{t(["products"])},children:"SEE ALL"})]}),e.jsx(X,{filter:{sortBy:"id",limit:(l==null?void 0:l.limit)||25,page:l==null?void 0:l.page,total:l==null?void 0:l.total},disableFilterBar:!0,items_height:80,id:"product-use-cattegory_list",datas:(l==null?void 0:l.list)||[],itemsMapper:{images:{getView(T,O,p,S){return X.ImageElement().getView(T,`${H}${O[0]}`,p,S)}},id:{getView(T,O,p,S){return e.jsxs("div",{ref:S,children:["#",O.split("-")[0]]},p.id)}},title:X.StringElement({size_interval:[50,200]}),status:X.StringElement({size:150}),stock:X.StringElement(),category_id:{getView(T,O,p,S){return e.jsxs("div",{ref:S,children:["#",O.split("-")[0]]},p.id)}},price:X.StringElement({size:200}),created_at:X.DateStringElement({size:200})},onItemsSelected:T=>{k(T[0]),t(["products","dash_product"])}})]})]}))}function Fa(){const{check:c,setAbsPath:t,current:n}=ge();return c("categories")&&e.jsxs("div",{className:"page-categories",children:[(n("categories")||n("new_category")||n("dash_categories"))&&e.jsx(vs,{active:"categories",setActive:s=>t(s.path)}),e.jsx(Aa,{}),e.jsx(Oa,{})]})}function Ma(){const{current:c,setAbsPath:t,qs:n}=ge(),{catalogs:s,fetchCatalogs:a,setSelectedCatalog:i}=wt(),{store:r}=A();return x.useEffect(()=>{c("catalogs")&&r&&a()},[r]),c("catalogs")&&e.jsx("div",{className:"catalog-list",children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","label","description","index","status","created_at"],limit:s==null?void 0:s.limit,page:s==null?void 0:s.page,total:s==null?void 0:s.total,filter:{}},items_height:80,id:"category_list",datas:(s==null?void 0:s.list)||[],itemsMapper:{id:{getView(l,o,u,m){return e.jsxs("div",{ref:m,children:["#",o.split("-")[0]]},u.id)}},label:X.StringElement({size_interval:[50,200]}),total_product:{getView(l,o,u,m){return X.StringElement().getView(l,o||0,u,m)}},description:X.StringElement({size_interval:[50,200]}),status:it,created_at:X.DateStringElement({size:200})},onItemsSelected:(l,o)=>{o.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="")}),l.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="#00f2")}),i(l[0]),n({catalog_id:l[0].id}).setAbsPath(["catalogs","dash_catalogs"])},onQuery:l=>{a(l)},top_height:40,canAddNew:!0,canPaginate:!0,onNewRequired:()=>{t(["catalogs","new_catalog"])}})})})}function La(){const{json:c,current:t,setAbsPath:n}=ge(),{setCatalogById:s,selectedCatalog:a,catalogCategories:i,fetchCatalogCategories:r,updateCatalog:l,catalogProducts:o,setSelectedCatalog:u,removeCatalog:m,fetchCatalogProducts:_,createCatalog:k}=wt(),{setSelectedProduct:V}=et(),{setSelectedCategory:K}=vt(),[z]=x.useState({}),{store:g}=A(),[b,w]=x.useState("products"),[T]=x.useState(!1),p=st().width<1e3?"wrap":"";x.useEffect(()=>{a&&(_({catalog_id:a.id}),r({catalog_id:a.id}))},[a]);const S=t("dash_catalogs"),ee=t("new_catalog");x.useEffect(()=>{c!=null&&c.catalog_id&&s(c==null?void 0:c.catalog_id)},[c]);const N=e.jsx(e.Fragment,{children:S&&e.jsxs(e.Fragment,{children:[e.jsx(ms,{status:(a==null?void 0:a.status)||"PAUSE",onChange:U=>{S?a&&l({catalog_id:a.id,status:U}):z.status=U}})," ",e.jsx(ts,{file_name:S?a==null?void 0:a.scene_dir:void 0,ext:["zip"],label:"Upload Scene File",onChange:U=>{S?a&&l({catalog_id:a.id,scene_dir:U}):z.scene_dir=U}})]})});return console.log({selectedCatalog:a}),(S||ee)&&(!a&&S?e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}):e.jsxs("div",{className:"catalog-dash",ref:Fe,children:[e.jsx(yt,{terme:"dark",deteleKey:(a==null?void 0:a.id)||"noga",mode:ee?"create":"delete",title:"Catalog Information",onCreate:()=>{k(z).then(U=>{if(!U)return n(["catalogs","dash_catalogs"])})},onDelete:()=>{a&&m(a.id).then(U=>{U&&u(void 0)})}}),e.jsxs("section",{className:"editor "+p,children:[e.jsxs("div",{className:"left-side",children:[S&&e.jsx(fe,{isCheckRequired:T,label:"Catalog Id",value:(a==null?void 0:a.id)||""}),e.jsxs("div",{className:"editor-name",children:[e.jsx("div",{className:"catalog-title",children:e.jsx(fe,{editable:!0,prompt:"Catalog Label",isCheckRequired:T,min:3,check:"auto",max:50,label:"Label",placeholder:"Catalog Label",value:S&&((a==null?void 0:a.label)||""),onChange:U=>{S?a&&l({catalog_id:a.id,label:U}):z.label=U}})}),e.jsx("div",{className:"Catalog-description",children:e.jsx(fs,{editable:!0,prompt:"Catalog Description",isCheckRequired:T,min:3,check:"auto",max:250,label:"Description",placeholder:"Catalog Description",value:S&&((a==null?void 0:a.description)||""),onChange:U=>{S?a&&l({catalog_id:a.id,description:U}):z.description=U}})})]}),S&&N]}),e.jsxs("div",{className:"right-side",children:[S&&e.jsxs(e.Fragment,{children:[e.jsx(Ft,{}),e.jsx(gs,{onClick:()=>{},direction:"horizontal"})]}),ee&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{isCheckRequired:T,label:"Store Name",value:(g==null?void 0:g.name)||""}),e.jsx(fe,{isCheckRequired:T,label:"Store Id",value:(g==null?void 0:g.id)||""})]})]})]}),S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"btm-list",children:[e.jsx("h1",{children:"Products That Use This Catalog"}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"btn "+(b=="products"?"active":""),onClick:()=>{w("products")},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Products"})]}),e.jsxs("div",{className:"btn "+(b=="categories"?"active":""),onClick:()=>{w("categories")},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Categories"})]})]}),e.jsx("h2",{className:"see-all",onClick:()=>{b=="products"?n(["products"]):n(["categories"])},children:"SEE ALL"})]}),b=="products"&&e.jsx(X,{filter:{sortBy:"id",limit:(o==null?void 0:o.limit)||25,page:o==null?void 0:o.page,total:o==null?void 0:o.total},disableFilterBar:!0,items_height:80,id:"product-use-catalog_list",datas:(o==null?void 0:o.list)||[],itemsMapper:{images:{getView(U,P,$,F){return X.ImageElement().getView(U,`${H}${P[0]}`,$,F)}},id:{getView(U,P,$,F){return e.jsxs("div",{ref:F,children:["#",P.split("-")[0]]},$.id)}},title:X.StringElement({size_interval:[50,200]}),stock:X.StringElement(),category_id:{getView(U,P,$,F){return e.jsxs("div",{ref:F,children:["#",P.split("-")[0]]},$.id)}},price:X.StringElement({size:200}),status:it,created_at:X.DateStringElement({size:200})},onItemsSelected:U=>{V(U[0]),n(["products","dash_product"])}}),b=="categories"&&e.jsx(X,{disableFilterBar:!0,items_height:80,id:"product-use-catalog_list",datas:(i==null?void 0:i.list)||[],itemsMapper:{id:{getView(U,P,$,F){return e.jsxs("div",{ref:F,children:["#",P.split("-")[0]]},$.id)}},label:X.StringElement({size_interval:[50,200]}),total_products:{getView(U,P,$,F){return X.StringElement().getView(U,P||0,$,F)}},catalog_id:{getView(U,P,$,F){return e.jsxs("div",{ref:F,children:["#",P.split("-")[0]]},$.id)}},status:it,created_at:X.DateStringElement({size:500})},onItemsSelected:U=>{console.log(U[0],"))))))))))))))"),K(U[0]),n(["categories","dash_categories"])}})]})]}))}function za(){const{check:c,setAbsPath:t,current:n}=ge();return c("catalogs")&&e.jsxs("div",{className:"page-catalogs",children:[(n("catalogs")||n("new_catalog")||n("dash_catalogs"))&&e.jsx(vs,{active:"catalogs",setActive:s=>t(s.path)}),e.jsx(La,{}),e.jsx(Ma,{})]})}function Ba(){const{current:c,qs:t}=ge(),{moderators:n,setSelectedModerator:s,fetchModerators:a}=xt(),{store:i}=A();return x.useEffect(()=>{c("moderators")&&i&&a()},[i]),c("moderators")&&e.jsx("div",{className:"moderator-list",ref:Fe,children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","title","stock","price","date","status"],limit:n==null?void 0:n.limit,page:n==null?void 0:n.page,total:n==null?void 0:n.total,filter:{price:Je([0,1e5],[0,1e4]),stock:Je([0,1e4],[0,1e4]),status:kt(["PAUSE","TRASH","NEW"],[]),index:Et([0,100]),is_dynamic_price:tt(),hasScene:tt()}},items_height:80,id:"moderator_list",datas:(n==null?void 0:n.list)||[],itemsMapper:{photos:{getView(r,l,o,u){return X.ImageElement().getView(r,`${l[0].startsWith("/")?H:""}${l[0]}`,o,u)}},id:{getView(r,l,o,u){return e.jsxs("div",{ref:u,children:["#",l.split("-")[0]]},o.id)}},name:X.StringElement({size_interval:[50,200]}),status:{getView(r,l,o,u){return it.getView(r,"VISIBLE",o,u)}},created_at:X.DateStringElement({size:200})},onItemsSelected:(r,l)=>{l.forEach(o=>{o.$itemRef&&(o.$itemRef.style.background="")}),r.forEach(o=>{o.$itemRef&&(o.$itemRef.style.background="#00f2")}),s(r[0]),t({moderator_id:r[0].id}).setAbsPath(["moderators","moderator_profile"])},onQuery:r=>{a(r)},top_height:40,canPaginate:!0})})})}function qa(){const{current:c,json:t}=ge(),{user:n}=A(),{selectedModerator:s,setModeratorById:a}=xt(),{store:i}=A(),[r]=x.useState(!1),o=st().width<1e3?"wrap":"";return x.useEffect(()=>{c("moderator_profile")&&(t!=null&&t.moderator_id)&&i&&a(t.moderator_id)},[t,i]),c("moderator_profile")&&(s?e.jsxs("div",{className:"moderator-profile",ref:Fe,children:[e.jsx("h1",{children:"Moderator Information"}),e.jsxs("section",{className:"editor "+o,children:[e.jsx("div",{className:"left-right",children:e.jsx(Ot,{name:"moderator_profile",images:s.photos||[],cannotEdit:!0})}),e.jsxs("div",{className:"left-side",children:[e.jsx(fe,{isCheckRequired:r,label:"Moderator Id",value:(s==null?void 0:s.id)||""}),e.jsx(fe,{prompt:"Moderator Name",isCheckRequired:r,min:3,check:"auto",max:50,label:"Name",placeholder:"Catalog Label",value:s==null?void 0:s.name}),e.jsx(fe,{prompt:"Moderator Email",isCheckRequired:r,min:3,check:"auto",max:50,label:"Email",placeholder:"Catalog Label",value:s==null?void 0:s.email}),e.jsx(fe,{label:"created At",value:s==null?void 0:s.created_at}),e.jsx(fe,{label:"Join Store At",value:s==null?void 0:s.join_at}),n&&s.id!=n.id&&e.jsx(ps,{user:s,channel:"discussions_admin"})]})]})]}):e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}))}function Va(){const{check:c,current:t,setAbsPath:n}=ge();return c("moderators")&&e.jsxs("div",{className:"moderator-page",children:[t("moderators","moderator_profile")&&e.jsx(Yt,{active:"moderators",setActive:s=>n(s.path)}),e.jsx(Ba,{}),e.jsx(qa,{})]})}const Ye=Ze(c=>({json_roles:void 0,roles:void 0,selectedRole:void 0,async setSelectedRole(t){c(()=>({selectedRole:t}))},async setRoleById(t){const n=Ye.getState().roles,s=n==null?void 0:n.list.find(a=>a.id==t);if(s)c(()=>({selectedRole:s}));else if(A.getState().store){const i=await Ye.getState().fetchRoles({role_id:t});c(()=>({selectedRole:i==null?void 0:i.list.find(r=>r.id==t)}))}else{const i=Date.now(),r=setInterval(async()=>{if(Date.now()-i>10*1e3&&clearInterval(r),A.getState().store){clearInterval(r);const o=await Ye.getState().fetchRoles({role_id:t});c(()=>({selectedRole:o==null?void 0:o.list.find(u=>u.id==t)}))}},100)}},async newRole(t){var o;if(!t.name)return console.log("Name required");if(!t.options||t.options.length==0)return console.log("Option Is required");const n=A.getState().store;if(!n)return;let s=A.getState().user;if(!s)return;const a=new FormData;a.append("name",t.name),a.append("store_id",n.id),(o=t.options)==null||o.forEach(u=>{a.append(u,"1")});const i=new Headers;i.append("Authorization",`Bearer ${s.token}`);const l=await(await fetch(`${H}/create_collaborator_role`,{method:"POST",body:a,headers:i})).json();!l||!l.id||(console.log("new role",l),c(()=>({selectedRole:l})),Ae.getState().fetchUsersVar(),ge.getState().setAbsPath(["roles","edit_role"]))},async updateRole(t){var u,m;console.log("data",t);const n=Ye.getState().selectedRole;if(!n)return;if(!t.name&&!t.options)return console.log("data",t);if(!A.getState().store)return;let a=A.getState().user;if(!a)return;const i=new FormData;i.append("role_id",n.id),t.name&&i.append("name",t.name),((u=t.options)==null?void 0:u.length)>0&&i.append("newOptions","ok"),(m=t.options)==null||m.forEach(_=>{i.append(_,"1")});const r=new Headers;r.append("Authorization",`Bearer ${a.token}`);const o=await(await fetch(`${H}/update_role`,{method:"PUT",body:i,headers:r})).json();!o||!o.id||c(()=>({selectedRole:o}))},async deleteRole(t){console.log(t);const n=A.getState().store;if(!n)return;let s=A.getState().user;if(!s)return;const a=new Headers;a.append("Authorization",`Bearer ${s.token}`);const i=new FormData;i.append("store_id",n.id),i.append("role_id",t);const r={method:"DELETE",headers:a,body:i};(await(await fetch(`${H}/delete_role`,r)).json()).deleted&&c(()=>({selectedRole:void 0})),Ae.getState().fetchUsersVar()},async fetchRolesJson(){const n=await(await fetch(`${H}/get_roles_json`)).json();n&&c(()=>({json_roles:n}))},async fetchRoles(t={}){const n=A.getState().store;if(!n)return;let s=A.getState().user;if(!s)return;const a=new Headers;a.append("Authorization",`Bearer ${s.token}`);const i={method:"GET",headers:a};t.store_id=n.id;const r=new URLSearchParams({});for(const u in t){const m=t[u];r.set(u,m)}const o=await(await fetch(`${H}/get_store_roles/?${r.toString()}`,i)).json();if(console.log("roles",o),!(!o||!o.list))return c(()=>({roles:o})),o}}));function Ua(){const{current:c,setAbsPath:t,qs:n}=ge(),{roles:s,setSelectedRole:a,fetchRoles:i}=Ye(),{store:r}=A();return x.useEffect(()=>{c("roles")&&r&&i()},[r]),c("roles")&&e.jsx("div",{className:"collaborator-list",ref:Fe,children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","title","stock","price","date","status"],limit:s==null?void 0:s.limit,page:s==null?void 0:s.page,total:s==null?void 0:s.total,filter:{price:Je([0,1e5],[0,1e4]),stock:Je([0,1e4],[0,1e4]),status:kt(["PAUSE","TRASH","NEW"],[]),index:Et([0,100]),is_dynamic_price:tt(),hasScene:tt()}},items_height:80,id:"collaborator_list",datas:(s==null?void 0:s.list)||[],itemsMapper:{id:{getView(l,o,u,m){return e.jsxs("div",{ref:m,children:["#",o.split("-")[0]]},u.id)}},name:X.StringElement({size_interval:[50,200]}),created_at:X.DateStringElement({size:200})},onItemsSelected:(l,o)=>{o.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="")}),l.forEach(u=>{u.$itemRef&&(u.$itemRef.style.background="#00f2")}),a(l[0]),n({role_id:l[0].id}).setAbsPath(["roles","edit_role"])},onQuery:l=>{i(l)},canAddNew:!0,onNewRequired:()=>{t(["roles","create_role"])},top_height:40,canPaginate:!0})})})}function Ha(){const{selectedRole:c,setRoleById:t,updateRole:n,newRole:s,deleteRole:a,json_roles:i}=Ye(),{current:r,json:l}=ge(),[o]=x.useState({}),u=r("edit_role"),m=r("create_role");return x.useEffect(()=>{l!=null&&l.role_id&&t(l==null?void 0:l.role_id)},[l]),(u||m)&&(!c&&u?e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}):e.jsxs("div",{className:"role-dash",ref:Fe,children:[e.jsx(yt,{title:"Role Information",mode:u?"delete":"create",deteleKey:c==null?void 0:c.id,onDelete:()=>{c&&a(c.id)},onCreate:()=>{s(o)}}),e.jsxs("section",{className:"editor",children:[e.jsxs("div",{className:"left-side",children:[e.jsx(fe,{min:3,max:25,placeholder:"Role Name",prompt:"Role Name",editable:!0,label:"Name",value:u?c==null?void 0:c.name:"",onChange:_=>{u?n({name:_}):o.name=_}}),u&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{label:"Id",value:c==null?void 0:c.id}),e.jsx(fe,{label:"Created At",value:c==null?void 0:c.created_at}),e.jsx(fe,{label:"Update At",value:c==null?void 0:c.updated_at}),e.jsx(Ft,{})]})]}),e.jsx("div",{className:"right-side",children:e.jsx(Gs,{role:c,json_roles:i,isNew:m,onChange:_=>{u?n({options:_}):o.options=_}})})]})]}))}function Wa(){const{check:c,current:t,setAbsPath:n}=ge();return c("roles")&&e.jsxs("div",{className:"role-page",children:[t("roles","edit_role")&&e.jsx(Yt,{active:"roles",setActive:s=>n(s.path)}),e.jsx(Ua,{}),e.jsx(Ha,{})]})}function Ga(){const{current:c,setAbsPath:t,qs:n}=ge(),{collaborators:s,setSelectedCollaborator:a,fetchCollaborators:i}=nt(),{store:r}=A(),{roles:l}=Ye();return x.useEffect(()=>{c("collaborators")&&r&&i()},[r]),c("collaborators")&&e.jsx("div",{className:"collaborator-list",ref:Fe,children:e.jsx("div",{className:"list-ctn",children:e.jsx(X,{filter:{sortBy:"id",sortableColumns:["id","title","stock","price","date","status"],limit:s==null?void 0:s.limit,page:s==null?void 0:s.page,total:s==null?void 0:s.total,filter:{price:Je([0,1e5],[0,1e4]),stock:Je([0,1e4],[0,1e4]),status:kt(["PAUSE","TRASH","NEW"],[]),index:Et([0,100]),is_dynamic_price:tt(),hasScene:tt()}},items_height:80,id:"collaborator_list",datas:(s==null?void 0:s.list)||[],itemsMapper:{photos:{getView(o,u,m,_){return X.ImageElement().getView(o,`${u[0].startsWith("/")?H:""}${u[0]}`,m,_)}},id:{getView(o,u,m,_){return e.jsxs("div",{ref:_,children:["#",u.split("-")[0]]},m.id)}},name:X.StringElement({size_interval:[50,200]}),email:X.StringElement({size:200}),status:it,role_id:{getView(o,u,m,_){var k;return e.jsx("div",{ref:_,children:(k=l==null?void 0:l.list.find(V=>V.id==u))==null?void 0:k.name},m.id)}},join_at:X.DateStringElement({size:150}),created_at:X.DateStringElement({size:150})},onItemsSelected:(o,u)=>{u.forEach(m=>{m.$itemRef&&(m.$itemRef.style.background="")}),o.forEach(m=>{m.$itemRef&&(m.$itemRef.style.background="#00f2")}),a(o[0]),n({collaborator_id:o[0].id}).setAbsPath(["collaborators","collaborator_profile"])},onQuery:o=>{i(o)},canAddNew:!0,onNewRequired:()=>{t(["collaborators","new_collaborator"])},top_height:40,canPaginate:!0})})})}const Ka=["PAUSE","VISIBLE","NEW"];function Ja({onChange:c,status:t,canEdit:n}){const[s,a]=x.useState(t);return e.jsx("div",{className:"choise-status",children:e.jsx("div",{className:"ctn",children:Ka.map(i=>e.jsx("div",{className:"use-status "+i.toLocaleLowerCase()+" "+(s==i?"active":""),onClick:()=>{n&&a(i),n&&(c==null||c(i))},children:i},i))})})}function Za(){const{current:c,json:t}=ge(),{selectedCollaborator:n,setCollaboratorById:s,removeCollaborator:a,updateCollaborator:i,change_collaborator_role:r}=nt(),[l]=x.useState(!1),{roles:o,fetchRoles:u}=Ye(),_=st().width<1e3?"wrap":"",{store:k,user:V}=A();return x.useEffect(()=>{t!=null&&t.collaborator_id&&s(t==null?void 0:t.collaborator_id)},[t]),x.useEffect(()=>{u({})},[V]),console.log({roles:o}),c("collaborator_profile")&&(n?e.jsxs("div",{className:"collaborator-profile",ref:Fe,children:[e.jsx(yt,{title:"Collaborator Information",mode:"delete",deteleKey:n.id,onDelete:()=>{console.log(n.id),a(n.id)}}),e.jsxs("section",{className:"editor "+_,children:[e.jsxs("div",{className:"left-right",children:[e.jsx(Ot,{name:"collaborator_profile",images:n.photos||[],cannotEdit:!0}),e.jsx(fe,{label:"Name",value:n==null?void 0:n.name}),e.jsx(fe,{label:"Email",value:n==null?void 0:n.email}),e.jsx(fe,{label:"created At",value:n==null?void 0:n.created_at}),e.jsx(fe,{label:"Join Store At",value:n==null?void 0:n.join_at})]}),e.jsxs("div",{className:"left-side",children:[e.jsx(fe,{label:"Store Name",value:(k==null?void 0:k.name)||"pppp"}),e.jsx(fe,{label:"Store Id",value:k==null?void 0:k.id}),e.jsx(fe,{isCheckRequired:l,label:(n==null?void 0:n.s_type)+" Id",value:(n==null?void 0:n.id)||""}),(V==null?void 0:V.id)!=n.id&&e.jsxs("div",{className:"chat-btn-ctn",children:[e.jsx(ps,{user:n,channel:"discussions"}),window.location.pathname.split("/")[3]=="admin"&&e.jsx("div",{className:"btn-chat-admin",onClick:()=>{k&&window.open(`${Js}/admin#chat/discussions={"store_id":"${k.id}","collaborator_id":"${n.id}"}`)},children:"Open as Admin"})]}),e.jsx(Ja,{status:(n==null?void 0:n.status)||"NEW",onChange:K=>{i({product_id:n.id,status:K})}}),e.jsx(Fs,{roles:(o==null?void 0:o.list)||[],canChange:()=>!0,role_id:n.role_id,onChange:K=>{r({new_role_id:K,collaborator_id:n.id})}}),e.jsx(Ft,{})]})]})]}):e.jsx("div",{className:"not-found",children:e.jsx("div",{className:"img"})}))}function Qa(){const{current:c}=ge(),{addCollaborator:t}=nt(),{store:n}=A(),[s]=x.useState(!1),a=st(),{roles:i,fetchRoles:r}=Ye();x.useEffect(()=>{r({})},[n]);const l=a.width<1e3?"wrap":"",[o]=x.useState({});return x.useEffect(()=>{},[]),c("new_collaborator")&&e.jsxs("div",{className:"collaborator-profile",ref:Fe,children:[e.jsx(yt,{terme:"white",mode:"create",title:"Collaborator Information",onCreate:()=>{t(o).then(u=>{console.log(u)})}}),e.jsxs("section",{className:"editor "+l,children:[e.jsxs("div",{className:"left-right",children:[e.jsx(fe,{label:"Store Name",value:n==null?void 0:n.name}),e.jsx(fe,{label:"Store Id",value:n==null?void 0:n.id}),e.jsx(fe,{editable:!0,prompt:"Collaborator Email",isCheckRequired:s,min:3,check:"auto",max:50,label:"Email",placeholder:"Catalog Label",value:"",onChange:u=>{o.email=u}})]}),e.jsx("div",{className:"left-side",children:e.jsx(Fs,{roles:(i==null?void 0:i.list)||[],canChange:()=>!0,onChange:u=>{o.role_id=u}})})]})]})}function Xa(){const{check:c,current:t,setAbsPath:n}=ge();return c("collaborators")&&e.jsxs("div",{className:"collaborator-page",children:[t("collaborators","collaborator_profile","new_collaborator")&&e.jsx(Yt,{active:"collaborators",setActive:s=>n(s.path)}),e.jsx(Ga,{}),e.jsx(Za,{}),e.jsx(Qa,{})]})}const Rs={store:"Store",products:"Products",categories:"Categories",features:"Features",catalogs:"Catalogs",dash_product:"Edit Product",dash_categories:"Edit Category",dash_features:"Edit Feature",dash_catalogs:"Edit Catalog",preview:"Preview",statistic:"Statistic",action:"Action",new_product:"New Product",new_category:"New Category",product_preview:"Product Preview",user:"Users",clients:"clients",collaborators:"Collaborator",client_profile:"Profile",collaborator_profile:"Profile",roles:"Roles",create_role:"New Role",edit_role:"Editor",new_collaborator:"New Collaborator",chat:"Chat",interface:"Interface",sessions:"Sessions",discussions:"Discussions",moderators:"Moderators",moderator_profile:"Moderator Profile"};function Ya(){const{currentChild:c,overlay:t,blur:n,openChild:s,fetchUsersVar:a,fetchStoreVar:i,T:r,setT:l,back_color:o}=Ae(),{authenticateUser:u,user:m,store:_}=A(),{pathList:k,setAbsPath:V}=ge(),{fetchRolesJson:K}=Ye(),z=[];k.forEach(b=>{Rs[b]&&z.push(Rs[b])}),x.useEffect(()=>{s(void 0)},[k]);const[g]=x.useState({});return g.overlay=t,x.useEffect(()=>{u(),window.addEventListener("blur",()=>{})},[]),x.useEffect(()=>{_&&(i(),K(),a())},[_]),e.jsxs("div",{className:"dash "+(r?"sombre-mode-variable":""),children:[e.jsx(Ds,{blur:n}),e.jsx("div",{className:"dash-ctn "+(m?n?"blur":"":"blur"),children:e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"center-top",children:[e.jsxs("div",{className:"nav-min",onClick:()=>{s(e.jsx(Ds,{className:"max",blur:n}),!0,"#345b")},children:[" ",e.jsx("span",{})]}),e.jsx("div",{className:"page-path",children:z.map((b,w)=>e.jsxs("div",{className:"path",children:[e.jsxs("div",{className:"label",onClick:()=>{const T=k.slice(1,w+2);V(T)},children:[b,e.jsx("span",{})]}),z[w+1]?e.jsx("div",{className:"icon"}):void 0]},w))}),e.jsxs("div",{className:"dash-top-right",children:[e.jsxs("div",{className:"dark-mode "+r,onClick:()=>{l(r?"":"active")},children:[e.jsx("span",{className:"dark-mode-btn"})," ",e.jsx("span",{className:"dark-white-btn",children:" "})]}),e.jsxs("div",{className:"notf",children:[" ",e.jsx("span",{})]})]})]}),e.jsxs("div",{className:"center-ctn",ref:b=>{if(!b||b.dataset.init)return;b.dataset.init="true";const w=()=>{const T=document.querySelector(".dash .center .center-top");b.style.height=`calc(100% - ${T.getBoundingClientRect().height}px)`};window.addEventListener("resize",w),w()},children:[e.jsx(fa,{}),e.jsx(Fa,{}),e.jsx(za,{}),e.jsx(xa,{}),e.jsx(Va,{}),e.jsx(Xa,{}),e.jsx(Wa,{}),e.jsx($a,{}),e.jsx(Ia,{})]})]})}),!m&&e.jsx(Xs,{}),c&&e.jsx("div",{className:"child-viewer",onContextMenu:b=>{b.preventDefault(),!g.overlay&&s(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:o},onClick:()=>{!g.overlay&&s(void 0)},onContextMenu:b=>{b.preventDefault(),!g.overlay&&s(void 0)},children:c})})]})}const en=c=>c,ln=en(e.jsx(Zs.StrictMode,{children:e.jsx(Ya,{})}));export{ln as DashView};

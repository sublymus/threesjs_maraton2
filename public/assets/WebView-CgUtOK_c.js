var Q=Object.defineProperty;var Z=(i,s,a)=>s in i?Q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a;var w=(i,s,a)=>(Z(i,typeof s!="symbol"?s+"":s,a),a);import{j as e,g as E,c as ee,u as X,b as se,a as te}from"./BindToParentScroll-CWgkOYtO.js";import{c as ae,S as ie,H as $,r as x,L as M,R as ne}from"./index-e2szSlUB.js";import{W as re,P as ce,O as oe,S as le,G as de,T as he,R as me,E as ue}from"./RGBELoader-CBpcoxa-.js";import{g as pe,E as xe}from"./EditorTopBar-BjRJ3DQu.js";const ve={"/":{new_store:{},edit_store:{},home:{},about:{},stores:{},contact:{},store_list:{}}},y=ae(i=>({owner:void 0,stores:void 0,selectedStore:void 0,currentChild:void 0,back_color:"",blur:!1,async exist(s){return(await(await fetch(`${$}/check_store/?store_name=${s}`)).json()).exist==!0},async setStoreById(s){var n,o;const a=(n=y.getState().stores)==null?void 0:n.list.find(l=>l.id==s);if(a)return i(()=>({selectedStore:a}));{const l=(o=await y.getState().fetchStores({text:"#"+s}))==null?void 0:o.list[0];if(l)return i(()=>({selectedStore:l}))}},async fetchStores(s){const a=y.getState().owner;if(!a)return;s.owner_id=a.id,console.log({filter:s});const n=new URLSearchParams({});for(const t in s){const d=s[t];n.set(t,d)}const o=new Headers;o.append("Authorization",`Bearer ${a.token}`);const r=await(await fetch(`${$}/get_stores/?${n}`,{headers:o})).json();if(r!=null&&r.list)return i(()=>({stores:r})),r},openChild(s,a,n){i(()=>({currentChild:s,blur:a,back_color:s&&n||""}))},async deleteStore(s){const a=y.getState().owner;if(!a)return!1;const n=new Headers;n.append("Authorization",`Bearer ${a.token}`);const o={method:"DELETE",headers:n},l=await fetch(`${$}/delete_store/${s}`,o);try{const r=await l.json();return y.getState().owner_stores({}),r==null?void 0:r.deleted}catch{return!1}},setSelectedStore(s){i(()=>({selectedStore:s}))},async disconnection(){const s=y.getState().owner;if(s){const a=new Headers;a.append("Authorization",`Bearer ${s.token}`);const n={method:"GET",headers:a};await fetch(`${$}/disconnection`,n)}localStorage.removeItem("user"),i(()=>({owner:void 0,stores:void 0,selectedStore:void 0}))},async tryToken(){const s=localStorage.getItem("user");if(!s)return;const a=JSON.parse(s),n=new Headers;n.append("Authorization",`Bearer ${a.token}`);const o={method:"GET",headers:n};let r=await(await fetch(`${$}/me`,o)).json();if(!(r!=null&&r.id))return localStorage.removeItem("user");y.getState().owner_stores({}),r={token:a.token,...r},i(()=>({owner:r})),localStorage.setItem("user",JSON.stringify(r))},async owner_stores(s){const a=y.getState().owner;if(!a)return;s.owner_id=a.id;const n=new URLSearchParams({});for(const t in s){const d=s[t];n.set(t,d)}const o=new Headers;o.append("Authorization",`Bearer ${a.token}`);const r=await(await fetch(`${$}/get_stores/?${n}`,{headers:o})).json();if(r!=null&&r.list)return console.log(r.list),i(()=>({stores:r})),r},async editStore(s){const a=y.getState().owner;if(!a)return;const n=new Headers;n.append("Authorization",`Bearer ${a.token}`);const o=new FormData;Object.keys(s).forEach((t,d)=>{console.log("data",d,t,s[t]),t=="banners"?s[t].file?(console.log("new File",s[t].file),o.append(t,JSON.stringify(["banners_0"])),o.append("banners_0",s[t].file)):s[t].url&&(o.append(t,JSON.stringify([s[t].url])),console.log("keep same",JSON.stringify(s[t]))):t=="logo"?s[t].file?(console.log("new File",s[t].file),o.append(t,JSON.stringify(["logo_0"])),o.append("logo_0",s[t].file)):s[t].url&&(o.append(t,JSON.stringify([s[t].url])),console.log("keep same",JSON.stringify(s[t]))):o.append(t,s[t])});const l={method:"PUT",body:o,headers:n},r=await fetch(`${$}/update_store`,l);try{const t=await r.json();return y.getState().owner_stores({}),t}catch(t){console.log(t.message);return}},async createStore(s){try{const a=y.getState().owner;if(!a)return;const n=new Headers;n.append("Authorization",`Bearer ${a.token}`);const o=new FormData;console.log(s),Object.keys(s).forEach(d=>{d=="logo"&&(o.append(d,JSON.stringify(["logo_0"])),o.append("logo_0",s[d].file)),d=="banners"?(o.append(d,JSON.stringify(["banners_0"])),o.append("banners_0",s[d].file)):o.append(d,s[d])});const l={method:"POST",body:o,headers:n},t=await(await fetch(`${$}/create_store`,l)).json();return y.getState().owner_stores({}),t}catch(a){return a}},async createOwner(){window.open(`${$}/google_connexion`,void 0,"popup");const s=setInterval(()=>{const a=localStorage.getItem("user"),n=a&&JSON.parse(a);n&&(i(()=>({owner:n})),clearInterval(s),y.getState().owner_stores({}),T.getState().setAbsPath(["store_list"]))},100)}})),T=new ie(ve,["/","home"]).getStore();let je=0;function O({icon:i,infos:s,text:a,title:n,id:o}){return e.jsxs("div",{id:o,className:"card-flyer",children:[e.jsx("div",{className:"back-flyer",style:{background:`linear-gradient(${Math.trunc(Math.random()*180+je++*20)}deg, #408DD5 0%, #630B8C 100%)`}}),e.jsxs("div",{className:"front-flyer",children:[i&&e.jsx("div",{className:"icon",style:{background:E(i,"90%")}}),e.jsx("h1",{className:"title",children:n}),e.jsx("p",{children:a}),s==null?void 0:s.map((l,r)=>e.jsxs("div",{className:"info",children:[e.jsx("div",{className:"icon",style:{background:E(l.icon,"90%")}}),e.jsx("div",{className:"text",children:l.text})]},r))]})]})}function Ne(){const i=(n,o=50)=>{const r=100*n-o*.5,t=100-(r+o);return{transformOrigin:`${-r}px 25px`,right:`${t}px`}},s=n=>({scale:`${n}`});return e.jsx("div",{className:"solary-system",children:e.jsxs("div",{className:"ctn",children:[e.jsx("div",{className:"circle1",style:s(2*.3)}),e.jsx("div",{className:"circle2",style:s(2*.6)}),e.jsx("div",{className:"circle3",style:s(2*.9)}),e.jsx("div",{className:"circle4",style:s(2*1.15)}),e.jsx("div",{className:"circle5",style:s(2*1.4)}),e.jsx("div",{className:"circle6",style:s(2*1.65)}),e.jsx("div",{className:"circle7",style:s(2*2)}),e.jsx("div",{className:"sun"}),e.jsx("div",{className:"planet1",style:i(2*.3,20)}),e.jsx("div",{className:"planet2",style:i(2*.6,40)}),e.jsx("div",{className:"planet3",style:i(2*.9)}),e.jsx("div",{className:"planet4",style:i(2*1.15,40)}),e.jsx("div",{className:"planet5",style:i(2*1.4,70)}),e.jsx("div",{className:"planet6",style:i(2*1.65)}),e.jsx("div",{className:"planet7",style:i(2*2)})]})})}function fe(){const[i,s]=x.useState("session");return e.jsxs("div",{className:"client-chat",children:[e.jsxs("div",{className:"top-onglet",children:[e.jsx("div",{className:"session "+(i=="session"?"active":""),onClick:()=>{s("session")},children:"Session"}),e.jsx("div",{className:"discussion "+(i=="discussion"?"active":""),onClick:()=>{s("discussion")},children:"Discussion"}),e.jsx("div",{className:"group "+(i=="group"?"active":""),onClick:()=>{s("group")},children:"Group"})]}),e.jsxs("div",{className:"ctn",children:[e.jsx("div",{className:"ctn-session "+(i=="session"?"active":""),children:e.jsxs("div",{className:"view-session",children:[e.jsxs("div",{className:"client1 user",children:[e.jsx("div",{className:"label",children:"Client"}),e.jsx("div",{className:"client1-c conect",children:e.jsx("div",{className:"message-c1 message"})})]}),e.jsxs("div",{className:"client2 user",children:[e.jsx("div",{className:"label",children:"Client"}),e.jsx("div",{className:"client2-c conect",children:e.jsx("div",{className:"message-c2 message"})})]}),e.jsx("div",{className:"collaborator user",children:e.jsx("div",{className:"label",children:"Collaborator"})})]})}),e.jsx("div",{className:"ctn-discussion "+(i=="discussion"?"active":""),children:e.jsxs("div",{className:"view-discussion",children:[e.jsxs("div",{className:"collabo1 user",children:[e.jsx("div",{className:"label",children:"Collaborator"}),e.jsx("div",{className:"collabo1-c conect",children:e.jsx("div",{className:"message-c1 message"})})]}),e.jsx("div",{className:"collabo1-collabo2 conect",children:e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{className:"message-c3 message"})})}),e.jsxs("div",{className:"collabo2 user",children:[e.jsx("div",{className:"label",children:"Collaborator"}),e.jsx("div",{className:"collabo2-c conect",children:e.jsx("div",{className:"message-c2 message"})})]}),e.jsx("div",{className:"admin user",children:e.jsx("div",{className:"label",children:"Admin"})})]})}),e.jsx("div",{className:"ctn-group "+(i=="group"?"active":"")})]})]})}function ge(){const{pathList:i,check:s}=T(),[a,n]=x.useState(0),[o,l]=x.useState(0),[r,t]=x.useState(0),[d]=x.useState({time:0,id:void 0,start:0,count:0,stop(){clearInterval(this.id||0),this.id=void 0},init(){this.id||(this.start=Date.now(),this.id=setInterval(()=>{this.time=Date.now()-this.start,this.count++,n(this.count)},5e3))}});return x.useEffect(()=>(s("home")&&!d.id&&d.init(),()=>{d.stop()}),[d,i]),e.jsxs("div",{className:"interface-change",children:[e.jsxs("div",{className:"left-side",onMouseMove:h=>{const p=h.currentTarget.getBoundingClientRect(),g=p.y+p.height/2;l((h.clientX-p.x)/(p.width/2)),t((h.clientY-g)/(p.height/2))},onTouchMove:h=>{const p=h.currentTarget.getBoundingClientRect(),g=p.y+p.height/2;l((h.touches[0].clientX-p.x)/(p.width/2)),t((h.touches[0].clientY-g)/(p.height/2))},children:[e.jsxs("div",{className:"ctn-monitor",style:{transform:`rotateY(${-Math.PI*o*.1}rad) rotateX(${Math.PI*r*.1}rad)`},children:[e.jsx("div",{className:"monitor"}),e.jsx("div",{className:"interfaces-ctn",children:e.jsxs("div",{className:"interfaces",children:["By NG",e.jsx("div",{className:"interface1 "+(a%4==0?"active":"hide")}),e.jsx("div",{className:"interface2 "+(a%4==1?"active":"hide")}),e.jsx("div",{className:"interface3 "+(a%4==2?"active":"hide")}),e.jsx("div",{className:"interface4 "+(a%4==3?"active":"hide")})]})})]}),e.jsxs("div",{className:"icons",children:[e.jsx("div",{className:"icon1 "+(a%4==0?"active":"")}),e.jsx("div",{className:"icon2 "+(a%4==1?"active":"")}),e.jsx("div",{className:"icon3 "+(a%4==2?"active":"")}),e.jsx("div",{className:"icon4 "+(a%4==3?"active":"")})]})]}),e.jsxs("div",{className:"infos",children:[e.jsx("h2",{children:"Choose the interface that suits you"}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"1"})," 3D or standard interface"]}),e.jsx("p",{className:"text",children:"We have two (2) types of interface, 3D and standard. each available in several ranges"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"2"})," How to have your store"]}),e.jsx("p",{className:"text",children:"you to create several stores with the same account. to create your store, fill in the required information (name, logo, etc.)"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"3"})," Interface update"]}),e.jsx("p",{className:"text",children:"you will be notified of interface improvements. We continually update the platform to meet your expectations"})]})]})]})}const k=250,R=10;let U=0,be=0;const ye=["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aut","Sep","Oct","Nov","Dec"],D=[5,8,7,3,1,8,2,6],we=["#402E7A","#4C3BCF","#4B70F5","#3DC2EC","#49243E","#704264","#BB8493","#DBAFA0"];function Se(){var g;const{check:i,pathList:s}=T(),a=x.useRef(null),n=x.useRef(null),[o,l]=x.useState({v:void 0}),[r,t]=x.useState(Array.from({length:R},(u,c)=>c/R*k)),[d]=x.useState({time:0,id:void 0,start:0,count:0,y:0,touchDate:void 0,isHover:!1,pie:{touchDate:void 0,isHover:!1,x:0,y:0},stop(){clearInterval(this.id||0),this.id=void 0},init(){this.id||(this.start=Date.now(),this.id=setInterval(()=>{if(this.time=Date.now()-this.start,U++,this.touchDate)r.shift(),r.push(this.y),t([...r]),this.count++;else if(be++%30==0){r.shift();const u=Math.cos(U/80),c=k*(u*.5+.5);r.push(c>k?k:c<0?0:c),t([...r]),this.count++}if(Date.now()-(this.touchDate||0)>1e3&&(this.touchDate=void 0),this.pie.touchDate){let u=180*(Math.atan2(this.pie.y,this.pie.x)/Math.PI);u=u+(1-(Math.abs(this.pie.y)/this.pie.y*.5+.5))*360,u+=90,u-=u>360&&u<450?360:0;const c=D.reduce((m,f)=>m+f);D.find((m,f)=>{const j=D[f]/c*360;let S=0;D.find((K,F)=>{if(F==f)return!0;S+=D[F]/c*360});const v=S,P=S+j;return u<P&&u>v?(l({v:f}),!0):!1})}else o.v=void 0,l(o);Date.now()-(this.pie.touchDate||0)>1e3&&(this.pie.touchDate=void 0)},100))}});x.useEffect(()=>(i("home")?!d.id&&d.init():d.stop(),()=>{d.stop()}),[s]);let h=(((g=a.current)==null?void 0:g.getBoundingClientRect().width)||0)/r.length;const p=[0,k,...r.map((u,c)=>[h*c,k-Math.trunc(u)]).flat(1),h*(R-1),k];return e.jsxs("div",{className:"bar-chart",children:[e.jsx("div",{className:"bar-top",children:e.jsxs("div",{className:"chart-ctn",ref:a,onMouseMove:u=>{const c=u.currentTarget.getBoundingClientRect();d.y=c.y+c.height-u.clientY,d.touchDate=Date.now()},onTouchMove:u=>{const c=u.currentTarget.getBoundingClientRect();d.y=c.y+c.height-u.touches[0].clientY,d.touchDate=Date.now()},children:[Array.from({length:R},(u,c)=>c/R*k).map((u,c)=>e.jsx("div",{className:"val",style:{left:"-15px",position:"absolute",top:`calc(${(1-c/R)*k}px - 1em)`},children:Math.trunc(u/k*100)/10},c)),e.jsx("div",{className:"hand-ctn",style:{bottom:`${r[r.length-1]}px`},children:e.jsxs("div",{className:"hand",style:{transform:"translateY(-0.5em)"},children:["ðŸ‘ˆ ",Math.trunc(r[r.length-1]/k*100)/10]})}),e.jsxs("svg",{className:"svg-lines",style:{width:"100%",height:"100%"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chart-line-gradieant",gradientTransform:"rotate(90)",children:[e.jsx("stop",{offset:"5%",stopColor:"#6200ff66"}),e.jsx("stop",{offset:"95%",stopColor:"#58007a33"})]})}),e.jsx("polygon",{className:"polygon",points:p.toString()})]}),r.map((u,c)=>e.jsx("div",{className:"bar",style:{height:`${u*.5}px`,width:"20px",left:`${2.5+100/r.length*c}%`,bottom:"0"},children:e.jsx("div",{className:"label",children:ye[(d.count+c)%12]})},c+"b"))]})}),e.jsxs("div",{className:"infos",children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"left",children:"have graphic tools to follow your users' consumption trends"}),e.jsxs("div",{className:"piechart",ref:n,onMouseMove:u=>{const c=u.currentTarget.getBoundingClientRect();d.pie.y=u.clientY-(c.y+c.height/2),d.pie.x=u.clientX-(c.x+c.width/2),d.pie.touchDate=Date.now()},onTouchMove:u=>{const c=u.currentTarget.getBoundingClientRect();d.pie.y=u.touches[0].clientY-(c.y+c.height/2),d.pie.x=u.touches[0].clientX-(c.x+c.width/2),d.pie.touchDate=Date.now()},children:[D.map((u,c)=>{const m=D.reduce((S,v)=>S+v),f=D[c]/m*360;let j=0;return D.find((S,v)=>{if(v==c)return!0;j+=D[v]/m*360}),e.jsx("div",{className:"part "+(o.v==c?"active":""),style:{rotate:`${j}deg`,background:`conic-gradient(${we[c]} ${f}deg, transparent ${f}deg)`}},c)}),e.jsx("div",{className:"part",style:{pointerEvents:"none",background:"radial-gradient(circle, #0005 0% ,#0000 50% ) "}}),e.jsx("div",{className:"value "+(d.pie.touchDate?"touch":""),style:{top:`${100+d.pie.y}px`,left:`${65+d.pie.x}px`,display:o.v==null?"none":""},children:D[o.v||0]})]})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{className:"count",children:"1"}),"Product visit statistics"]}),e.jsx("p",{children:"  you will have access to the number of visits per defined period, this will allow you to know the current trends of your customer"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{className:"count",children:"2"}),"Product order statistics"]}),e.jsx("p",{children:"  order statistics, to track your revenue"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{className:"count",children:"3"}),"Customer satisfaction statistics"]}),e.jsx("p",{children:"  your customers will leave you a product rating per order, this will allow you to judge user preferences"})]})]})]})]})}const b=class b{constructor(){w(this,"ring",null);w(this,"upDateFeatureMap");w(this,"modelPromise");w(this,"dependencies",{path:{THREE:"/three/build/three.module.js"},obj:{THREE:null,GLTFLoader:null}});w(this,"init",({THREE:s,GLTFLoader:a})=>{this.dependencies.obj.GLTFLoader=a,this.dependencies.obj.THREE=s;const n=(t,d,h)=>{let p=0;for(const g of t.children)p++,!(p==5||p==6)&&(g.material[d]=h)},o=(t,d,h)=>{[4,5].forEach(p=>{const g=t.children[p];g.material[d]=h})};let l=null;const r=t=>{l=t.scene.children[0].clone(),this.ring=new this.dependencies.obj.THREE.Object3D;const d=new this.dependencies.obj.THREE.Object3D;return d.add(l),this.ring.add(d),l.rotation.x=Math.PI*(85/180),l.scale.set(.1,.1,.1),o(l,"metalness",b.testMetal.metalness),o(l,"roughness",b.testMetal.roughness),o(l,"color",new this.dependencies.obj.THREE.Color(b.testMetal.color)),n(l,"metalness",b.testGem.metalness),n(l,"roughness",b.testGem.roughness),n(l,"color",new this.dependencies.obj.THREE.Color(b.testGem.color)),n(l,"reflectivity",b.testGem.reflectivity),n(l,"ior",b.testGem.ior),n(l,"thickness",b.testGem.thickness),n(l,"transmission",b.testGem.transmission),n(l,"clearcoat",b.testGem.clearcoat),n(l,"side",this.dependencies.obj.THREE.DoubleSide),this.ring};this.modelPromise=new Promise(t=>{new this.dependencies.obj.GLTFLoader().load(`${location.host.includes("localhost")?"http://localhost:3333":""}/fs/products_scene_dir_05e7dc8e-f409-46ae-91cc-6a125add8c5b/Ring_1/model.glb`,d=>{t(r(d))})}),this.upDateFeatureMap={metal:t=>{typeof t=="number"||typeof t=="string"||typeof t=="boolean"?typeof t=="string"&&o(l,"color",new this.dependencies.obj.THREE.Color(parseInt(t,16))):o(l,"color",t!=null&&t.value?new this.dependencies.obj.THREE.Color(parseInt(t.value,16)):b.testMetal.color)},gem:t=>{typeof t=="number"||typeof t=="string"||typeof t=="boolean"?typeof t=="string"&&n(l,"color",new this.dependencies.obj.THREE.Color(parseInt(t,16))):n(l,"color",t!=null&&t.value?new this.dependencies.obj.THREE.Color(parseInt(t.value,16)):b.testMetal.color)}}})}getDependencies(){return this.dependencies}async getModel(){return await this.modelPromise}showFeature(s){throw new Error("Method not implemented.")}updateFeature(s,a){var n,o;(o=(n=this.upDateFeatureMap)[s.name])==null||o.call(n,a)}};w(b,"testWorld",{scene:3359829,ground:83873694}),w(b,"testGem",{color:8705500,metalness:0,roughness:0,reflectivity:0,ior:1.1,thickness:30,clearcoat:0,transmission:1}),w(b,"testMetal",{color:12496174,metalness:1,roughness:0});let W=b;function Ce(){const[i]=x.useState({product3d:void 0,init(l){this.product3d=new Ee(l)}}),{pathList:s,check:a}=T(),n=x.useRef(null);x.useEffect(()=>{var l;return!i.product3d&&n.current?i.init(n.current):n.current&&((l=i.product3d)==null||l.setCanvas(n.current)),()=>{var r;(r=i.product3d)==null||r.setVisible(!1)}},[n]);const o=ee(n,500,!!a("home"));return x.useEffect(()=>{var l;return(l=i.product3d)==null||l.setVisible(o),()=>{var r;(r=i.product3d)==null||r.setVisible(!1)}},[s,o]),e.jsxs("div",{className:"product-3d",children:[e.jsxs("div",{className:"canvas-ctn",children:[e.jsx("canvas",{id:"home-canvas-product-3d",ref:n}),e.jsxs("div",{className:"features-ctn",children:[e.jsx("div",{className:"values"}),e.jsx("div",{className:"features"})]})]}),e.jsxs("div",{className:"infos",children:[e.jsx("h2",{children:"Choose the interface that suits you"}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"1"})," 3D or standard interface"]}),e.jsx("p",{className:"text",children:"We have two (2) types of interface, 3D and standard. each available in several ranges"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"2"})," How to have your store"]}),e.jsx("p",{className:"text",children:"you to create several stores with the same account. to create your store, fill in the required information (name, logo, etc.)"})]}),e.jsxs("div",{className:"info",children:[e.jsxs("h3",{className:"title",children:[e.jsx("span",{children:"3"})," Interface update"]}),e.jsx("p",{className:"text",children:"you will be notified of interface improvements. We continually update the platform to meet your expectations"})]})]})]})}const I={};class Ee{constructor(s){w(this,"controls");w(this,"renderer");w(this,"visible",!1);w(this,"render");this.canvas=s;const a=s.parentElement;this.renderer=new re({canvas:s,alpha:!0,premultipliedAlpha:!1,antialias:!0});const n=75,o=2,l=.1,r=10;this.renderer.domElement=s;const t=new ce(n,o,l,r);t.position.z=2.5,this.controls=new oe(t,s),this.controls.enableDamping=!0,this.controls.maxDistance=2.5,this.controls.minDistance=1.8,this.controls.enablePan=!1,this.controls.dampingFactor=.03,this.controls.enabled=!0;const d=new le;if(I.model)console.log("last Cache.model",I.model),d.add(I.model);else{const c=new W;c.init({GLTFLoader:de,THREE:he}),c.getModel().then(m=>{new me().load("/src/World/images/royal_esplanade_1k.hdr",j=>{j.mapping=ue;const S=m.children[0].children[0].children;for(const v of S)v.material.envMap=j}),d.add(m),I.model=m,console.log("new Cache.model")})}let h=0,p=0;function g(c){const m=a.getBoundingClientRect(),f=h!==m.width||p!==m.height;return f&&(p=m.height,h=m.width,c.setSize(m.width,m.height,!1)),f}const u=this;this.render=function(c){if(u.visible){if(g(u.renderer)){const m=u.renderer.domElement;t.aspect=m.width/m.height,t.updateProjectionMatrix()}u.controls.update(),u.renderer.render(d,t),requestAnimationFrame(u.render)}},requestAnimationFrame(u.render)}setCanvas(s){this.canvas=s,this.controls.domElement=s,this.renderer.domElement=s}setVisible(s){this.visible=s,s&&requestAnimationFrame(this.render)}isVisible(){this.visible}}const ke=[{u:"products",i:"/src/res/add-product.png"},{u:"commands",i:"/src/res/shopping-bag.png"},{u:"users",i:"/src/res/customer.png"},{u:"interfaces",i:"/src/res/software-testing.png"},{u:"statistics",i:"/src/res/stats.png"}];let De=0;function $e(){const[i,s]=x.useState(1),[a,n]=x.useState();x.useEffect(()=>{if(!a)return n(setInterval(()=>{s(De++%4+1)},3e3)),()=>{clearInterval(a)}},[a]);const{check:o}=T();return o("home")&&e.jsxs("div",{className:"page-home",children:[e.jsx("div",{className:"back-home"}),e.jsxs("div",{className:"page-text",children:[e.jsxs("div",{className:"text-top",children:[e.jsxs("div",{className:"stores-count",children:[34," Stores"]}),e.jsxs("div",{className:"title",children:["Discover the ",e.jsx("span",{className:"shopping",children:"Shopping"})," Revolution in ",e.jsx("span",{className:"c-3d",children:"3D"})]}),e.jsx("div",{className:"sub-title",children:"Create, Personalize and Sell your Products presented in 3D and offer your customers a unique interactive experience."})]}),e.jsxs("div",{className:"right",children:[e.jsx("div",{className:"subjects",children:ke.map(l=>e.jsx("a",{href:`#home/${l.u}`,style:{background:E(l.i)}},l.u))}),e.jsxs("label",{htmlFor:"home-search",className:"search",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{id:"home-search",type:"text",placeholder:"Search"})]})]})]}),e.jsxs("div",{className:"prettier",children:[e.jsx(O,{id:"home/products",icon:"/src/res/add-product.png",infos:[{icon:"/src/res/add-product.png",text:"add product 3D file"},{icon:"/src/res/add-product.png",text:"catalog, category, product, feature"}],text:"make your products accessible online, for your customers.",title:"Add new Products"}),e.jsx("div",{className:"cadre",children:e.jsx(Ce,{})})]}),e.jsxs("div",{className:"prettier",children:[e.jsx(O,{id:"home/commands",icon:"/src/res/shopping-bag.png",infos:[{icon:"/src/res/shopping-bag.png",text:"auto or manual validation"},{icon:"/src/res/shopping-bag.png",text:"cart, cancel, deliver, on_the_way, return "}],text:"view orders, track and adjust order status",title:"Manage customer orders"}),e.jsx("div",{className:"cadre"})]}),e.jsxs("div",{className:"prettier",children:[e.jsx(O,{id:"home/users",icon:"/src/res/customer.png",infos:[{icon:"/src/res/customer.png",text:"chose the role of collaborator"},{icon:"/src/res/customer.png",text:"client, owner, collaborator, moderator"}],text:"follow your customers, add chat collaborators with everyone, organize your team",title:"Store user types"}),e.jsxs("div",{className:"cadre",children:[e.jsxs("div",{className:"p-access",children:[e.jsx("div",{className:"ctn-threejs"}),e.jsxs("div",{className:"infos",children:[e.jsx("div",{className:"title",children:"accessibility"}),e.jsxs("div",{className:"info "+(i==1?"open":""),children:[e.jsx("div",{className:"count",children:"1"}),e.jsxs("div",{className:"text",children:[e.jsx("h3",{children:"Accessible all over the world 24/7"}),e.jsx("p",{children:"You and your customers will be able to access the content of your store at any time."})]})]}),e.jsxs("div",{className:"info "+(i==2?"open":""),children:[e.jsx("div",{className:"count",children:"2"}),e.jsxs("div",{className:"text",children:[e.jsx("h3",{children:"Mobile or desktop"}),e.jsx("p",{children:"The Sublymus platform is available on the web in Mobile, tablet and desktop versions"})]})]}),e.jsxs("div",{className:"info "+(i==4?"open":""),children:[e.jsx("div",{className:"count",children:"4"}),e.jsxs("div",{className:"text",children:[e.jsx("h3",{children:"report issues to customer service"}),e.jsx("p",{children:"to help us improve the platform, report any problems you encounter."})]})]}),e.jsxs("div",{className:"info "+(i==3?"open":""),children:[e.jsx("div",{className:"count",children:"3"}),e.jsxs("div",{className:"text",children:[e.jsx("h3",{children:"quick correction and maintenance"}),e.jsx("p",{children:"We are attentive to your comments and we are working to correct or improve them as quickly as possible."})]})]})]}),e.jsx("div",{className:"access-world",children:e.jsx(Ne,{})})]}),e.jsx("div",{className:"p-users",children:e.jsx(fe,{})})]})]}),e.jsxs("div",{className:"prettier",children:[e.jsx(O,{id:"home/interfaces",icon:"/src/res/software-testing.png",infos:[{icon:"/src/res/software-testing.png",text:"automatically updates store information"},{icon:"/src/res/software-testing.png",text:"compatibility with all stores"}],text:"the platform has several interfaces to best meet your needs",title:"Change your store interface"}),e.jsx("div",{className:"cadre",children:e.jsx(ge,{})})]}),e.jsxs("div",{className:"prettier",children:[e.jsx(O,{id:"home/statistics",icon:"/src/res/stats.png",infos:[{icon:"/src/res/stats.png",text:"Statistical analysis of data"},{icon:"/src/res/stats.png",text:"visit, command, yield, period"}],text:"increase your sales using statistical data from your store",title:"Statistical table"}),e.jsx("div",{className:"cadre",children:e.jsx(Se,{})})]}),e.jsx("footer",{})]})}function Te(){var Y;const[i]=x.useState(pe()),{current:s,setAbsPath:a,navBack:n,json:o,pathList:l}=T(),{createStore:r,deleteStore:t,editStore:d,selectedStore:h,openChild:p,setStoreById:g,owner:u,exist:c}=y(),[m,f]=x.useState(h||{}),[j,S]=x.useState(h?{url:(s("edit_store")||"")&&`${h.logo[0]}`}:null),[v,P]=x.useState(h?{url:(s("edit_store")||"")&&`${(Y=h.banners)==null?void 0:Y[0]}`}:null),F=X().width<1050?"wrap":"",[A,G]=x.useState(""),[z,B]=x.useState(!1);x.useEffect(()=>{setTimeout(()=>{var N;h&&s("edit_store")&&(f(h),P({url:`${h.banners[0]}`}),S({url:`${(N=h.logo)==null?void 0:N[0]}`}))}),h||(f({}),S(null),P(null))},[h]),x.useEffect(()=>{u&&(o!=null&&o.store_id)&&g(o.store_id)},[o,u]),x.useEffect(()=>{G("")},[l]);const H=s("edit_store"),q=(v==null?void 0:v.url)&&(j==null?void 0:j.url)&&m.name,L=h;return H&&!h?e.jsx("div",{className:"store-select-btn",onClick:()=>{a(["store_list"])},children:"Select Store Before Edition"}):s("new_store","edit_store")&&e.jsxs("div",{className:"page-new-store",children:[h&&e.jsxs("div",{className:"editor-top",children:[e.jsx("div",{className:"nav-back",onClick:()=>n()}),e.jsx(xe,{terme:"dark",deteleKey:h.id,mode:"delete",onDelete:()=>{t(h.id).then(N=>{N&&a(["store_list"])})},onCreate:()=>{},title:"Store Information"}),e.jsxs("div",{className:"open-opt",children:[e.jsx("div",{className:"btn-dash btn demo no-selectable",onClick:()=>{localStorage.setItem("store",JSON.stringify(h)),window.open(`${M}/demo/${h.name}`)},children:"Open Demo Store"}),e.jsx("div",{className:"btn-dash btn no-selectable",onClick:()=>{localStorage.setItem("store",JSON.stringify(h)),window.open(`${M}/${h==null?void 0:h.name}/dash`)},children:"Open Dashboard"})]})]}),e.jsxs("div",{className:"center-content "+F,children:[e.jsx("div",{className:"center-left",children:e.jsxs("div",{className:"store "+(h?"anim":"void"),children:[e.jsxs("div",{className:"banner "+(v!=null&&v.url?"":"void"),style:v!=null&&v.url?{background:E((v==null?void 0:v.url)||"")}:{},children:[e.jsxs("div",{className:"img-options",children:[(v==null?void 0:v.url)&&e.jsx("div",{className:"open",onClick:()=>{p(e.jsx("div",{className:"big-img",onClick:()=>p(void 0,!1),children:e.jsx("div",{className:"img",style:{background:E((v==null?void 0:v.url)||"")}})}),!0,"#3455")}}),e.jsx("input",{type:"file",accept:"image/*",id:i+"banner",style:{display:"none"},onChange:N=>{var _;const C=(_=N.currentTarget.files)==null?void 0:_[0];C&&P({file:C,url:URL.createObjectURL(C)})}}),e.jsx("label",{htmlFor:i+"banner",className:"edit"})]}),e.jsxs("div",{className:"more",children:[e.jsxs("div",{className:"logo "+(j!=null&&j.url?"":"void"),style:j!=null&&j.url?{background:E((j==null?void 0:j.url)||"")}:{},onClick:N=>{N.currentTarget==N.target&&j!=null&&j.url&&p(e.jsx("div",{className:"big-img",onClick:()=>p(void 0,!1),children:e.jsx("div",{className:"img",style:{background:E((j==null?void 0:j.url)||"")}})}),!0,"#3455")},children:[e.jsx("input",{type:"file",accept:"image/*",id:i+"logo",style:{display:"none"},onChange:N=>{var _;const C=(_=N.currentTarget.files)==null?void 0:_[0];C&&S({file:C,url:URL.createObjectURL(C)})}}),e.jsx("label",{htmlFor:i+"logo",className:"edit"})]}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"name",children:m.name}),e.jsx("div",{className:"owner-email",children:m.store_email}),e.jsx("div",{className:"id",children:m.id&&`#${m.id.split("-")[0]}`})]})]})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"info",children:[e.jsxs("div",{className:"stat",children:[e.jsxs("div",{className:"products",children:[e.jsx("div",{className:"value",children:h?42:0}),e.jsx("div",{className:"icon"})]}),e.jsxs("div",{className:"clients",children:[e.jsx("div",{className:"value",children:h?205:0}),e.jsx("div",{className:"icon"})]}),e.jsxs("div",{className:"collaborators",children:[e.jsx("div",{className:"value",children:h?9:0}),e.jsx("div",{className:"icon"})]})]}),e.jsxs("div",{className:"other",children:[e.jsx("div",{className:"site",children:m.website}),e.jsx("div",{className:"phone",children:m.phone})]})]}),h&&e.jsxs("div",{className:"options",children:[e.jsx("div",{className:"open-store",onClick:()=>{localStorage.setItem("store",JSON.stringify(L)),window.open(`${M}/${m.name}`)},children:"STORE"}),e.jsx("div",{className:"open-dash",onClick:()=>{localStorage.setItem("store",JSON.stringify(L)),window.open(`${M}/${m.name}/dash`)},children:"DASH"})]})]})]})}),e.jsxs("div",{className:"center-right",children:[e.jsxs("div",{className:"imgs",children:[e.jsxs("label",{className:v!=null&&v.url?"available":"no-available",htmlFor:i+"banner",children:["Banner ",e.jsx("span",{})]}),e.jsxs("label",{className:j!=null&&j.url?"available":"no-available",htmlFor:i+"logo",children:["Logo ",e.jsx("span",{})]})]}),H&&e.jsxs("div",{className:"id",children:[e.jsx("label",{htmlFor:i+"id",style:{color:"#fff9"},children:"Id"}),e.jsx("input",{type:"text",id:i+"id",value:m.id||"",style:{color:"#fff9",borderColor:"#fff9"},placeholder:"Name"})]}),e.jsxs("div",{className:"name",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"name",children:"Store Name"}),e.jsxs("div",{className:"available",style:{display:A=="yes"?"flex":"none"},children:[e.jsx("span",{})," available"]}),e.jsxs("div",{className:"not-available",style:{display:A=="no"?"flex":"none"},children:[e.jsx("span",{})," not available"]})]}),e.jsx("input",{type:"text",id:i+"name",value:m.name||"",placeholder:"Name",onChange:N=>{var _;const C=N.currentTarget.value;C.trim().length<3?G("no"):(_=c(C))==null||_.then(J=>{G(J?"no":"yes"),console.log(C,A,J,J?"no":"yes")}),f({...m,name:C})}})]}),e.jsxs("div",{className:"phone",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"phone",children:"Phone"}),e.jsx("div",{className:"optional",children:"(optional)"})]}),e.jsx("input",{type:"text",id:i+"phone",value:m.phone||"",placeholder:"Phone",onChange:N=>{f({...m,phone:N.currentTarget.value})}})]}),e.jsxs("div",{className:"store_email",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"store_email",children:"Store Email"}),e.jsx("div",{className:"optional",children:"(optional)"})]}),e.jsx("input",{type:"email",id:i+"store_email",value:m.store_email||"",placeholder:"Store email",onChange:N=>{f({...m,store_email:N.currentTarget.value})}})]}),e.jsxs("div",{className:"website",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"website",children:"Web Site"}),e.jsx("div",{className:"optional",children:"(optional)"})]}),e.jsx("input",{type:"text",id:i+"website",value:m.website||"",placeholder:"Web Site",onChange:N=>{f({...m,website:N.currentTarget.value})}})]}),e.jsxs("div",{className:"desciption",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"desciption",children:"Description"}),e.jsx("div",{className:"optional",children:"(optional)"})]}),e.jsx("input",{type:"text",id:i+"description",value:m.description||"",placeholder:"Description",onChange:N=>{f({...m,description:N.currentTarget.value})}})]}),e.jsxs("div",{className:"address",children:[e.jsxs("div",{className:"top",children:[e.jsx("label",{htmlFor:i+"address",children:"Address"}),e.jsx("div",{className:"optional",children:"(optional)"})]}),e.jsx("input",{type:"text",id:i+"address",value:m.address,placeholder:"Address",onChange:N=>{f({...m,address:N.currentTarget.value})}})]}),e.jsx("div",{className:"btm",children:e.jsx("div",{className:"btn no-selectable",style:{background:q?"":"#345"},onClick:()=>{!q||z||(B(!0),H?h&&d({...m,banners:v,logo:j,store_id:h==null?void 0:h.id}).then(N=>{B(!1),N&&a(["store_list"])}):r({...m,banners:v,logo:j}).then(N=>{setTimeout(()=>{B(!1)},100),N!=null&&N.id&&N&&a(["store_list"])}))},children:z?e.jsx("div",{className:"loading"}):`${H?"Edit":"Create"} Store`})})]})]})]})}function _e(){const{check:i,current:s,setAbsPath:a,qs:n,navBack:o,pathList:l}=T(),{owner:r,stores:t,owner_stores:d,setSelectedStore:h}=y();return x.useEffect(()=>{r&&i("store_list")&&d({text:""})},[l,r]),s("store_list")&&e.jsxs("div",{className:"stores-page",children:[e.jsxs("div",{className:"top-top",children:[e.jsx("div",{className:"nav-back",onClick:()=>o()}),e.jsxs("div",{className:"sreach-stores",children:[e.jsxs("div",{className:"ctn",children:[e.jsx("div",{className:"icon"}),e.jsx("input",{type:"text",placeholder:"Search by #id, name, email",name:"sreach-stores",id:"sreach-stores",onChange:p=>{d({text:p.currentTarget.value})}})]}),r&&e.jsxs("div",{className:"new-btn no-selectable",onClick:()=>{h(void 0),a(["new_store"])},children:[e.jsx("div",{className:"icon"}),e.jsx("div",{className:"label",children:"Add New Store"})]})]})]}),e.jsx("div",{className:"stores",ref:se,children:t==null?void 0:t.list.map(p=>e.jsxs("div",{className:"store",children:[e.jsxs("div",{className:"banner",style:{background:E(p.banners[0])},onClick:()=>{h(p),n({store_id:p.id}).setAbsPath(["edit_store"])},children:[e.jsx("div",{className:"edit"}),e.jsxs("div",{className:"more",children:[e.jsx("div",{className:"logo",style:{background:E(p.logo[0])}}),e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"name",children:p.name}),e.jsx("div",{className:"owner-email",children:p.store_email}),e.jsxs("div",{className:"id",children:["#",p.id.split("-")[0]]})]})]})]}),e.jsxs("div",{className:"btm",children:[e.jsxs("div",{className:"info",children:[e.jsxs("div",{className:"stat",children:[e.jsxs("div",{className:"products",children:[e.jsx("div",{className:"value",children:"42"}),e.jsx("div",{className:"icon"})]}),e.jsxs("div",{className:"clients",children:[e.jsx("div",{className:"value",children:"205"}),e.jsx("div",{className:"icon"})]}),e.jsxs("div",{className:"collaborators",children:[e.jsx("div",{className:"value",children:"9"}),e.jsx("div",{className:"icon"})]})]}),e.jsxs("div",{className:"other",children:[e.jsx("div",{className:"site",children:p.website}),e.jsx("div",{className:"phone",children:p.phone})]})]}),e.jsxs("div",{className:"options",children:[e.jsx("div",{className:"open-store",onClick:()=>{localStorage.setItem("store",JSON.stringify(p)),window.open(`${M}/${p.name}`)},children:"STORE"}),e.jsx("div",{className:"open-dash",onClick:()=>{localStorage.setItem("store",JSON.stringify(p)),window.open(`${M}/${p.name}/dash`)},children:"DASH"})]})]})]}))})]})}const V=[{u:"home",n:"Home",i:"/src/res/application.png"},{u:"store_list",n:"Stores",i:"/src/res/store.png"},{u:"tutorial",n:"Tutorial",i:"/src/res/catalog.png"},{u:"pricing",n:"Pricing",i:"/src/res/shopping-cart.png"},{u:"contact",n:"Contact us",i:"/src/res/services.png"},{u:"updates",n:"Updates",i:"/src/res/jigsaw.png"},{u:"forum",n:"Forum",i:"/src/res/multiple-users-silhouette.png"}];function Me(){var u;const{setAbsPath:i,pathList:s}=T(),[a,n]=x.useState(s[1]||"home"),[o,l]=x.useState(!1),[r,t]=x.useState(!1),{owner:d,createOwner:h}=y(),p=X(),g=c=>{i([c]),n(c)};return x.useEffect(()=>{n(s[1]||"home")},[s]),x.useEffect(()=>{window.addEventListener("click",()=>{const c=document.querySelector(".top-bar .more-navs ul");(c==null?void 0:c.className)==""&&t(!1)})},[]),e.jsxs("div",{className:"top-bar",ref:te(80,".web"),children:[e.jsxs("div",{className:"top-bar-ctn",children:[e.jsxs("div",{className:"left",children:[e.jsx("div",{className:"options",onClick:()=>{}}),e.jsx("a",{href:`${M}/web#home`,className:"logo-ctn",onClick:()=>{g("home")},children:e.jsx("div",{className:"icon"})})]}),e.jsx("ul",{className:"top-bar-center",children:V.map((c,m)=>m*200<p.width-400?e.jsxs("li",{className:a==c.u?"active":"",onClick:()=>g(c.u),children:[e.jsx("span",{style:{background:E(c.i,"80%")}}),c.n]},m):null)}),e.jsx("div",{className:"ctn-icon",onClick:c=>{c.preventDefault(),c.stopPropagation(),t(!r)},children:e.jsx("div",{className:"icon"})}),d?e.jsx("div",{className:"profile",style:{background:`no-repeat center/cover url(${(u=d==null?void 0:d.photos[0])!=null&&u.startsWith("/")?$:""}${d==null?void 0:d.photos}),#bbb`}}):e.jsx("div",{className:"login",onClick:()=>h(),children:"Se connecter"})]}),e.jsx("div",{className:"more-navs",onClick:c=>{c.preventDefault(),c.stopPropagation()},children:e.jsxs("ul",{className:r?"":"close",children:[V.map((c,m)=>m*200>=p.width-400?e.jsxs("li",{className:a==c.u?"active":"",onClick:()=>g(c.u),children:[e.jsx("span",{style:{background:E(c.i,"80%")}}),c.n]},m):null),e.jsxs("li",{className:a=="mode-lite"?"active":"",onClick:()=>{l(!o)},children:[e.jsx("span",{style:{background:E("/src/res/mark.png","70%")}}),o?"Lite mode off":"Lite mode on"]})]})})]})}function Re(){const{tryToken:i,blur:s,currentChild:a,openChild:n,back_color:o}=y(),{pathList:l}=T();return x.useEffect(()=>{n(void 0)},[l]),x.useEffect(()=>{i()},[]),e.jsxs("div",{className:"web unselectable",children:[e.jsxs("div",{className:"web-ctn",style:{filter:s?"blur(10px)":""},children:[e.jsx("div",{className:"background"}),e.jsx(Me,{}),e.jsxs("div",{className:"page-ctn",children:[e.jsx($e,{}),e.jsx(Te,{}),e.jsx(_e,{})]})]}),a&&e.jsx("div",{className:"child-viewer",onContextMenu:r=>{r.preventDefault(),n(void 0)},children:e.jsx("div",{className:"child-viewer-ctn",style:{background:o},onClick:()=>{n(void 0)},onContextMenu:r=>{r.preventDefault(),n(void 0)},children:a})})]})}const Pe=i=>i,Ge=Pe(e.jsx(ne.StrictMode,{children:e.jsx(Re,{})}));export{Ge as WebView};
